"use strict";!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("analyticsSmartLibModule",[],e):"object"==typeof exports?exports.analyticsSmartLibModule=e():t.analyticsSmartLibModule=e()}("undefined"!=typeof self?self:global,(function(){return(("undefined"!=typeof self?self:global).webpackChunkSmartLibModule=("undefined"!=typeof self?self:global).webpackChunkSmartLibModule||[]).push([[142],{5067:function(t,e,r){r.r(e),r.d(e,{AnalyticsRequestManager:function(){return i._5},AnalyticsSession:function(){return i.sO},BroadpeakCDNCacheKeepaliveManager:function(){return i.LS},CacheHandler:function(){return y},CacheKeepaliveManager:function(){return i.qN},CacheManager:function(){return i.L_},GenericPlayerAdapter:function(){return i.oM},GenericPlayerApi:function(){return i.OQ},Metrics:function(){return i.C3},MetricsManager:function(){return i.o4},PlayerAdapter:function(){return i.y4},PlayerEventListener:function(){return i.m5},PlayerManager:function(){return i.XM},SessionTrackerEvent:function(){return i.wJ},SessionTrackerEvents:function(){return i.KM},SessionTrackerTimeline:function(){return i.i7}});var n=r(5911),i=(r(752),r(228),r(1694),r(1090),r(6265),r(9373),r(9903),r(9749),r(6544),r(9288),r(7780));function a(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,a=void 0,"symbol"==typeof(a=function(t,e){if("object"!=typeof t||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"))?a:String(a)),n)}var i,a}function o(t,e,r){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.set(t,r)}function s(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,l(t,e,"get"))}function u(t,e,r){return function(t,e,r){if(e.set)e.set.call(t,r);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=r}}(t,l(t,e,"set"),r),r}function l(t,e,r){if(!e.has(t))throw new TypeError("attempted to "+r+" private field on non-instance");return e.get(t)}var c=new WeakMap,h=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),o(this,c,{writable:!0,value:void 0})}var e,r,l;return e=t,(r=[{key:"loadPlayerAdapters",value:function(){var t,e,r,a,o,l,h,f,d,v,p,y,g,m,b;return u(this,c,{}),s(this,c).generic=i.oM,this.addAdapter("theoplayer",null===(t=n.Z.theoplayerModule)||void 0===t?void 0:t.THEOPlayerAdapter),this.addAdapter("shaka",null===(e=n.Z.shakaModule)||void 0===e?void 0:e.ShakaPlayerAdapter),this.addAdapter("dashjs",null===(r=n.Z.dashjsModule)||void 0===r?void 0:r.DashJsPlayerAdapter),this.addAdapter("html5",null===(a=n.Z.html5Module)||void 0===a?void 0:a.HTML5PlayerAdapter),this.addAdapter("avplay",null===(o=n.Z.avplayModule)||void 0===o?void 0:o.AVPlayAdapter),this.addAdapter("diw387",null===(l=n.Z.diw387Module)||void 0===l?void 0:l.SagemcomDIW387Adapter),this.addAdapter("hbbtv1",null===(h=n.Z.hbbtv1Module)||void 0===h?void 0:h.HbbTV1PlayerAdapter),this.addAdapter("kaltura",null===(f=n.Z.kalturaModule)||void 0===f?void 0:f.KalturaPlayerAdapter),this.addAdapter("connectplayer",null===(d=n.Z.connectplayerModule)||void 0===d?void 0:d.ConnectPlayerAdapter),this.addAdapter("rxplayer",null===(v=n.Z.rxplayerModule)||void 0===v?void 0:v.RxPlayerAdapter),this.addAdapter("hlsjs",null===(p=n.Z.hlsjsModule)||void 0===p?void 0:p.HlsJsPlayerAdapter),this.addAdapter("bitmovin",null===(y=n.Z.bitmovinModule)||void 0===y?void 0:y.BitmovinPlayerAdapter),this.addAdapter("reactnativeconnectplayer",null===(g=n.Z.reactnativeconnectplayerModule)||void 0===g?void 0:g.ReactNativeConnectPlayerAdapter),this.addAdapter("reactnativetheoplayer",null===(m=n.Z.reactnativetheoplayerModule)||void 0===m?void 0:m.ReactNativeTHEOplayerAdapter),this.addAdapter("chromecast",null===(b=n.Z.chromecastModule)||void 0===b?void 0:b.ChromecastPlayerAdapter),s(this,c)}},{key:"addAdapter",value:function(t,e){void 0!==e&&(s(this,c)[t]=e)}},{key:"attachPlayer",value:function(t,e){for(var r in s(this,c))if(void 0!==s(this,c)[r]&&s(this,c)[r].checkPlayer(t,e)){var n=new(s(this,c)[r]);return n.attachPlayer(t,e),n}}}])&&a(e.prototype,r),l&&a(e,l),Object.defineProperty(e,"prototype",{writable:!1}),t}(),f=(r(7522),r(886),r(8077),r(268),r(4043),r(7267),r(9393));function d(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,v(n.key),n)}}function v(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}var p="sl-",y=function(){function t(){var e,r,n,i=this;if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e=this,n=void 0,(r=v(r="storage"))in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,f.oR.d("BpkCacheHandler","Init cache handler, localStorage is "+("undefined"!=typeof localStorage?"available":"unavailable")+"..."),this.storage={},"undefined"!=typeof localStorage){for(var a=[],o=0;o<localStorage.length;o++)a.push(localStorage.key(o));a.filter((function(t){return t.startsWith(p)})).map((function(t){return{key:t,value:localStorage.getItem(t)}})).forEach((function(t){void 0!==t.value&&(i.storage[t.key]=t.value)}))}}var e,r,n;return e=t,r=[{key:"set",value:function(t,e){t=p+t,this.storage[t]=e,setTimeout((function(){var r;null===(r=localStorage)||void 0===r||r.setItem(t,e)}),1)}},{key:"get",value:function(t){var e;return!1===(arguments.length>1&&void 0!==arguments[1]&&arguments[1])&&(t=p+t),t in this.storage?this.storage[t]:("undefined"!=typeof localStorage&&(e=localStorage.getItem(t)),null!=e?(this.storage[t]=e,e):void 0)}},{key:"delete",value:function(t){t=p+t,delete this.storage[t],setTimeout((function(){var e;null===(e=localStorage)||void 0===e||e.removeItem(t)}),1)}},{key:"keys",value:function(){return void 0!==this.storage?Object.keys(this.storage).map((function(t){return t.replace(p,"")})):[]}}],r&&d(e.prototype,r),n&&d(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();n.Z.analyticsModule={PlayerManagerHandler:h,PlayerEventListener:i.m5,GenericPlayerApi:i.OQ,CacheHandler:y},n.Z.getInstance().registerPlayerAdapters()},7780:function(t,e,r){r.d(e,{_5:function(){return st},sO:function(){return ce},LS:function(){return Me},qN:function(){return Oe},L_:function(){return Re},oM:function(){return b},OQ:function(){return q},C3:function(){return St},o4:function(){return At},y4:function(){return l},m5:function(){return A},XM:function(){return K},wJ:function(){return Ft},KM:function(){return Nt},i7:function(){return te}});r(9373),r(9903),r(9749),r(6544),r(228),r(9288),r(752),r(1694),r(1090),r(6265);var n=r(6138),i=(r(8052),r(6034),r(50),r(2349),r(1919),r(9113));function a(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,s(n.key),n)}}function o(t,e,r){return(e=s(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function s(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}var u="BpkPlayerAdapter",l=function(){function t(){var e=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),o(this,"handler",void 0),o(this,"webOSVersion",void 0),"undefined"!=typeof webOS&&webOS.deviceInfo((function(t){e.webOSVersion=t.sdkVersion}))}var e,r,s;return e=t,r=[{key:"getName",value:function(){return""}},{key:"getVersion",value:function(){return""}},{key:"getOSName",value:function(){return i.Z.getInstance().osName}},{key:"getOSVersion",value:function(){return i.Z.getInstance().osVersion}},{key:"getDeviceType",value:function(){return i.Z.getInstance().deviceType}},{key:"getBitrate",value:function(){return-1}},{key:"getPosition",value:function(){return 0}},{key:"getDuration",value:function(){return 0}},{key:"getVolume",value:function(){return 1}},{key:"getCapabilities",value:function(){return{adTracking:!1}}},{key:"initSessionPlayerObjects",value:function(){}},{key:"releaseSessionPlayerObjects",value:function(){}},{key:"onKeepaliveSessionReportUpdateRequested",value:function(t){t.playerName=this.getName(),t.playerVersion=this.getVersion(),t.osName=this.getOSName(),t.osVersion=this.getOSVersion(),t.deviceType=this.getDeviceType()}},{key:"onEndSessionReportUpdateRequested",value:function(t){t.playerName=this.getName(),t.playerVersion=this.getVersion(),t.osName=this.getOSName(),t.osVersion=this.getOSVersion(),t.deviceType=this.getDeviceType()}},{key:"notifyLoading",value:function(){void 0!==this.handler?this.handler.notifyLoading():n.o.e(u,"Implementation error: session.attachPlayer should be called prior to onSessionStart event. This event is called when the player starts buffering the first time.")}},{key:"notifyFirstImage",value:function(){void 0!==this.handler?this.handler.notifyFirstImage(this.getBitrate(),this.getPosition()):n.o.e(u,"Implementation error: session.getURL(...) or session.getQuery()/session.startStreamingSession(...) should be called prior to onSessionStart event. This event is called when the first image is displayed.")}},{key:"notifyPause",value:function(){void 0!==this.handler?this.handler.notifyPause():n.o.e(u,"Implementation error: session.getURL(...) or session.getQuery()/session.startStreamingSession(...) should be called prior to onSessionPause event.")}},{key:"notifyResume",value:function(){void 0!==this.handler?this.handler.notifyResume():n.o.e(u,"Implementation error: session.getURL(...) or session.getQuery()/session.startStreamingSession(...) should be called prior to onSessionResume event.")}},{key:"notifyLayerSwitch",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.getBitrate();void 0!==this.handler?this.handler.notifyLayerSwitch(t):n.o.e(u,"Implementation error: session.getURL(...) or session.getQuery()/session.startStreamingSession(...) should be called prior to onLayerSwitch event.")}},{key:"notifySeek",value:function(t,e){void 0!==this.handler?this.handler.notifySeek(t,e):n.o.e(u,"Implementation error: session.getURL(...) or session.getQuery()/session.startStreamingSession(...) should be called prior to onSeek event.")}},{key:"notifyStallStart",value:function(){void 0!==this.handler?this.handler.notifyBufferingStart():n.o.e(u,"Implementation error: session.getURL(...) or session.getQuery()/session.startStreamingSession(...) should be called prior to onStallStart event.")}},{key:"notifyStallEnd",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];void 0!==this.handler?this.handler.notifyBufferingEnd(t):n.o.e(u,"Implementation error: session.getURL(...) or session.getQuery()/session.startStreamingSession(...) should be called prior to onStallEnd event.")}},{key:"notifyClose",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;void 0!==this.handler?this.handler.notifyClose(t):n.o.e(u,"Implementation error: session.attachPlayer should be called prior to onSessionStart event. This event is called when the player is closing.")}},{key:"notifyVolumeChanged",value:function(t){void 0!==this.handler?this.handler.notifyVolumeChanged(t):n.o.e(u,"Implementation error: session.getURL(...) or session.getQuery()/session.startStreamingSession(...) should be called prior to onVolumeChanged event.")}},{key:"notifyPlayerError",value:function(t,e){void 0!==this.handler?this.handler.notifyPlayerError(t,e):n.o.e(u,"Implementation error: session.getURL(...) or session.getQuery()/session.startStreamingSession(...) should be called prior to onPlayerError event.")}},{key:"attachPlayer",value:function(t,e){return n.o.e(u,"Implementation error: attachPlayer not implemented for this adapter."),!1}},{key:"detachPlayer",value:function(){n.o.e(u,"Implementation error: detachPlayer not implemented for this adapter.")}},{key:"attachSession",value:function(t){this.handler=t}},{key:"detachSession",value:function(){this.handler=void 0}},{key:"setStatusCode",value:function(t){void 0!==this.handler&&(this.handler.sessionReport.statusCode=t)}},{key:"setPlayerErrorCode",value:function(t){void 0!==this.handler&&(this.handler.sessionReport.playerErrorCode=String(t))}},{key:"setCustomParameter",value:function(t,e){void 0!==this.handler&&(void 0===this.handler.streamingSession?n.o.e(u,"Set custom parameter on player adapter is only available when using StreamingSession API.",this.handler.id):this.handler.streamingSession.setCustomParameter(t,e))}}],s=[{key:"checkPlayer",value:function(t,e){return n.o.e(u,"Implementation error: static checkPlayer not implemented for this adapter."),!1}}],r&&a(e.prototype,r),s&&a(e,s),Object.defineProperty(e,"prototype",{writable:!1}),t}(),c=r(7301);function h(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,m(n.key),n)}}function f(){return f="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=y(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}},f.apply(this,arguments)}function d(t,e){return d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},d(t,e)}function v(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=y(t);if(e){var i=y(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"==typeof e||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return p(t)}(this,r)}}function p(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function y(t){return y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},y(t)}function g(t,e,r){return(e=m(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function m(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}var b=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&d(t,e)}(a,t);var e,r,n,i=v(a);function a(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),g(p(t=i.call(this)),"player",void 0),g(p(t),"listener",void 0),t}return e=a,n=[{key:"checkPlayer",value:function(t,e){return c.Z.hasMethods(t,["getPlayerName","getVersion","getOSName","getDeviceVersion","getDeviceType","getCurrentPosition","getTotalDuration","getCurrentBitrate"])}}],(r=[{key:"getName",value:function(){return this.player.getPlayerName()}},{key:"getVersion",value:function(){return this.player.getVersion()}},{key:"getOSName",value:function(){return this.player.getOSName()}},{key:"getOSVersion",value:function(){return this.player.getDeviceVersion()}},{key:"getDeviceType",value:function(){return this.player.getDeviceType()}},{key:"getBitrate",value:function(){return this.player.getCurrentBitrate()}},{key:"getPosition",value:function(){return this.player.getCurrentPosition()}},{key:"getDuration",value:function(){return this.player.getTotalDuration()}},{key:"getCapabilities",value:function(){return"function"==typeof this.player.getCapabilities?this.player.getCapabilities():f(y(a.prototype),"getCapabilities",this).call(this)}},{key:"attachPlayer",value:function(t,e){return!!a.checkPlayer(t,e)&&(this.player=t,this.listener=e,this.player.playerAdapter=this,!0)}},{key:"detachPlayer",value:function(){void 0!==this.player&&(this.player.playerAdapter=void 0),this.player=void 0,this.listener=void 0}}])&&h(e.prototype,r),n&&h(e,n),Object.defineProperty(e,"prototype",{writable:!1}),a}(l);r(7195),r(2506),r(7522);function S(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,k(n.key),n)}}function k(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}var w,E,D,P="BpkPlayerEventListener",A=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,r,i;return e=t,i=[{key:"addPlayerAdapter",value:function(e){-1===t.playerAdapters.indexOf(e)&&t.playerAdapters.push(e)}},{key:"removePlayerAdapter",value:function(e){var r=t.playerAdapters.indexOf(e);-1!==r&&t.playerAdapters.splice(r,1)}},{key:"isStarted",value:function(){var e=t.playerAdapters;return e.length>0&&void 0!==e[e.length-1].handler&&e[e.length-1].handler.metricsManager.started}},{key:"isPlaying",value:function(){var e=t.playerAdapters;return e.length>0&&void 0!==e[e.length-1].handler&&e[e.length-1].handler.metricsManager.playing}},{key:"isBuffering",value:function(){var e=t.playerAdapters;return e.length>0&&void 0!==e[e.length-1].handler&&e[e.length-1].handler.metricsManager.buffering}},{key:"onSessionStart",value:function(){var e=t.playerAdapters;e.length>0?e.forEach((function(t){return t.notifyFirstImage()})):n.o.e(P,"Implementation error: SmartLib.attachPlayer(...) should be called prior to onSessionStart event. If you don't attach any player, please remove this call, SmartLib is now handling it automatically.")}},{key:"onSessionPause",value:function(){var e=t.playerAdapters;e.length>0?e.forEach((function(t){return t.notifyPause()})):n.o.e(P,"Implementation error: SmartLib.attachPlayer(...) should be called prior to onSessionPause event.")}},{key:"onSessionResume",value:function(){var e=t.playerAdapters;e.length>0?e.forEach((function(t){return t.notifyResume()})):n.o.e(P,"Implementation error: SmartLib.attachPlayer(...) should be called prior to onSessionResume event.")}},{key:"onLayerSwitch",value:function(e){var r=t.playerAdapters;r.length>0?r.forEach((function(t){return t.notifyLayerSwitch(e)})):n.o.e(P,"Implementation error: SmartLib.attachPlayer(...) should be called prior to onLayerSwitch event.")}},{key:"onSeek",value:function(e,r){var i=t.playerAdapters;i.length>0?i.forEach((function(t){return t.notifySeek(e,r)})):n.o.e(P,"Implementation error: SmartLib.attachPlayer(...) should be called prior to onSeek event.")}},{key:"onStallStart",value:function(){var e=t.playerAdapters;e.length>0?e.forEach((function(t){return t.notifyStallStart()})):n.o.e(P,"Implementation error: SmartLib.attachPlayer(...) should be called prior to onStallStart event.")}},{key:"onStallEnd",value:function(e){var r=t.playerAdapters;r.length>0?r.forEach((function(t){return t.notifyStallEnd(e)})):n.o.e(P,"Implementation error: SmartLib.attachPlayer(...) should be called prior to onStallEnd event.")}}],(r=null)&&S(e.prototype,r),i&&S(e,i),Object.defineProperty(e,"prototype",{writable:!1}),t}();function T(t,e,r){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.set(t,r)}function I(t,e,r){return O(t,N(t,e,"set"),r),r}function R(t,e){return C(t,N(t,e,"get"))}function N(t,e,r){if(!e.has(t))throw new TypeError("attempted to "+r+" private field on non-instance");return e.get(t)}function O(t,e,r){if(e.set)e.set.call(t,r);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=r}}function M(t,e,r){return x(t,e),B(r,"get"),C(t,r)}function B(t,e){if(void 0===t)throw new TypeError("attempted to "+e+" private static field before its declaration")}function x(t,e){if(t!==e)throw new TypeError("Private static access of wrong provenance")}function C(t,e){return e.get?e.get.call(t):e.value}function L(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function j(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,U(n.key),n)}}function _(t,e,r){return e&&j(t.prototype,e),r&&j(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function U(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}w=A,D=[],(E=k(E="playerAdapters"))in w?Object.defineProperty(w,E,{value:D,enumerable:!0,configurable:!0,writable:!0}):w[E]=D;var F="BpkPlayerMgr",V=function(){function t(){L(this,t)}return _(t,null,[{key:"loadPlayerAdapters",value:function(){return{}}}]),t}(),Z=new WeakMap,W=new WeakMap,H=new WeakMap,K=function(){function t(){L(this,t),function(t,e,r){(e=U(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}(this,"smartLib",void 0),T(this,Z,{writable:!0,value:V}),T(this,W,{writable:!0,value:{}}),T(this,H,{writable:!0,value:void 0})}return _(t,[{key:"init",value:function(t){R(this,Z)===V&&(I(this,Z,t),I(this,W,R(this,Z).loadPlayerAdapters()),n.o.v(F,"Compatible players: "+Object.keys(R(this,W))))}},{key:"release",value:function(){this.setPlayerAdapter(void 0)}},{key:"attachInstance",value:function(t){this.smartLib=t}},{key:"getAdapters",value:function(){return R(this,W)}},{key:"setPlayerAdapter",value:function(t){void 0!==R(this,H)&&R(this,H)!==t&&(n.o.i(F,"Player "+R(this,H).getName()+" detached"),R(this,H).detachPlayer()),R(this,H)!==t&&void 0!==t?t instanceof b&&(n.o.d(F,"Attaching generic player to SmartLib singleton"),A.addPlayerAdapter(t)):R(this,H)!==t&&void 0===t&&R(this,H)instanceof b&&(n.o.d(F,"Detaching generic player from SmartLib singleton"),A.removePlayerAdapter(R(this,H))),R(this,H)!==t?I(this,H,t):void 0!==t&&n.o.i(F,"Player "+R(this,H).getName()+" already attached"),void 0!==t&&n.o.i(F,"Player "+t.getName()+" attached")}},{key:"getPlayerAdapter",value:function(){return R(this,H)}}],[{key:"getInstance",value:function(){return M(t,t,z)||function(t,e,r,n){x(t,e),B(r,"set"),O(t,r,n)}(t,t,z,new t),M(t,t,z)}}]),t}(),z={writable:!0,value:void 0};function Y(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,J(n.key),n)}}function J(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}var Q="BpkGenericPlayerApi",q=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),function(t,e,r){(e=J(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}(this,"playerAdapter",void 0)}var e,r,i;return e=t,(r=[{key:"getPlayerName",value:function(){return""}},{key:"getVersion",value:function(){return""}},{key:"getOSName",value:function(){return""}},{key:"getDeviceVersion",value:function(){return""}},{key:"getDeviceType",value:function(){return""}},{key:"getCurrentPosition",value:function(){return 0}},{key:"getTotalDuration",value:function(){return 0}},{key:"getCurrentBitrate",value:function(){return 0}},{key:"getCapabilities",value:function(){return{}}},{key:"notifyFirstImage",value:function(){void 0!==this.playerAdapter?this.playerAdapter.notifyFirstImage():n.o.e(Q,"Implementation error: session.attachPlayer(...) should be called prior to notifyFirstImage. This event is called when the first image is displayed.")}},{key:"notifyPause",value:function(){void 0!==this.playerAdapter?this.playerAdapter.notifyPause():n.o.e(Q,"Implementation error: session.attachPlayer(...) should be called prior to notifyPause.")}},{key:"notifyResume",value:function(){void 0!==this.playerAdapter?this.playerAdapter.notifyResume():n.o.e(Q,"Implementation error: session.attachPlayer(...) should be called prior to notifyResume.")}},{key:"notifyLayerSwitch",value:function(t){void 0!==this.playerAdapter?this.playerAdapter.notifyLayerSwitch(t):n.o.e(Q,"Implementation error: session.attachPlayer(...) should be called prior to notifyLayerSwitch.")}},{key:"notifyStallStart",value:function(){void 0!==this.playerAdapter?this.playerAdapter.notifyStallStart():n.o.e(Q,"Implementation error: session.attachPlayer(...) should be called prior to notifyStallStart.")}},{key:"notifyStallEnd",value:function(t){void 0!==this.playerAdapter?this.playerAdapter.notifyStallEnd(t):n.o.e(Q,"Implementation error: session.attachPlayer(...) should be called prior to notifyStallEnd.")}},{key:"notifySeek",value:function(t,e){void 0!==this.playerAdapter?this.playerAdapter.notifySeek(t,e):n.o.e(Q,"Implementation error: session.attachPlayer(...) should be called prior to notifySeek.")}},{key:"setPlayerErrorCode",value:function(t){void 0!==this.playerAdapter?this.playerAdapter.setPlayerErrorCode(t):n.o.e(Q,"Implementation error: session.attachPlayer(...) should be called prior to setPlayerErrorCode. This has to be called before stopStreamingSession when the player error code as a string.")}}])&&Y(e.prototype,r),i&&Y(e,i),Object.defineProperty(e,"prototype",{writable:!1}),t}(),G=(r(8436),r(2918),r(3964),r(8324),r(4796)),X=r(292);function $(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,et(n.key),n)}}function tt(t,e,r){return(e=et(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function et(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}function rt(t,e,r,n){return at(t,e),it(r,"set"),function(t,e,r){if(e.set)e.set.call(t,r);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=r}}(t,r,n),n}function nt(t,e,r){return at(t,e),it(r,"get"),function(t,e){if(e.get)return e.get.call(t);return e.value}(t,r)}function it(t,e){if(void 0===t)throw new TypeError("attempted to "+e+" private static field before its declaration")}function at(t,e){if(t!==e)throw new TypeError("Private static access of wrong provenance")}var ot="BpkAnalyticsRequestMgr",st=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,r,i;return e=t,i=[{key:"getInstance",value:function(){return nt(t,t,ut)||rt(t,t,ut,new t),nt(t,t,ut)}}],(r=[{key:"buildAnalyticsAddress",value:function(e){return(e=e.trim()).endsWith("/")||(e+="/"),e+=t.METRICS_RECEIVER_PATH}},{key:"endSession",value:function(e,r){var i=this,a=e.sessionReport;if(0!==r.analyticsAddress.length){var o=r.analyticsAddress.split(","),s=[];return o.forEach((function(o){var u;0===o.indexOf(t.NOCACHE_PREFIX)?(n.o.d(ot,t.NOCACHE_PREFIX+" option used, no need to store the report in cache"),o=i.buildAnalyticsAddress(o.substring(t.NOCACHE_PREFIX.length))):(o=i.buildAnalyticsAddress(o),u=X.Z.analyticsModule.CacheManager.getInstance().storeSessionReport(o,a.toEndSessionJSON(),!0,Date.now(),!0)),n.o.i(ot,"Posting metrics to "+o,e.id);var l=i.postSession(o,a.toEndSessionJSON(),r).then((function(t){return n.o.i(ot,"Send session metrics ended with status code "+t.httpStatus+" ("+o+")",e.id),t.httpStatus>=200&&t.httpStatus<300?(void 0!==u&&X.Z.analyticsModule.CacheManager.getInstance().deleteSessionReport(u),X.Z.analyticsModule.CacheManager.getInstance().push(),!0):(void 0!==u&&X.Z.analyticsModule.CacheManager.getInstance().update(u,"sending",!1),!1)}));s.push(l)})),Promise.all(s).then((function(){n.o.d(ot,"Send session metrics done",e.id)}))}return n.o.w(ot,"Metrics platform URL is null, metrics won't be posted anywhere.",e.id),Promise.resolve(!1)}},{key:"endSessionCache",value:function(t,e,r){return 0!==t.length?(n.o.i(ot,"Posting cache to "+t),this.postSession(t,e,r).then((function(e){return n.o.i(ot,"Send cache ended with status code "+e.httpStatus+" ("+t+")"),e.httpStatus>=200&&e.httpStatus<300}))):(n.o.w(ot,"Metrics platform URL is null, cache won't be posted anywhere."),Promise.resolve(!1))}},{key:"postSession",value:function(e,r,i){return new Promise((function(a,o){var s={Connection:"close"};void 0!==i.userAgent&&(s["User-Agent"]=i.userAgent);var u=JSON.stringify(r);n.o.v(ot,"Executing POST request with body: "+u),G.Z.getInstance().asyncPost(e,s,u,t.POST_SESSION_REQUEST_TIMEOUT,(function(t){var e=0;void 0!==t.statusCode&&(e=parseInt(t.statusCode,10)),a({httpStatus:e})}))}))}}])&&$(e.prototype,r),i&&$(e,i),Object.defineProperty(e,"prototype",{writable:!1}),t}();tt(st,"METRICS_RECEIVER_PATH","fservices/metricsReceiver"),tt(st,"POST_SESSION_REQUEST_TIMEOUT",5e3),tt(st,"NOCACHE_PREFIX","nocache=");var ut={writable:!0,value:void 0},lt=(r(2826),r(8607),r(6256),r(6664),r(5980),r(9943),r(6089),r(8539),r(8690),r(4302),r(1274),r(5385),r(5552),r(1803),r(1565),r(7987),r(9365),r(677),r(8118),r(1165),r(1522),r(1638),r(4797),r(7300),r(3356),r(9724),r(9901),r(6293));function ct(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ft(n.key),n)}}function ht(t,e,r){return(e=ft(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function ft(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}var dt=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),ht(this,"index",void 0),ht(this,"buffer",void 0),this.index=0,this.buffer=new Uint8Array(e)}var e,r,n;return e=t,r=[{key:"put",value:function(t){return this.buffer[this.index++]=t,this}},{key:"putChar",value:function(t){return this.buffer[this.index++]=(65280&t)>>8,this.buffer[this.index++]=255&t,this}},{key:"putByteBuffer",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.buffer.length,r=t.buffer;return this.buffer.length>=this.index+e&&(this.buffer.set(r,this.index),this.index+=e),this}},{key:"set",value:function(t,e){return this.buffer[e]=t,this}},{key:"data",value:function(){return this.buffer}},{key:"base64",value:function(){return lt.Z.bufferToBase64(this)}},{key:"length",value:function(){return this.index}},{key:"capacity",value:function(){return this.buffer.length}},{key:"remaining",value:function(){return this.capacity()-this.length()}},{key:"toString",value:function(){return lt.Z.bufferToString(this.buffer,this.index)+"(length:"+this.length()+")"}}],r&&ct(e.prototype,r),n&&ct(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();ht(dt,"EMPTY",new dt(0));var vt=r(795);r(9730),r(5137);function pt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,bt(n.key),n)}}function yt(t,e,r){return e&&pt(t.prototype,e),r&&pt(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function gt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function mt(t,e,r){return(e=bt(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function bt(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}var St=yt((function t(e){gt(this,t),mt(this,"redirectionTime",void 0),mt(this,"startupTime",void 0),mt(this,"completion",void 0),mt(this,"playbackType",void 0),mt(this,"playbackDuration",void 0),mt(this,"sessionDuration",void 0),mt(this,"contentDuration",void 0),mt(this,"stallsNumber",void 0),mt(this,"maxStallDuration",void 0),mt(this,"totalStallsDuration",void 0),mt(this,"rebufferingsNumber",void 0),mt(this,"maxRebufferingDuration",void 0),mt(this,"totalRebufferingDuration",void 0),mt(this,"minBitrate",void 0),mt(this,"maxBitrate",void 0),mt(this,"averageBitrate",void 0),mt(this,"layerSwitchesNumber",void 0),mt(this,"timeSpentPerLayer",void 0),mt(this,"preStartupTime",void 0),void 0!==e?(this.redirectionTime=e.redirectionTime,this.startupTime=e.startupTime,this.completion=e.completion,this.playbackType=e.playbackType,this.playbackDuration=e.playbackDuration,this.sessionDuration=e.sessionDuration,this.contentDuration=e.contentDuration,this.stallsNumber=e.stallsNumber,this.maxStallDuration=e.maxStallDuration,this.totalStallsDuration=e.totalStallsDuration,this.rebufferingsNumber=e.rebufferingsNumber,this.maxRebufferingDuration=e.maxRebufferingDuration,this.totalRebufferingDuration=e.totalRebufferingDuration,this.minBitrate=e.minBitrate,this.maxBitrate=e.maxBitrate,this.averageBitrate=e.averageBitrate,this.layerSwitchesNumber=e.layerSwitchesNumber,this.timeSpentPerLayer=JSON.parse(JSON.stringify(e.timeSpentPerLayer)),this.preStartupTime=e.preStartupTime):(this.redirectionTime=0,this.startupTime=0,this.completion=0,this.playbackType="",this.playbackDuration=0,this.sessionDuration=0,this.contentDuration=0,this.stallsNumber=0,this.maxStallDuration=0,this.totalStallsDuration=0,this.rebufferingsNumber=0,this.maxRebufferingDuration=0,this.totalRebufferingDuration=0,this.minBitrate=0,this.maxBitrate=0,this.averageBitrate=0,this.layerSwitchesNumber=0,this.timeSpentPerLayer={},this.preStartupTime=0)}));mt(St,"PLAYBACK_TYPE_LIVE","LIVE"),mt(St,"PLAYBACK_TYPE_VOD","VOD");var kt=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new St;gt(this,t),mt(this,"metrics",void 0),mt(this,"watchingRanges",void 0),this.metrics=e,this.reset()}return yt(t,[{key:"setRedirectionTime",value:function(t){return this.metrics.redirectionTime=t,this}},{key:"setStartupTime",value:function(t){return this.metrics.startupTime=t,this}},{key:"setSessionDuration",value:function(t){return this.metrics.sessionDuration=t,this}},{key:"setContentDuration",value:function(t){return this.metrics.contentDuration=t,this}},{key:"setPlaybackType",value:function(t){return this.metrics.playbackType=t,this}},{key:"setFirstLayer",value:function(t){return t>0&&(this.metrics.maxBitrate=t,this.metrics.minBitrate=t),this}},{key:"setPreStartupTime",value:function(t){return this.metrics.preStartupTime=t,this}},{key:"addTimeSpentPerLayer",value:function(t,e){if((t=Math.round(t))>0){var r=this.metrics.timeSpentPerLayer[t];void 0===r&&(r=0),r+=e,this.metrics.timeSpentPerLayer[t]=r,this.metrics.maxBitrate<t&&(this.metrics.maxBitrate=t),(this.metrics.minBitrate>t||0===this.metrics.minBitrate)&&(this.metrics.minBitrate=t)}return this}},{key:"addLayerSwitch",value:function(){return this.metrics.layerSwitchesNumber++,this}},{key:"addPlaybackDuration",value:function(t){return this.metrics.playbackDuration+=t,this}},{key:"addWatchingRange",value:function(t,e){return t<e&&(n.o.v("BpkMetrics","Add watching range, duration "+(e-t)+"ms"),this.watchingRanges.push({start:t,end:e,duration:e-t})),this}},{key:"addStall",value:function(t){return this.metrics.stallsNumber++,this.metrics.totalStallsDuration+=t,this.metrics.maxStallDuration<t&&(this.metrics.maxStallDuration=t),this}},{key:"addRebuffering",value:function(t){return this.metrics.rebufferingsNumber++,this.metrics.totalRebufferingDuration+=t,this.metrics.maxRebufferingDuration<t&&(this.metrics.maxRebufferingDuration=t),this}},{key:"clone",value:function(){var e=new t(new St(this.metrics));return e.watchingRanges=JSON.parse(JSON.stringify(this.watchingRanges)),e}},{key:"computeCompletion",value:function(){if(this.metrics.playbackType===St.PLAYBACK_TYPE_LIVE||0===this.metrics.contentDuration)return 1e3;var t=JSON.parse(JSON.stringify(this.watchingRanges)),e=t.slice(0);if(1===t.length)return Math.floor(1e3*e[0].duration/this.metrics.contentDuration);if(0===t.length)return 0;var r=[],n=null;e=e.sort((function(t,e){return parseInt(t.start,10)>parseInt(e.start,10)?1:parseInt(t.start,10)<parseInt(e.start,10)?-1:0})),r.push(e[0]);for(var i=1;i<e.length;i++)n=r[r.length-1],parseInt(n.end,10)<parseInt(e[i].start,10)?r.push(e[i]):parseInt(n.end,10)<parseInt(e[i].end,10)&&(n.end=parseInt(e[i].end,10),n.duration=n.end-n.start,r.pop(),r.push(n));for(var a=0,o=0;o<r.length;o++)r[o].duration=parseInt(r[o].end,10)-parseInt(r[o].start,10),a+=parseInt(r[o].duration,10);this.watchingRanges=r;var s=Math.floor(1e3*a/this.metrics.contentDuration);return s>1e3?1e3:s}},{key:"build",value:function(){var t=0,e=0;for(var r in this.metrics.timeSpentPerLayer){var n=this.metrics.timeSpentPerLayer[r];t+=r*n,e+=n}return 0!==e&&(this.metrics.averageBitrate=Math.round(t/e)),this.metrics.completion=this.computeCompletion(),this.metrics.completion<0?this.metrics.completion=0:this.metrics.completion>1e3&&(this.metrics.completion=1e3),this.metrics.startupTime+=this.metrics.preStartupTime,this.metrics}},{key:"reset",value:function(){return this.watchingRanges=[],this}}]),t}();function wt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Dt(n.key),n)}}function Et(t,e,r){return(e=Dt(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Dt(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}var Pt="BpkMetricsMgr",At=function(){function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),Et(this,"handler",void 0),Et(this,"builder",void 0),Et(this,"playerAdapter",void 0),Et(this,"timeline",void 0),Et(this,"started",void 0),Et(this,"playing",void 0),Et(this,"buffering",void 0),Et(this,"seeking",void 0),Et(this,"bitrate",void 0),Et(this,"redirectionStartDate",void 0),Et(this,"playingStartDate",void 0),Et(this,"bufferingStartDate",void 0),Et(this,"lastLayerSwitchDate",void 0),Et(this,"lastSeekDate",void 0),Et(this,"playOnNextBufferingEnd",void 0),Et(this,"startPosition",void 0),this.handler=e,this.builder=new kt,this.playerAdapter=r,this.timeline=this.handler.sessionReport.timeline,this.started=!1,this.playing=!1,this.buffering=!1,this.seeking=!1,this.bitrate=-1,this.redirectionStartDate=Date.now(),this.playingStartDate=Date.now(),this.bufferingStartDate=0,this.lastLayerSwitchDate=0,this.lastSeekDate=0,this.playOnNextBufferingEnd=!1,this.startPosition=0}var e,r,i;return e=t,(r=[{key:"onStart",value:function(){this.redirectionStartDate=Date.now()}},{key:"onRedirectionEnd",value:function(){this.builder.setRedirectionTime(Date.now()-this.redirectionStartDate),this.playingStartDate=Date.now()}},{key:"onFirstImage",value:function(t,e){n.o.i(Pt,"Streaming session started ("+t+"kbps,"+vt.Z.formatTime(e)+")",this.handler.id),this.started=!0,this.playing=!0,this.startPosition=e,this.builder.setContentDuration(this.playerAdapter.getDuration()).setPlaybackType(this.playerAdapter.getDuration()<=0?St.PLAYBACK_TYPE_LIVE:St.PLAYBACK_TYPE_VOD),this.builder.setStartupTime(Date.now()-this.redirectionStartDate),this.playingStartDate=Date.now(),this.builder.setFirstLayer(t),this.bitrate=t,this.lastLayerSwitchDate=Date.now()}},{key:"onLayerSwitch",value:function(t){var e;n.o.d(Pt,"Player changed layer to "+t+"kbps",this.handler.id),this.started&&(this.builder.addTimeSpentPerLayer(this.bitrate,Date.now()-this.lastLayerSwitchDate),this.lastLayerSwitchDate=Date.now(),this.bitrate!==t&&this.bitrate>0&&(n.o.d(Pt,"Player changed layer, before: "+this.bitrate+"kbps, now: "+t+"kbps",this.handler.id),null===(e=this.timeline)||void 0===e||e.pushEventBitrate(Nt.LayerSwitch,t),this.builder.addLayerSwitch())),this.bitrate=t}},{key:"onPause",value:function(){var t;this.playing&&(n.o.d(Pt,"Player is paused",this.handler.id),null===(t=this.timeline)||void 0===t||t.pushEvent(Nt.Pause),this.playing=!1,this.buffering||this.builder.addPlaybackDuration(Date.now()-this.playingStartDate),this.builder.addWatchingRange(this.startPosition,this.playerAdapter.getPosition()))}},{key:"onResume",value:function(){var t;this.started&&!this.playing&&(n.o.d(Pt,"Player is resumed",this.handler.id),null===(t=this.timeline)||void 0===t||t.pushEvent(Nt.Resume),this.playing=!0,this.buffering=!1,this.playingStartDate=Date.now())}},{key:"onBufferingStart",value:function(){if(!this.buffering&&this.started){var e;n.o.d(Pt,"Player is buffering",this.handler.id),null===(e=this.timeline)||void 0===e||e.pushEvent(Nt.BufferingStart);var r=Date.now();this.buffering=!0,this.seeking&&r-this.lastSeekDate>t.MAX_TIME_BETWEEN_SEEK_AND_REBUFFERING&&(this.seeking=!1),this.bufferingStartDate=r,this.playOnNextBufferingEnd=!1,this.playing&&this.builder.addPlaybackDuration(r-this.playingStartDate)}}},{key:"onBufferingEnd",value:function(t){var e=Date.now();t&&this.playOnNextBufferingEnd&&!this.buffering&&(this.playingStartDate=e,this.playOnNextBufferingEnd=!1),this.started&&this.bufferingStartDate>0&&(this.buffering=!1,t?this.playingStartDate=e:this.playOnNextBufferingEnd=!0,this.seeking?(this.seeking=!1,this.handler.notifyRebufferingEnd()):this.handler.notifyStallEnd(),this.bufferingStartDate=0)}},{key:"onStallEnd",value:function(){var t,e=Date.now()-this.bufferingStartDate;this.builder.addStall(e),null===(t=this.timeline)||void 0===t||t.pushEvent(Nt.StallStop),n.o.d(Pt,"Player stalled for "+e+"ms",this.handler.id)}},{key:"onRebufferingEnd",value:function(){var t,e=Date.now()-this.bufferingStartDate;this.builder.addRebuffering(e),null===(t=this.timeline)||void 0===t||t.pushEvent(Nt.RebufferingStop),n.o.d(Pt,"Player buffered for "+e+"ms",this.handler.id)}},{key:"onSeek",value:function(t,e){var r;n.o.d(Pt,"Player seeked from "+vt.Z.formatTime(t)+" to "+vt.Z.formatTime(e),this.handler.id),null===(r=this.timeline)||void 0===r||r.pushEventPositionStartEnd(Nt.Seek,t,e),this.builder.addWatchingRange(this.startPosition,t),this.startPosition=e,this.seeking=!0,this.lastSeekDate=Date.now()}},{key:"onStop",value:function(t){if(this.started){var e=Date.now();this.playing&&!this.buffering&&this.builder.addPlaybackDuration(e-this.playingStartDate),this.buffering&&this.onBufferingEnd(!1),this.playing&&(this.builder.addWatchingRange(this.startPosition,this.playerAdapter.getPosition()),this.playing=!1),this.builder.setSessionDuration(e-this.redirectionStartDate).addTimeSpentPerLayer(this.bitrate,e-this.lastLayerSwitchDate),this.started=!1}}},{key:"onStartSessionReportUpdateRequested",value:function(t){t.metrics=this.builder.build()}},{key:"onKeepaliveSessionReportUpdateRequested",value:function(t){var e=Date.now(),r=this.builder.clone();if(this.playing&&!this.buffering&&r.addPlaybackDuration(e-this.playingStartDate),this.started&&this.bufferingStartDate>0){var n=Date.now()-this.bufferingStartDate;this.seeking?r.addRebuffering(n):r.addStall(n)}this.playing&&r.addWatchingRange(this.startPosition,this.playerAdapter.getPosition()),r.setSessionDuration(e-this.redirectionStartDate).addTimeSpentPerLayer(this.bitrate,e-this.lastLayerSwitchDate);var i=this.handler.getCustomParameters().pre_startup_time,a=0;void 0===i||isNaN(i)||(a=parseInt(i,10)),r.setPreStartupTime(a),t.metrics=r.build()}},{key:"onEndSessionReportUpdateRequested",value:function(t){var e=Date.now();this.builder.setSessionDuration(e-this.redirectionStartDate);var r=this.handler.getCustomParameters().pre_startup_time,n=0;void 0===r||isNaN(r)||(n=parseInt(r,10)),this.builder.setPreStartupTime(n),t.metrics=this.builder.build()}}])&&wt(e.prototype,r),i&&wt(e,i),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Tt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Rt(n.key),n)}}function It(t,e,r){return(e=Rt(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Rt(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}Et(At,"MAX_TIME_BETWEEN_SEEK_AND_REBUFFERING",1e3);var Nt={None:0,Start:1,Stop:2,RedirectionEnd:3,FirstImage:4,Pause:5,Resume:6,BufferingStart:7,StallStart:8,StallStop:9,RebufferingStart:10,RebufferingStop:11,Seek:12,LayerSwitch:13,AdBreakStart:14,AdBreakStop:15,NetworkAvailable:16,NetworkLost:17,Mute:18,Unmute:19,Multicast:20,Unicast:21,DataSummary:144,EmptySummary:145},Ot=[Nt.RedirectionEnd,Nt.Pause,Nt.Resume,Nt.BufferingStart,Nt.StallStart,Nt.StallStop,Nt.RebufferingStart,Nt.RebufferingStop,Nt.AdBreakStart,Nt.NetworkLost,Nt.Mute,Nt.Unmute,Nt.Multicast,Nt.Unicast],Mt=[Nt.Start],Bt=[Nt.LayerSwitch],xt=[Nt.FirstImage],Ct=[Nt.Seek],Lt=[Nt.Stop],jt=[Nt.AdBreakStop],_t=[Nt.NetworkAvailable],Ut="BpkSessionTrackerEvent",Ft=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),It(this,"eventId",void 0),It(this,"eventDate",void 0),It(this,"eventData",void 0),It(this,"startStopEvent",void 0),It(this,"startEventId",void 0),It(this,"stopEventId",void 0),It(this,"triggerStartEventId",void 0),It(this,"keepLastOnly",void 0),It(this,"attachEventId",void 0),It(this,"attachMaxDurationBeforeStart",void 0),It(this,"startEvent",void 0),It(this,"stopEvent",void 0),It(this,"attachedEvent",void 0),It(this,"compressed",void 0),It(this,"compressedData",void 0),this.eventId=e,this.eventDate=Date.now(),this.eventData={},this.startStopEvent=!1,this.startEventId=0,this.stopEventId=0,this.triggerStartEventId=0,this.keepLastOnly=!1,this.attachEventId=0,this.attachMaxDurationBeforeStart=-1,this.startEvent=null,this.stopEvent=null,this.attachedEvent=null,this.addDataSizeInTimeline=!1,this.compressed=!1,this.compressedData=void 0,this.updateMetadata()}var e,r,i;return e=t,r=[{key:"updateMetadata",value:function(){switch(this.startStopEvent=!1,this.startEventId=Nt.None,this.stopEventId=Nt.None,this.triggerStartEventId=Nt.None,this.keepLastOnly=!1,this.attachEventId=Nt.None,this.attachMaxDurationBeforeStart=-1,this.eventId){case Nt.None:break;case Nt.Start:this.startStopEvent=!0,this.startEventId=Nt.Start,this.stopEventId=Nt.Stop,this.addDataSizeInTimeline=!0;break;case Nt.Stop:this.startStopEvent=!0,this.startEventId=Nt.Start,this.stopEventId=Nt.Stop;break;case Nt.RedirectionEnd:this.startStopEvent=!1,this.attachEventId=Nt.Start;break;case Nt.FirstImage:this.startStopEvent=!1,this.keepLastOnly=!0,this.attachEventId=Nt.RedirectionEnd;break;case Nt.Pause:case Nt.Resume:this.startStopEvent=!0,this.startEventId=Nt.Pause,this.stopEventId=Nt.Resume;break;case Nt.StallStart:this.startStopEvent=!0,this.startEventId=Nt.StallStart,this.stopEventId=Nt.StallStop;break;case Nt.StallStop:this.startStopEvent=!0,this.startEventId=Nt.StallStart,this.stopEventId=Nt.StallStop,this.triggerStartEventId=Nt.BufferingStart;break;case Nt.RebufferingStart:this.startStopEvent=!0,this.startEventId=Nt.RebufferingStart,this.stopEventId=Nt.RebufferingStop;break;case Nt.RebufferingStop:this.startStopEvent=!0,this.startEventId=Nt.RebufferingStart,this.stopEventId=Nt.RebufferingStop,this.triggerStartEventId=Nt.BufferingStart,this.attachEventId=Nt.Seek,this.attachMaxDurationBeforeStart=At.MAX_TIME_BETWEEN_SEEK_AND_REBUFFERING;break;case Nt.AdBreakStart:this.startStopEvent=!0,this.startEventId=Nt.AdBreakStart,this.stopEventId=Nt.AdBreakStop;break;case Nt.AdBreakStop:this.startStopEvent=!0,this.startEventId=Nt.AdBreakStart,this.stopEventId=Nt.AdBreakStop,this.attachEventId=Nt.Seek,this.attachMaxDurationBeforeStart=0;break;case Nt.BufferingStart:case Nt.Seek:case Nt.LayerSwitch:case Nt.NetworkAvailable:case Nt.NetworkLost:this.startStopEvent=!1;break;case Nt.Mute:case Nt.Unmute:case Nt.Multicast:case Nt.Unicast:this.startStopEvent=!1,this.addDataSizeInTimeline=!0}}},{key:"getEventName",value:function(){switch(this.eventId){case Nt.None:return"None";case Nt.Start:return"Start";case Nt.Stop:return"Stop";case Nt.RedirectionEnd:return"RedirectionEnd";case Nt.FirstImage:return"FirstImage";case Nt.Pause:return"Pause";case Nt.Resume:return"Resume";case Nt.BufferingStart:return"BufferingStart";case Nt.StallStart:return"StallStart";case Nt.StallStop:return"StallStop";case Nt.RebufferingStart:return"RebufferingStart";case Nt.RebufferingStop:return"RebufferingStop";case Nt.Seek:return"Seek";case Nt.LayerSwitch:return"LayerSwitch";case Nt.AdBreakStart:return"AdBreakStart";case Nt.AdBreakStop:return"AdBreakStop";case Nt.NetworkAvailable:return"NetworkAvailable";case Nt.NetworkLost:return"NetworkLost";case Nt.Mute:return"Mute";case Nt.Unmute:return"Unmute";case Nt.Multicast:return"Multicast";case Nt.Unicast:return"Unicast"}return""}},{key:"isStartEvent",value:function(){return this.startStopEvent&&this.eventId===this.startEventId}},{key:"isStopEvent",value:function(){return this.startStopEvent&&this.eventId===this.stopEventId}},{key:"addEventData",value:function(t,e){"string"==typeof t&&(this.eventData[t]=e)}},{key:"toData",value:function(t){for(var e=Math.abs(this.eventDate-t)/100,r=lt.Z.floor(e/65535),n=e%65535,i=Object.keys(this.eventData).length,a=3*r+1+2+2*i+(this.addDataSizeInTimeline?1:0),o=new dt(a),s=0;s<r;s++)o.put(Nt.None),o.put(255),o.put(255);switch(o.put(this.eventId),o.putChar(n),this.addDataSizeInTimeline&&o.put(2*i),this.eventId){case Nt.Start:var u=parseInt(this.eventData.networkType,10),l=parseInt(this.eventData.muteState,10);o.putChar(u),o.putChar(l);break;case Nt.Stop:var c=parseInt(this.eventData.statusCode,10);o.putChar(c);break;case Nt.FirstImage:var h=parseInt(this.eventData.bitrate,10),f=parseInt(this.eventData.position,10);o.putChar(h),o.putChar(f);break;case Nt.Seek:var d=parseInt(this.eventData.positionStart,10),v=parseInt(this.eventData.positionEnd,10);o.putChar(d),o.putChar(v);break;case Nt.LayerSwitch:var p=parseInt(this.eventData.bitrate,10);o.putChar(p);break;case Nt.AdBreakStop:var y=parseInt(this.eventData.progress,10);o.putChar(y);break;case Nt.NetworkAvailable:var g=parseInt(this.eventData.state,10);o.putChar(g)}return o}},{key:"formatDate",value:function(t){return vt.Z.formatDate(new Date(t))}},{key:"print",value:function(){for(var t in n.o.v(Ut,"   |"),n.o.v(Ut,"   ├--\x3e "+this.getEventName()+" -> "+(!0===this.compressed?"compressed":"not compressed")+" -> "+this.eventDate),n.o.v(Ut,"   |      date: "+this.formatDate(this.eventDate)),this.eventData)n.o.v(Ut,"   |      "+t+": "+this.eventData[t]);this.isStartEvent()&&null!==this.stopEvent&&n.o.v(Ut,"   |      stop event: "+this.stopEvent.getEventName()+" "+this.stopEvent.eventDate),this.isStopEvent()&&null!==this.startEvent&&n.o.v(Ut,"   |      start event: "+this.startEvent.getEventName()+" "+this.startEvent.eventDate),null!==this.attachedEvent&&n.o.v(Ut,"   |      attached event: "+this.attachedEvent.getEventName()+" "+this.attachedEvent.eventDate)}},{key:"toString",value:function(){return this.getEventName()+" ("+this.formatDate(this.eventDate)+")"}}],r&&Tt(e.prototype,r),i&&Tt(e,i),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Vt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Wt(n.key),n)}}function Zt(t,e,r){return(e=Wt(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Wt(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}var Ht=function(){function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),Zt(this,"timeline",void 0),Zt(this,"minIndex",void 0),Zt(this,"initialBitrate",void 0),Zt(this,"builder",void 0),Zt(this,"summaryDuration",void 0),Zt(this,"pauseDuration",void 0),Zt(this,"nbNetworkDisconnected",void 0),Zt(this,"nbNetworkWifi",void 0),Zt(this,"nbNetworkMobile",void 0),Zt(this,"nbNetworkEthernet",void 0),Zt(this,"lastNetworkState",void 0),Zt(this,"muteDuration",void 0),Zt(this,"lastMuteState",void 0),this.timeline=e,this.minIndex=r,this.initialBitrate=void 0,this.builder=void 0,this.summaryDuration=0,this.pauseDuration=0,this.nbNetworkDisconnected=0,this.nbNetworkWifi=0,this.nbNetworkMobile=0,this.nbNetworkEthernet=0,this.lastNetworkState=void 0,this.muteDuration=0,this.lastMuteState=void 0,this.init()}var e,r,n;return e=t,(r=[{key:"init",value:function(){for(var t=this.minIndex;t>=0;t--){var e=this.timeline.events[t];switch(e.eventId){case Nt.LayerSwitch:case Nt.FirstImage:void 0===this.initialBitrate&&(this.initialBitrate=parseInt(e.eventData.bitrate,10));break;case Nt.Start:void 0===this.lastNetworkState&&(this.lastNetworkState=parseInt(e.eventData.networkType,10)),void 0===this.lastMuteState&&(this.lastMuteState=parseInt(e.eventData.muteState,10));break;case Nt.NetworkAvailable:void 0===this.lastNetworkState&&(this.lastNetworkState=parseInt(e.eventData.state,10));break;case Nt.NetworkLost:void 0===this.lastNetworkState&&(this.lastNetworkState=0);break;case Nt.Mute:void 0===this.lastMuteState&&(this.lastMuteState=1);break;case Nt.Unmute:void 0===this.lastMuteState&&(this.lastMuteState=0)}}void 0!==this.initialBitrate&&0!==this.initialBitrate||(this.initialBitrate=-1),void 0===this.lastNetworkState&&(this.lastNetworkState=1),void 0===this.lastMuteState&&(this.lastMuteState=0)}},{key:"update",value:function(t){if(!(this.minIndex>=this.timeline.events.length||t>=this.timeline.events.length)){var e,r,n,i=this.timeline.events[this.minIndex],a=this.timeline.events[t],o=this.initialBitrate,s=i.eventDate,u=1===this.lastMuteState?i.eventDate:-1;this.builder=new kt,this.summaryDuration=a.eventDate-i.eventDate,this.pauseDuration=0,this.nbNetworkDisconnected=0,this.nbNetworkWifi=0,this.nbNetworkMobile=0,this.nbNetworkEthernet=0,this.muteDuration=0;for(var l=this.minIndex;l<=t;l++){var c=this.timeline.events[l];switch(c.eventId){case Nt.Pause:!1!==e&&void 0!==e||(null!==c.stopEvent&&c.stopEvent.eventDate<=a.eventDate&&(this.pauseDuration+=c.stopEvent.eventDate-c.eventDate),e=!0);break;case Nt.Resume:void 0===e&&(this.pauseDuration+=c.eventDate-i.eventDate),e=!1;break;case Nt.StallStart:!1!==r&&void 0!==r||(null!==c.stopEvent&&c.stopEvent.eventDate<=a.eventDate&&this.builder.addStall(c.stopEvent.eventDate-c.eventDate),r=!0);break;case Nt.StallStop:void 0===r&&this.builder.addStall(c.eventDate-i.eventDate),r=!1;break;case Nt.RebufferingStart:!1!==n&&void 0!==n||(null!==c.stopEvent&&c.stopEvent.eventDate<=a.eventDate&&this.builder.addRebuffering(c.stopEvent.eventDate-c.eventDate),n=!0);break;case Nt.RebufferingStop:void 0===n&&this.builder.addRebuffering(c.eventDate-i.eventDate),n=!1;break;case Nt.LayerSwitch:this.builder.addLayerSwitch(),-1!==o&&this.builder.addTimeSpentPerLayer(o,c.eventDate-s),o=parseInt(c.eventData.bitrate,10),s=c.eventDate;break;case Nt.NetworkAvailable:this.lastNetworkState=parseInt(c.eventData.state,10),this.lastNetworkState>=10&&this.lastNetworkState<20?this.nbNetworkWifi++:this.lastNetworkState>=20&&this.lastNetworkState<30?this.nbNetworkMobile++:this.lastNetworkState>=30&&this.lastNetworkState<40&&this.nbNetworkEthernet++;break;case Nt.NetworkLost:this.lastNetworkState=0,this.nbNetworkDisconnected++;break;case Nt.Mute:this.lastMuteState=1,u=c.eventDate;break;case Nt.Unmute:this.lastMuteState=0,-1!==u&&(this.muteDuration+=c.eventDate-u,u=-1)}}-1!==o&&this.builder.addTimeSpentPerLayer(o,a.eventDate-s),-1!==u&&(this.muteDuration+=a.eventDate-u),this.builder.build()}}},{key:"data",value:function(){if(void 0===this.builder)return dt.EMPTY;var e=new dt(t.BUFFER_SIZE),r=this.builder.metrics;return e.put(Nt.DataSummary).putChar(Math.round(this.summaryDuration/1e3)).put(t.BUFFER_SIZE-2-1-1).putChar(this.pauseDuration/100).put(r.stallsNumber).putChar(r.totalStallsDuration/100).put(r.rebufferingsNumber).putChar(r.totalRebufferingDuration/100).put(r.layerSwitchesNumber).putChar(r.minBitrate).putChar(r.maxBitrate).putChar(r.averageBitrate).put(this.nbNetworkDisconnected).put(this.nbNetworkWifi).put(this.nbNetworkMobile).put(this.nbNetworkEthernet).putChar(this.lastNetworkState).putChar(Math.round(this.muteDuration/1e3)).put(this.lastMuteState),e}},{key:"toString",value:function(){if(void 0===this.builder)return"no data";var t=this.builder.metrics;return this.summaryDuration+", "+this.pauseDuration+", "+t.minBitrate+", "+t.maxBitrate+", "+t.layerSwitchesNumber+", "+t.averageBitrate+", "+t.stallsNumber+", "+t.totalStallsDuration+", "+t.rebufferingsNumber+", "+t.totalRebufferingDuration+", "+this.nbNetworkDisconnected+", "+this.nbNetworkWifi+", "+this.nbNetworkMobile+", "+this.nbNetworkEthernet+", "+this.lastNetworkState+", "+this.muteDuration+", "+this.lastMuteState}}])&&Vt(e.prototype,r),n&&Vt(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Kt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Yt(n.key),n)}}function zt(t,e,r){return(e=Yt(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Yt(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}Zt(Ht,"BUFFER_SIZE",28);var Jt="BpkSessionTrackerEncoder",Qt=function(){function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.DEFAULT_BUFFER_SIZE,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.DEFAULT_END_EVENTS_DURATION,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.DEFAULT_END_EVENTS_NUMBER;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),zt(this,"timeline",void 0),zt(this,"maxBufferSize",void 0),zt(this,"maxEndEventsDuration",void 0),zt(this,"maxEndEventsNumber",void 0),zt(this,"events",void 0),zt(this,"uncompressedData",void 0),zt(this,"uncompressedDataFull",void 0),zt(this,"compressedStartData",void 0),zt(this,"minSummaryIndex",void 0),zt(this,"maxEndBufferSize",void 0),zt(this,"summary",void 0),this.maxBufferSize=r,this.maxEndEventsDuration=n,this.maxEndEventsNumber=i,this.timeline=e,this.events=this.timeline.events,this.uncompressedData=new dt(this.maxBufferSize),this.uncompressedDataFull=!1,this.compressedStartData=void 0,this.minSummaryIndex=0,this.maxEndBufferSize=this.maxBufferSize,this.summary=void 0}var e,r,i;return e=t,(r=[{key:"onEventAdded",value:function(t){if(!this.uncompressedDataFull){var e=t;this.events.length>=2&&(e=this.events[this.events.length-2]),t.compressedData=t.toData(e.eventDate),t.compressed=!0,t.compressedData.capacity()<=this.uncompressedData.remaining()?this.uncompressedData.putByteBuffer(t.compressedData):(this.uncompressedDataFull=!0,this.compressedStartData=new dt(this.maxBufferSize))}}},{key:"onEventUpdated",value:function(){this.uncompressedData=new dt(this.maxBufferSize);for(var t=0;t<this.events.length;t++)void 0!==this.events[t].compressedData&&this.uncompressedData.putByteBuffer(this.events[t].compressedData)}},{key:"process",value:function(){var t=Date.now();if(!this.uncompressedDataFull)return n.o.d(Jt,"Timeline encoder generated uncompressed data ("+this.events.length+" events, "+this.uncompressedData.length()+" bytes)"),this.uncompressedData;for(var e,r="",i=[],a=0,o=this.events.length-1;o>=0;o--){var s=this.events[o];if(!(t-s.eventDate<this.maxEndEventsDuration&&i.length<this.maxEndEventsNumber)){e=o;break}var u=void 0;if(o<this.events.length-1){var l=this.events[o+1];u=s.toData(l.eventDate)}else u=s.toData(s.eventDate);if(!(a+u.length()<=this.maxEndBufferSize)){e=o;break}i.push(u),a+=u.length()}if(0===this.compressedStartData.length()){this.minSummaryIndex=e;for(var c=this.maxBufferSize-Ht.BUFFER_SIZE-a,h=0;h<e;h++){var f=this.events[h];if(this.compressedStartData.length()+f.compressedData.length()>c){this.minSummaryIndex=h;break}this.compressedStartData.putByteBuffer(f.compressedData)}this.maxEndBufferSize=this.compressedStartData.remaining()-Ht.BUFFER_SIZE,this.uncompressedData=void 0,r+="first iteration, "}var d=new dt(this.maxBufferSize);if(d.putByteBuffer(this.compressedStartData,this.compressedStartData.length()),this.minSummaryIndex===e)d.put(Nt.EmptySummary),r+="no summary";else{void 0===this.summary&&(this.summary=new Ht(this.timeline,this.minSummaryIndex)),this.summary.update(e);var v=this.summary.data();d.putByteBuffer(v),r+="summary {"+this.summary.toString()+"}"}for(var p=0;p<i.length;p++)d.putByteBuffer(i[p]);return n.o.d(Jt,"Timeline encoder generated compressed data ("+this.events.length+" events before encoding, "+(this.minSummaryIndex+i.length)+" events after encoding, "+d.length()+" bytes, ~"+(Date.now()-t)+"ms, "+r+")"),d}},{key:"extend",value:function(){if(this.uncompressedDataFull)n.o.w(Jt,"Failed to extend size from "+t.DEFAULT_BUFFER_SIZE+" to 768");else{this.maxBufferSize=768,this.maxEndEventsDuration=4e4,this.maxEndEventsNumber=40;var e=this.uncompressedData;this.uncompressedData=new dt(this.maxBufferSize),this.uncompressedData.putByteBuffer(e,e.length()),n.o.v(Jt,"Extended size from "+t.DEFAULT_BUFFER_SIZE+" to 768")}}}])&&Kt(e.prototype,r),i&&Kt(e,i),Object.defineProperty(e,"prototype",{writable:!1}),t}();function qt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Xt(n.key),n)}}function Gt(t,e,r){return(e=Xt(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Xt(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}zt(Qt,"DEFAULT_BUFFER_SIZE",384),zt(Qt,"DEFAULT_END_EVENTS_DURATION",15e3),zt(Qt,"DEFAULT_END_EVENTS_NUMBER",20);var $t="BpkSessionTrackerTimeline",te=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),Gt(this,"session",void 0),Gt(this,"startDate",void 0),Gt(this,"stopDate",void 0),Gt(this,"events",void 0),Gt(this,"firstImageWithoutBitrateEvent",void 0),Gt(this,"encoder",void 0),this.startDate=null,this.stopDate=null,this.events=[],this.firstImageWithoutBitrateEvent=null,this.encoder=new Qt(this)}var e,r,i;return e=t,(r=[{key:"pushEvent",value:function(t){if(this.checkType(t,Ot)){var e=this.createEvent(t);this.encoder.onEventAdded(e)}}},{key:"pushEventStart",value:function(t,e,r){if(this.checkType(t,Mt)){var n=this.createEvent(t);n.addEventData("networkType",e),n.addEventData("muteState",r),this.encoder.onEventAdded(n)}}},{key:"pushEventBitrate",value:function(t,e){if(this.checkType(t,Bt)){var r=this.createEvent(t);r.addEventData("bitrate",e),null!==this.firstImageWithoutBitrateEvent&&(this.firstImageWithoutBitrateEvent.addEventData("bitrate",e),this.firstImageWithoutBitrateEvent=null),this.encoder.onEventAdded(r)}}},{key:"pushEventBitratePosition",value:function(t,e,r){if(this.checkType(t,xt)){var n=this.createEvent(t);n.addEventData("bitrate",e),n.addEventData("position",r),t===Nt.FirstImage&&e<=0&&(this.firstImageWithoutBitrateEvent=n),this.encoder.onEventAdded(n)}}},{key:"pushEventPositionStartEnd",value:function(t,e,r){if(this.checkType(t,Ct)){var n=this.createEvent(t);n.addEventData("positionStart",e),n.addEventData("positionEnd",r),this.encoder.onEventAdded(n)}}},{key:"pushEventStatusCode",value:function(t,e){if(this.checkType(t,Lt)){var r=this.createEvent(t);r.addEventData("statusCode",e),this.encoder.onEventAdded(r)}}},{key:"pushEventProgress",value:function(t,e){if(this.checkType(t,jt)){var r=this.createEvent(t);r.addEventData("progress",e),this.encoder.onEventAdded(r)}}},{key:"pushEventState",value:function(t,e){if(this.checkType(t,_t)){var r=this.createEvent(t);r.addEventData("state",e),this.encoder.onEventAdded(r)}}},{key:"createEvent",value:function(t){var e=new Ft(t);return n.o.v($t,"Creating event "+e.getEventName()+"..."),this.applyKeepLastOnly(e),this.events.push(e),this.updateTimelineProperties(e),this.reconciliateStopWithStartEvent(e),e}},{key:"checkType",value:function(t,e){return e.indexOf(t)>=0||(n.o.v($t,"Can't push event '"+t+"' to timeline, invalid parameters"),!1)}},{key:"applyKeepLastOnly",value:function(t){if(t.keepLastOnly)for(var e=this.events.length-1;e>=0;e--)if(this.events[e].eventId===t.eventId)return this.events.splice(e,1),void this.encoder.onEventUpdated()}},{key:"attachEvent",value:function(t){if(t.attachEventId>Nt.None){var e=-1;null!==t.startEvent&&-1!==t.attachMaxDurationBeforeStart&&(e=t.startEvent.eventDate-t.attachMaxDurationBeforeStart);for(var r=this.events.length-1;r>=0;r--){var n=this.events[r];if(n.eventId===t.attachEventId&&(-1===e||n.eventDate>=e))return void(t.attachedEvent=n)}}}},{key:"updateTimelineProperties",value:function(t){switch(t.eventId){case Nt.Start:this.startDate=Date.now();break;case Nt.Stop:this.stopDate=Date.now()}}},{key:"reconciliateStopWithStartEvent",value:function(t){if(t.isStopEvent())for(var e=this.events.length-1;e>=0;e--){var r=this.events[e];if(r.eventId===t.startEventId)return r.stopEvent=t,void(t.startEvent=r);if(r.eventId===t.triggerStartEventId)return r.eventId=t.startEventId,r.startStopEvent=!0,r.startEventId=t.startEventId,r.stopEventId=t.stopEventId,void 0!==r.compressedData&&(r.compressedData.set(r.eventId,0),this.encoder.onEventUpdated()),r.stopEvent=t,void(t.startEvent=r)}}},{key:"onStart",value:function(t,e){this.pushEventStart(Nt.Start,t,e)}},{key:"onRedirectionEnd",value:function(){this.pushEvent(Nt.RedirectionEnd)}},{key:"onFirstImage",value:function(t,e){this.pushEventBitratePosition(Nt.FirstImage,t,e)}},{key:"onStop",value:function(t){this.pushEventStatusCode(Nt.Stop,t)}},{key:"onForeground",value:function(){n.o.d($t,"Received event onForeground but ignored")}},{key:"onBackground",value:function(){n.o.d($t,"Received event onBackground but ignored")}},{key:"onNetworkAvailable",value:function(t){n.o.v($t,"Received event onNetworkAvailable type:"+t),this.pushEventState(Nt.NetworkAvailable,t)}},{key:"onNetworkLost",value:function(){n.o.d($t,"Received event onNetworkLost"),this.pushEvent(Nt.NetworkLost)}},{key:"onMute",value:function(){n.o.d($t,"Received event onMute"),this.pushEvent(Nt.Mute)}},{key:"onUnmute",value:function(){n.o.d($t,"Received event onUnmute"),this.pushEvent(Nt.Unmute)}},{key:"onMulticastUsed",value:function(){this.pushEvent(Nt.Multicast)}},{key:"onUnicastUsed",value:function(){this.pushEvent(Nt.Unicast)}},{key:"data",value:function(){return this.encoder.process()}},{key:"formatDate",value:function(t){return vt.Z.formatDate(new Date(t))}},{key:"print",value:function(){n.o.v($t,"Timeline (startDate:"+this.formatDate(this.startDate)+", stopDate:"+this.formatDate(this.stopDate)+")");for(var t=0;t<this.events.length;t++)this.events[t].print()}},{key:"toString",value:function(){for(var t=[],e=0;e<this.events.length;e++)t.push(this.events[e].toString());return t.join(", ")}}])&&qt(e.prototype,r),i&&qt(e,i),Object.defineProperty(e,"prototype",{writable:!1}),t}(),ee=r(242);function re(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ue(n.key),n)}}function ne(){return ne="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=se(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}},ne.apply(this,arguments)}function ie(t,e){return ie=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},ie(t,e)}function ae(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=se(t);if(e){var i=se(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"==typeof e||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return oe(t)}(this,r)}}function oe(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function se(t){return se=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},se(t)}function ue(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}var le="BpkAnalyticsSession",ce=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ie(t,e)}(o,t);var e,r,i,a=ae(o);function o(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),function(t,e,r){(e=ue(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}(oe(r=a.call(this,t,e)),"started",void 0),r.getURL=void 0,r.getQuery=void 0,r.startStreamingSession=void 0,r.stopAnalyticsSession=r.stopStreamingSession,r.stopStreamingSession=void 0,r.started=!1,r}return e=o,(r=[{key:"attachPlayer",value:function(t,e){ne(se(o.prototype),"attachPlayer",this).call(this,t,e),void 0===this.handler&&(this.handler=this.smartLib.sessionManager.createSessionHandler(this),this.handler.initPlayerAdapter(),this.handler.addListener(this))}},{key:"onLoading",value:function(){n.o.i(le,"Session is loading...",this.id),!1===this.started?(this.started=!0,this.handler.adSession=this.adSession,void 0!==this.adSession&&(this.adSession.handler=this.handler),this.handler.start("").catch((function(t){}))):n.o.d(le,"Exception: onLoading, the session is already running.",this.id)}},{key:"updateSessionReportValue",value:function(t){var e=this.handler.sessionReport;void 0!==this.customParameters["report."+t]&&(e[t]=this.customParameters["report."+t])}},{key:"onClose",value:function(t){n.o.i(le,"Session is closing (status code: "+t+")...",this.id),void 0!==this.handler.sessionReport.metrics&&(this.handler.sessionReport.metrics.redirectionTime=-1),this.updateSessionReportValue("requestedURL"),this.updateSessionReportValue("redirectedURL"),this.stopAnalyticsSession(t)}}])&&re(e.prototype,r),i&&re(e,i),Object.defineProperty(e,"prototype",{writable:!1}),o}(ee.u),he=(r(268),r(886),r(8077),r(7560));function fe(){return fe="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=ge(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}},fe.apply(this,arguments)}function de(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ve(t,e)}function ve(t,e){return ve=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},ve(t,e)}function pe(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=ge(t);if(e){var i=ge(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"==typeof e||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return ye(t)}(this,r)}}function ye(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ge(t){return ge=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},ge(t)}function me(t,e,r){return(e=Ae(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function be(t,e,r,n){return we(t,e),ke(r,"set"),function(t,e,r){if(e.set)e.set.call(t,r);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=r}}(t,r,n),n}function Se(t,e,r){return we(t,e),ke(r,"get"),function(t,e){if(e.get)return e.get.call(t);return e.value}(t,r)}function ke(t,e){if(void 0===t)throw new TypeError("attempted to "+e+" private static field before its declaration")}function we(t,e){if(t!==e)throw new TypeError("Private static access of wrong provenance")}function Ee(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function De(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Ae(n.key),n)}}function Pe(t,e,r){return e&&De(t.prototype,e),r&&De(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function Ae(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}var Te="BpkCacheMgr",Ie=function(){function t(){Ee(this,t)}return Pe(t,[{key:"set",value:function(t,e){}},{key:"get",value:function(t){}},{key:"delete",value:function(t){}},{key:"keys",value:function(){return[]}}]),t}(),Re=function(){function t(){Ee(this,t),me(this,"smartLib",void 0),me(this,"cacheHandler",void 0),this.cacheHandler=new Ie}return Pe(t,[{key:"init",value:function(t){this.cacheHandler=t}},{key:"attachInstance",value:function(t){var e=this;n.o.d(Te,"Init cache manager..."),this.smartLib=t,this.getCacheData("report-").forEach((function(t){void 0!==t&&(t.value.sending=!1,e.store(t.key,t.value))}))}},{key:"get",value:function(t){var e=this.cacheHandler.get(t);if(void 0!==e)try{return e.startsWith("{")||(e=lt.Z.base64ToString(e)),e=JSON.parse(e)}catch(e){return n.o.e(Te,"Error while parsing "+t+" ("+e.message+")"),void this.cacheHandler.delete(t)}}},{key:"store",value:function(t,e){this.cacheHandler.set(t,lt.Z.stringToBase64(JSON.stringify(e)))}},{key:"update",value:function(t,e,r){var i=this.get(t);void 0!==i&&(n.o.d(Te,"Updating "+t+", set "+e+" to "+r),i[e]=r,this.store(t,i))}},{key:"storeSessionReport",value:function(t,e){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Date.now(),a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o="report-"+lt.Z.randomIntFromInterval(1e6,9999999)+i;n.o.i(Te,"Storing "+o+" in cache...");var s={version:this.smartLib.getVersion(),date:i,sending:a,address:t,report:e};return this.store(o,s),!0===r&&this.clean(),o}},{key:"deleteSessionReport",value:function(t){n.o.i(Te,"Deleting "+t+" from cache..."),this.cacheHandler.delete(t)}},{key:"storeKeepaliveReport",value:function(t,e){n.o.i(Te,"Storing keepalive-"+e.session_id+" in cache...");var r={version:this.smartLib.getVersion(),date:Date.now(),address:t,report:e};this.store("keepalive-"+e.session_id,r)}},{key:"deleteKeepaliveReport",value:function(t){n.o.i(Te,"Deleting keepalive-"+t+" from cache..."),this.cacheHandler.delete("keepalive-"+t)}},{key:"getCacheData",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this.cacheHandler.keys().filter((function(t){return t.startsWith(e)})).map((function(e){var r=t.get(e);return void 0===r?void 0:{key:e,value:r}}))}},{key:"push",value:function(){var t=this;this.clean(),n.o.i(Te,"Sending cache content if any..."),this.getCacheData("report-").forEach((function(e){var r;void 0!==e&&(!0===e.value.sending?n.o.d(Te,"Sending cache "+e.key+" already in progress..."):(n.o.d(Te,"Sending cache "+e.key+"..."),e.value.sending=!0,e.value.report.delay=Math.round((Date.now()-e.value.date)/1e3),t.store(e.key,e.value),null===(r=X.Z.analyticsModule)||void 0===r||r.AnalyticsRequestManager.getInstance().endSessionCache(e.value.address,e.value.report,t.smartLib.getParameters()).then((function(r){!0===r?t.deleteSessionReport(e.key):(e.value.sending=!1,t.store(e.key,e.value))}))))}))}},{key:"cleanExpiredData",value:function(e){var r=this;return this.getCacheData(e).map((function(e){return void 0!==e&&(void 0===e.value.date||Date.now()-e.value.date>t.CACHE_DURATION)?(n.o.d(Te,"Cleaning "+e.key+" (cache duration reached)..."),void r.cacheHandler.delete(e.key)):e})).filter((function(t){return void 0!==t})).sort((function(t,e){return e.value.date-t.value.date}))}},{key:"clean",value:function(){var e=this;n.o.i(Te,"Clean expired data if any...");var r=this.cleanExpiredData("keepalive-"),i=this.smartLib.sessionManager.sessions.map((function(t){var e;return null===(e=t.handler)||void 0===e||null===(e=e.sessionReport)||void 0===e?void 0:e.sessionId}));r.forEach((function(t){-1===i.indexOf(t.value.report.session_id)&&(n.o.d(Te,"Migrating keepalive "+t.value.report.session_id+" to session..."),t.value.report.timeout=!0,t.value.address.split(",").forEach((function(r){0===r.indexOf(st.NOCACHE_PREFIX)?n.o.d(Te,st.NOCACHE_PREFIX+" option used, no need to store the report in cache"):e.storeSessionReport(st.getInstance().buildAnalyticsAddress(r),t.value.report,!1,t.value.date)})),e.cacheHandler.delete(t.key))}));var a=this.cleanExpiredData("report-");if(a.length>=t.CACHE_LIMIT)for(var o=t.CACHE_LIMIT;o<a.length;o++)this.deleteSessionReport(a[o].key)}},{key:"release",value:function(){this.clean()}}],[{key:"getInstance",value:function(){return Se(t,t,Ne)||be(t,t,Ne,new t),Se(t,t,Ne)}}]),t}();me(Re,"CACHE_DURATION",1728e5),me(Re,"CACHE_LIMIT",20);var Ne={writable:!0,value:void 0},Oe=function(t){de(r,t);var e=pe(r);function r(t){var i;return Ee(this,r),me(ye(i=e.call(this,t)),"analyticsAddress",void 0),i.analyticsAddress=i.handler.smartLib.getParameters().analyticsAddress,n.o.d(Te,"Using cache keepalive manager...",i.handler.id),i}return Pe(r,[{key:"start",value:function(){fe(ge(r.prototype),"start",this).call(this),this.store()}},{key:"callback",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.store(),!0===e&&this.next()}},{key:"stop",value:function(){fe(ge(r.prototype),"stop",this).call(this),this.delete()}},{key:"store",value:function(){var t;null===(t=X.Z.analyticsModule)||void 0===t||t.CacheManager.getInstance().storeKeepaliveReport(this.analyticsAddress,this.handler.sessionReport.toEndSessionJSON())}},{key:"delete",value:function(){var t;null===(t=X.Z.analyticsModule)||void 0===t||t.CacheManager.getInstance().deleteKeepaliveReport(this.handler.sessionReport.sessionId)}}]),r}(he.i),Me=function(t){de(r,t);var e=pe(r);function r(t){var n;return Ee(this,r),me(ye(n=e.call(this,t)),"cacheKeepaliveManager",void 0),n.cacheKeepaliveManager=new Oe(t),n.cacheKeepaliveManager.next=function(){},n}return Pe(r,[{key:"start",value:function(){fe(ge(r.prototype),"start",this).call(this),this.cacheKeepaliveManager.store()}},{key:"callback",value:function(t){this.cacheKeepaliveManager.callback(t),fe(ge(r.prototype),"callback",this).call(this,t)}},{key:"stop",value:function(){fe(ge(r.prototype),"stop",this).call(this),this.cacheKeepaliveManager.delete()}}]),r}(he.y);X.Z.analyticsModule={PlayerManager:K,PlayerAdapter:l,GenericPlayerAdapter:b,PlayerEventListener:A,GenericPlayerApi:q,AnalyticsRequestManager:st,SessionTrackerTimeline:te,SessionTrackerEvent:Ft,SessionTrackerEvents:Nt,Metrics:St,MetricsManager:At,AnalyticsSession:ce,CacheManager:Re,CacheKeepaliveManager:Oe,BroadpeakCDNCacheKeepaliveManager:Me}},7301:function(t,e,r){r.d(e,{Z:function(){return i}});r(228),r(7522),r(9373),r(9903),r(9749),r(6544),r(9288);function n(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,a=void 0,"symbol"==typeof(a=function(t,e){if("object"!=typeof t||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"))?a:String(a)),n)}var i,a}var i=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,r,i;return e=t,i=[{key:"hasMethods",value:function(t,e){var r=!0;return void 0!==t&&(e.forEach((function(e){"function"!=typeof t[e]&&(r=!1)})),r)}},{key:"count",value:function(t,e){var r=0;for(var n in t)!0===e(n,t[n])&&r++;return r}}],(r=null)&&n(e.prototype,r),i&&n(e,i),Object.defineProperty(e,"prototype",{writable:!1}),t}()},7075:function(t){t.exports="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView},4872:function(t,e,r){var n,i,a,o=r(7075),s=r(7697),u=r(9037),l=r(9985),c=r(8999),h=r(6812),f=r(926),d=r(3691),v=r(5773),p=r(1880),y=r(2148),g=r(3622),m=r(1868),b=r(9385),S=r(4201),k=r(4630),w=r(618),E=w.enforce,D=w.get,P=u.Int8Array,A=P&&P.prototype,T=u.Uint8ClampedArray,I=T&&T.prototype,R=P&&m(P),N=A&&m(A),O=Object.prototype,M=u.TypeError,B=S("toStringTag"),x=k("TYPED_ARRAY_TAG"),C="TypedArrayConstructor",L=o&&!!b&&"Opera"!==f(u.opera),j=!1,_={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},U={BigInt64Array:8,BigUint64Array:8},F=function(t){var e=m(t);if(c(e)){var r=D(e);return r&&h(r,C)?r[C]:F(e)}},V=function(t){if(!c(t))return!1;var e=f(t);return h(_,e)||h(U,e)};for(n in _)(a=(i=u[n])&&i.prototype)?E(a)[C]=i:L=!1;for(n in U)(a=(i=u[n])&&i.prototype)&&(E(a)[C]=i);if((!L||!l(R)||R===Function.prototype)&&(R=function(){throw new M("Incorrect invocation")},L))for(n in _)u[n]&&b(u[n],R);if((!L||!N||N===O)&&(N=R.prototype,L))for(n in _)u[n]&&b(u[n].prototype,N);if(L&&m(I)!==N&&b(I,N),s&&!h(N,B))for(n in j=!0,y(N,B,{configurable:!0,get:function(){return c(this)?this[x]:void 0}}),_)u[n]&&v(u[n],x,n);t.exports={NATIVE_ARRAY_BUFFER_VIEWS:L,TYPED_ARRAY_TAG:j&&x,aTypedArray:function(t){if(V(t))return t;throw new M("Target is not a typed array")},aTypedArrayConstructor:function(t){if(l(t)&&(!b||g(R,t)))return t;throw new M(d(t)+" is not a typed array constructor")},exportTypedArrayMethod:function(t,e,r,n){if(s){if(r)for(var i in _){var a=u[i];if(a&&h(a.prototype,t))try{delete a.prototype[t]}catch(r){try{a.prototype[t]=e}catch(t){}}}N[t]&&!r||p(N,t,r?e:L&&A[t]||e,n)}},exportTypedArrayStaticMethod:function(t,e,r){var n,i;if(s){if(b){if(r)for(n in _)if((i=u[n])&&h(i,t))try{delete i[t]}catch(t){}if(R[t]&&!r)return;try{return p(R,t,r?e:L&&R[t]||e)}catch(t){}}for(n in _)!(i=u[n])||i[t]&&!r||p(i,t,e)}},getTypedArrayConstructor:F,isView:function(t){if(!c(t))return!1;var e=f(t);return"DataView"===e||h(_,e)||h(U,e)},isTypedArray:V,TypedArray:R,TypedArrayPrototype:N}},3999:function(t,e,r){var n=r(9037),i=r(8844),a=r(7697),o=r(7075),s=r(1236),u=r(5773),l=r(2148),c=r(6045),h=r(3689),f=r(767),d=r(8700),v=r(3126),p=r(9842),y=r(7788),g=r(9048),m=r(1868),b=r(9385),S=r(2741).f,k=r(2872),w=r(9015),E=r(5997),D=r(618),P=s.PROPER,A=s.CONFIGURABLE,T="ArrayBuffer",I="DataView",R="prototype",N="Wrong index",O=D.getterFor(T),M=D.getterFor(I),B=D.set,x=n[T],C=x,L=C&&C[R],j=n[I],_=j&&j[R],U=Object.prototype,F=n.Array,V=n.RangeError,Z=i(k),W=i([].reverse),H=g.pack,K=g.unpack,z=function(t){return[255&t]},Y=function(t){return[255&t,t>>8&255]},J=function(t){return[255&t,t>>8&255,t>>16&255,t>>24&255]},Q=function(t){return t[3]<<24|t[2]<<16|t[1]<<8|t[0]},q=function(t){return H(y(t),23,4)},G=function(t){return H(t,52,8)},X=function(t,e,r){l(t[R],e,{configurable:!0,get:function(){return r(this)[e]}})},$=function(t,e,r,n){var i=M(t),a=p(r),o=!!n;if(a+e>i.byteLength)throw new V(N);var s=i.bytes,u=a+i.byteOffset,l=w(s,u,u+e);return o?l:W(l)},tt=function(t,e,r,n,i,a){var o=M(t),s=p(r),u=n(+i),l=!!a;if(s+e>o.byteLength)throw new V(N);for(var c=o.bytes,h=s+o.byteOffset,f=0;f<e;f++)c[h+f]=u[l?f:e-f-1]};if(o){var et=P&&x.name!==T;if(h((function(){x(1)}))&&h((function(){new x(-1)}))&&!h((function(){return new x,new x(1.5),new x(NaN),1!==x.length||et&&!A})))et&&A&&u(x,"name",T);else{(C=function(t){return f(this,L),new x(p(t))})[R]=L;for(var rt,nt=S(x),it=0;nt.length>it;)(rt=nt[it++])in C||u(C,rt,x[rt]);L.constructor=C}b&&m(_)!==U&&b(_,U);var at=new j(new C(2)),ot=i(_.setInt8);at.setInt8(0,2147483648),at.setInt8(1,2147483649),!at.getInt8(0)&&at.getInt8(1)||c(_,{setInt8:function(t,e){ot(this,t,e<<24>>24)},setUint8:function(t,e){ot(this,t,e<<24>>24)}},{unsafe:!0})}else L=(C=function(t){f(this,L);var e=p(t);B(this,{type:T,bytes:Z(F(e),0),byteLength:e}),a||(this.byteLength=e,this.detached=!1)})[R],_=(j=function(t,e,r){f(this,_),f(t,L);var n=O(t),i=n.byteLength,o=d(e);if(o<0||o>i)throw new V("Wrong offset");if(o+(r=void 0===r?i-o:v(r))>i)throw new V("Wrong length");B(this,{type:I,buffer:t,byteLength:r,byteOffset:o,bytes:n.bytes}),a||(this.buffer=t,this.byteLength=r,this.byteOffset=o)})[R],a&&(X(C,"byteLength",O),X(j,"buffer",M),X(j,"byteLength",M),X(j,"byteOffset",M)),c(_,{getInt8:function(t){return $(this,1,t)[0]<<24>>24},getUint8:function(t){return $(this,1,t)[0]},getInt16:function(t){var e=$(this,2,t,arguments.length>1&&arguments[1]);return(e[1]<<8|e[0])<<16>>16},getUint16:function(t){var e=$(this,2,t,arguments.length>1&&arguments[1]);return e[1]<<8|e[0]},getInt32:function(t){return Q($(this,4,t,arguments.length>1&&arguments[1]))},getUint32:function(t){return Q($(this,4,t,arguments.length>1&&arguments[1]))>>>0},getFloat32:function(t){return K($(this,4,t,arguments.length>1&&arguments[1]),23)},getFloat64:function(t){return K($(this,8,t,arguments.length>1&&arguments[1]),52)},setInt8:function(t,e){tt(this,1,t,z,e)},setUint8:function(t,e){tt(this,1,t,z,e)},setInt16:function(t,e){tt(this,2,t,Y,e,arguments.length>2&&arguments[2])},setUint16:function(t,e){tt(this,2,t,Y,e,arguments.length>2&&arguments[2])},setInt32:function(t,e){tt(this,4,t,J,e,arguments.length>2&&arguments[2])},setUint32:function(t,e){tt(this,4,t,J,e,arguments.length>2&&arguments[2])},setFloat32:function(t,e){tt(this,4,t,q,e,arguments.length>2&&arguments[2])},setFloat64:function(t,e){tt(this,8,t,G,e,arguments.length>2&&arguments[2])}});E(C,T),E(j,I),t.exports={ArrayBuffer:C,DataView:j}},357:function(t,e,r){var n=r(690),i=r(7578),a=r(6310),o=r(8494),s=Math.min;t.exports=[].copyWithin||function(t,e){var r=n(this),u=a(r),l=i(t,u),c=i(e,u),h=arguments.length>2?arguments[2]:void 0,f=s((void 0===h?u:i(h,u))-c,u-l),d=1;for(c<l&&l<c+f&&(d=-1,c+=f-1,l+=f-1);f-- >0;)c in r?r[l]=r[c]:o(r,l),l+=d,c+=d;return r}},2872:function(t,e,r){var n=r(690),i=r(7578),a=r(6310);t.exports=function(t){for(var e=n(this),r=a(e),o=arguments.length,s=i(o>1?arguments[1]:void 0,r),u=o>2?arguments[2]:void 0,l=void 0===u?r:i(u,r);l>s;)e[s++]=t;return e}},9976:function(t,e,r){var n=r(6310);t.exports=function(t,e,r){for(var i=0,a=arguments.length>2?r:n(e),o=new t(a);a>i;)o[i]=e[i++];return o}},1969:function(t,e,r){var n=r(4071),i=r(4413),a=r(690),o=r(6310),s=function(t){var e=1===t;return function(r,s,u){for(var l,c=a(r),h=i(c),f=o(h),d=n(s,u);f-- >0;)if(d(l=h[f],f,c))switch(t){case 0:return l;case 1:return f}return e?-1:void 0}};t.exports={findLast:s(0),findLastIndex:s(1)}},953:function(t,e,r){var n=r(1735),i=r(5290),a=r(8700),o=r(6310),s=r(6834),u=Math.min,l=[].lastIndexOf,c=!!l&&1/[1].lastIndexOf(1,-0)<0,h=s("lastIndexOf"),f=c||!h;t.exports=f?function(t){if(c)return n(l,this,arguments)||0;var e=i(this),r=o(e),s=r-1;for(arguments.length>1&&(s=u(s,a(arguments[1]))),s<0&&(s=r+s);s>=0;s--)if(s in e&&e[s]===t)return s||0;return-1}:l},8820:function(t,e,r){var n=r(509),i=r(690),a=r(4413),o=r(6310),s=TypeError,u=function(t){return function(e,r,u,l){var c=i(e),h=a(c),f=o(c);n(r);var d=t?f-1:0,v=t?-1:1;if(u<2)for(;;){if(d in h){l=h[d],d+=v;break}if(d+=v,t?d<0:f<=d)throw new s("Reduce of empty array with no initial value")}for(;t?d>=0:f>d;d+=v)d in h&&(l=r(l,h[d],d,c));return l}};t.exports={left:u(!1),right:u(!0)}},9048:function(t){var e=Array,r=Math.abs,n=Math.pow,i=Math.floor,a=Math.log,o=Math.LN2;t.exports={pack:function(t,s,u){var l,c,h,f=e(u),d=8*u-s-1,v=(1<<d)-1,p=v>>1,y=23===s?n(2,-24)-n(2,-77):0,g=t<0||0===t&&1/t<0?1:0,m=0;for((t=r(t))!=t||t===1/0?(c=t!=t?1:0,l=v):(l=i(a(t)/o),t*(h=n(2,-l))<1&&(l--,h*=2),(t+=l+p>=1?y/h:y*n(2,1-p))*h>=2&&(l++,h/=2),l+p>=v?(c=0,l=v):l+p>=1?(c=(t*h-1)*n(2,s),l+=p):(c=t*n(2,p-1)*n(2,s),l=0));s>=8;)f[m++]=255&c,c/=256,s-=8;for(l=l<<s|c,d+=s;d>0;)f[m++]=255&l,l/=256,d-=8;return f[--m]|=128*g,f},unpack:function(t,e){var r,i=t.length,a=8*i-e-1,o=(1<<a)-1,s=o>>1,u=a-7,l=i-1,c=t[l--],h=127&c;for(c>>=7;u>0;)h=256*h+t[l--],u-=8;for(r=h&(1<<-u)-1,h>>=-u,u+=e;u>0;)r=256*r+t[l--],u-=8;if(0===h)h=1-s;else{if(h===o)return r?NaN:c?-1/0:1/0;r+=n(2,e),h-=s}return(c?-1:1)*r*n(2,h-e)}}},9401:function(t,e,r){var n=r(926);t.exports=function(t){var e=n(t);return"BigInt64Array"===e||"BigUint64Array"===e}},6251:function(t,e,r){var n=r(6812);t.exports=function(t){return void 0!==t&&(n(t,"value")||n(t,"writable"))}},1973:function(t,e,r){var n=r(8999),i=Math.floor;t.exports=Number.isInteger||function(t){return!n(t)&&isFinite(t)&&i(t)===t}},134:function(t,e,r){var n=r(5680),i=Math.abs,a=2220446049250313e-31,o=1/a;t.exports=function(t,e,r,s){var u=+t,l=i(u),c=n(u);if(l<s)return c*function(t){return t+o-o}(l/s/e)*s*e;var h=(1+e/a)*l,f=h-(h-l);return f>r||f!=f?c*(1/0):c*f}},7788:function(t,e,r){var n=r(134);t.exports=Math.fround||function(t){return n(t,1.1920928955078125e-7,34028234663852886e22,11754943508222875e-54)}},5680:function(t){t.exports=Math.sign||function(t){var e=+t;return 0===e||e!=e?e:e<0?-1:1}},1530:function(t,e,r){var n=r(8732),i=TypeError;t.exports=function(t){var e=n(t,"number");if("number"==typeof e)throw new i("Can't convert number to bigint");return BigInt(e)}},9842:function(t,e,r){var n=r(8700),i=r(3126),a=RangeError;t.exports=function(t){if(void 0===t)return 0;var e=n(t),r=i(e);if(e!==r)throw new a("Wrong length or index");return r}},3250:function(t,e,r){var n=r(5904),i=RangeError;t.exports=function(t,e){var r=n(t);if(r%e)throw new i("Wrong offset");return r}},5904:function(t,e,r){var n=r(8700),i=RangeError;t.exports=function(t){var e=n(t);if(e<0)throw new i("The argument can't be less than 0");return e}},7191:function(t){var e=Math.round;t.exports=function(t){var r=e(t);return r<0?0:r>255?255:255&r}},1158:function(t,e,r){var n=r(9989),i=r(9037),a=r(2615),o=r(7697),s=r(9800),u=r(4872),l=r(3999),c=r(767),h=r(5684),f=r(5773),d=r(1973),v=r(3126),p=r(9842),y=r(3250),g=r(7191),m=r(8360),b=r(6812),S=r(926),k=r(8999),w=r(734),E=r(5391),D=r(3622),P=r(9385),A=r(2741).f,T=r(1304),I=r(2960).forEach,R=r(4241),N=r(2148),O=r(2560),M=r(2474),B=r(618),x=r(3457),C=B.get,L=B.set,j=B.enforce,_=O.f,U=M.f,F=i.RangeError,V=l.ArrayBuffer,Z=V.prototype,W=l.DataView,H=u.NATIVE_ARRAY_BUFFER_VIEWS,K=u.TYPED_ARRAY_TAG,z=u.TypedArray,Y=u.TypedArrayPrototype,J=u.aTypedArrayConstructor,Q=u.isTypedArray,q="BYTES_PER_ELEMENT",G="Wrong length",X=function(t,e){J(t);for(var r=0,n=e.length,i=new t(n);n>r;)i[r]=e[r++];return i},$=function(t,e){N(t,e,{configurable:!0,get:function(){return C(this)[e]}})},tt=function(t){var e;return D(Z,t)||"ArrayBuffer"===(e=S(t))||"SharedArrayBuffer"===e},et=function(t,e){return Q(t)&&!w(e)&&e in t&&d(+e)&&e>=0},rt=function(t,e){return e=m(e),et(t,e)?h(2,t[e]):U(t,e)},nt=function(t,e,r){return e=m(e),!(et(t,e)&&k(r)&&b(r,"value"))||b(r,"get")||b(r,"set")||r.configurable||b(r,"writable")&&!r.writable||b(r,"enumerable")&&!r.enumerable?_(t,e,r):(t[e]=r.value,t)};o?(H||(M.f=rt,O.f=nt,$(Y,"buffer"),$(Y,"byteOffset"),$(Y,"byteLength"),$(Y,"length")),n({target:"Object",stat:!0,forced:!H},{getOwnPropertyDescriptor:rt,defineProperty:nt}),t.exports=function(t,e,r){var o=t.match(/\d+/)[0]/8,u=t+(r?"Clamped":"")+"Array",l="get"+t,h="set"+t,d=i[u],m=d,b=m&&m.prototype,S={},w=function(t,e){_(t,e,{get:function(){return function(t,e){var r=C(t);return r.view[l](e*o+r.byteOffset,!0)}(this,e)},set:function(t){return function(t,e,n){var i=C(t);i.view[h](e*o+i.byteOffset,r?g(n):n,!0)}(this,e,t)},enumerable:!0})};H?s&&(m=e((function(t,e,r,n){return c(t,b),x(k(e)?tt(e)?void 0!==n?new d(e,y(r,o),n):void 0!==r?new d(e,y(r,o)):new d(e):Q(e)?X(m,e):a(T,m,e):new d(p(e)),t,m)})),P&&P(m,z),I(A(d),(function(t){t in m||f(m,t,d[t])})),m.prototype=b):(m=e((function(t,e,r,n){c(t,b);var i,s,u,l=0,h=0;if(k(e)){if(!tt(e))return Q(e)?X(m,e):a(T,m,e);i=e,h=y(r,o);var f=e.byteLength;if(void 0===n){if(f%o)throw new F(G);if((s=f-h)<0)throw new F(G)}else if((s=v(n)*o)+h>f)throw new F(G);u=s/o}else u=p(e),i=new V(s=u*o);for(L(t,{buffer:i,byteOffset:h,byteLength:s,length:u,view:new W(i)});l<u;)w(t,l++)})),P&&P(m,z),b=m.prototype=E(Y)),b.constructor!==m&&f(b,"constructor",m),j(b).TypedArrayConstructor=m,K&&f(b,K,u);var D=m!==d;S[u]=m,n({global:!0,constructor:!0,forced:D,sham:!H},S),q in m||f(m,q,o),q in b||f(b,q,o),R(u)}):t.exports=function(){}},9800:function(t,e,r){var n=r(9037),i=r(3689),a=r(6431),o=r(4872).NATIVE_ARRAY_BUFFER_VIEWS,s=n.ArrayBuffer,u=n.Int8Array;t.exports=!o||!i((function(){u(1)}))||!i((function(){new u(-1)}))||!a((function(t){new u,new u(null),new u(1.5),new u(t)}),!0)||i((function(){return 1!==new u(new s(2),1,void 0).length}))},716:function(t,e,r){var n=r(9976),i=r(7338);t.exports=function(t,e){return n(i(t),e)}},1304:function(t,e,r){var n=r(4071),i=r(2615),a=r(2655),o=r(690),s=r(6310),u=r(5185),l=r(1664),c=r(3292),h=r(9401),f=r(4872).aTypedArrayConstructor,d=r(1530);t.exports=function(t){var e,r,v,p,y,g,m,b,S=a(this),k=o(t),w=arguments.length,E=w>1?arguments[1]:void 0,D=void 0!==E,P=l(k);if(P&&!c(P))for(b=(m=u(k,P)).next,k=[];!(g=i(b,m)).done;)k.push(g.value);for(D&&w>2&&(E=n(E,arguments[2])),r=s(k),v=new(f(S))(r),p=h(v),e=0;r>e;e++)y=D?E(k[e],e):k[e],v[e]=p?d(y):+y;return v}},7338:function(t,e,r){var n=r(4872),i=r(6373),a=n.aTypedArrayConstructor,o=n.getTypedArrayConstructor;t.exports=function(t){return a(i(t,o(t)))}},886:function(t,e,r){var n=r(9989),i=r(2960).map;n({target:"Array",proto:!0,forced:!r(9042)("map")},{map:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}})},2349:function(t,e,r){var n=r(9989),i=r(2615),a=r(8999),o=r(5027),s=r(6251),u=r(2474),l=r(1868);n({target:"Reflect",stat:!0},{get:function t(e,r){var n,c,h=arguments.length<3?e:arguments[2];return o(e)===h?e[r]:(n=u.f(e,r))?s(n)?n.value:void 0===n.get?void 0:i(n.get,h):a(c=l(e))?t(c,r,h):void 0}})},5194:function(t,e,r){var n=r(4872),i=r(6310),a=r(8700),o=n.aTypedArray;(0,n.exportTypedArrayMethod)("at",(function(t){var e=o(this),r=i(e),n=a(t),s=n>=0?n:r+n;return s<0||s>=r?void 0:e[s]}))},6664:function(t,e,r){var n=r(8844),i=r(4872),a=n(r(357)),o=i.aTypedArray;(0,i.exportTypedArrayMethod)("copyWithin",(function(t,e){return a(o(this),t,e,arguments.length>2?arguments[2]:void 0)}))},5980:function(t,e,r){var n=r(4872),i=r(2960).every,a=n.aTypedArray;(0,n.exportTypedArrayMethod)("every",(function(t){return i(a(this),t,arguments.length>1?arguments[1]:void 0)}))},9943:function(t,e,r){var n=r(4872),i=r(2872),a=r(1530),o=r(926),s=r(2615),u=r(8844),l=r(3689),c=n.aTypedArray,h=n.exportTypedArrayMethod,f=u("".slice);h("fill",(function(t){var e=arguments.length;c(this);var r="Big"===f(o(this),0,3)?a(t):+t;return s(i,this,r,e>1?arguments[1]:void 0,e>2?arguments[2]:void 0)}),l((function(){var t=0;return new Int8Array(2).fill({valueOf:function(){return t++}}),1!==t})))},6089:function(t,e,r){var n=r(4872),i=r(2960).filter,a=r(716),o=n.aTypedArray;(0,n.exportTypedArrayMethod)("filter",(function(t){var e=i(o(this),t,arguments.length>1?arguments[1]:void 0);return a(this,e)}))},8690:function(t,e,r){var n=r(4872),i=r(2960).findIndex,a=n.aTypedArray;(0,n.exportTypedArrayMethod)("findIndex",(function(t){return i(a(this),t,arguments.length>1?arguments[1]:void 0)}))},82:function(t,e,r){var n=r(4872),i=r(1969).findLastIndex,a=n.aTypedArray;(0,n.exportTypedArrayMethod)("findLastIndex",(function(t){return i(a(this),t,arguments.length>1?arguments[1]:void 0)}))},522:function(t,e,r){var n=r(4872),i=r(1969).findLast,a=n.aTypedArray;(0,n.exportTypedArrayMethod)("findLast",(function(t){return i(a(this),t,arguments.length>1?arguments[1]:void 0)}))},8539:function(t,e,r){var n=r(4872),i=r(2960).find,a=n.aTypedArray;(0,n.exportTypedArrayMethod)("find",(function(t){return i(a(this),t,arguments.length>1?arguments[1]:void 0)}))},5385:function(t,e,r){var n=r(4872),i=r(2960).forEach,a=n.aTypedArray;(0,n.exportTypedArrayMethod)("forEach",(function(t){i(a(this),t,arguments.length>1?arguments[1]:void 0)}))},5552:function(t,e,r){var n=r(4872),i=r(4328).includes,a=n.aTypedArray;(0,n.exportTypedArrayMethod)("includes",(function(t){return i(a(this),t,arguments.length>1?arguments[1]:void 0)}))},1803:function(t,e,r){var n=r(4872),i=r(4328).indexOf,a=n.aTypedArray;(0,n.exportTypedArrayMethod)("indexOf",(function(t){return i(a(this),t,arguments.length>1?arguments[1]:void 0)}))},1565:function(t,e,r){var n=r(9037),i=r(3689),a=r(8844),o=r(4872),s=r(752),u=r(4201)("iterator"),l=n.Uint8Array,c=a(s.values),h=a(s.keys),f=a(s.entries),d=o.aTypedArray,v=o.exportTypedArrayMethod,p=l&&l.prototype,y=!i((function(){p[u].call([1])})),g=!!p&&p.values&&p[u]===p.values&&"values"===p.values.name,m=function(){return c(d(this))};v("entries",(function(){return f(d(this))}),y),v("keys",(function(){return h(d(this))}),y),v("values",m,y||!g,{name:"values"}),v(u,m,y||!g,{name:"values"})},7987:function(t,e,r){var n=r(4872),i=r(8844),a=n.aTypedArray,o=n.exportTypedArrayMethod,s=i([].join);o("join",(function(t){return s(a(this),t)}))},9365:function(t,e,r){var n=r(4872),i=r(1735),a=r(953),o=n.aTypedArray;(0,n.exportTypedArrayMethod)("lastIndexOf",(function(t){var e=arguments.length;return i(a,o(this),e>1?[t,arguments[1]]:[t])}))},677:function(t,e,r){var n=r(4872),i=r(2960).map,a=r(7338),o=n.aTypedArray;(0,n.exportTypedArrayMethod)("map",(function(t){return i(o(this),t,arguments.length>1?arguments[1]:void 0,(function(t,e){return new(a(t))(e)}))}))},1165:function(t,e,r){var n=r(4872),i=r(8820).right,a=n.aTypedArray;(0,n.exportTypedArrayMethod)("reduceRight",(function(t){var e=arguments.length;return i(a(this),t,e,e>1?arguments[1]:void 0)}))},8118:function(t,e,r){var n=r(4872),i=r(8820).left,a=n.aTypedArray;(0,n.exportTypedArrayMethod)("reduce",(function(t){var e=arguments.length;return i(a(this),t,e,e>1?arguments[1]:void 0)}))},1522:function(t,e,r){var n=r(4872),i=n.aTypedArray,a=n.exportTypedArrayMethod,o=Math.floor;a("reverse",(function(){for(var t,e=this,r=i(e).length,n=o(r/2),a=0;a<n;)t=e[a],e[a++]=e[--r],e[r]=t;return e}))},1638:function(t,e,r){var n=r(9037),i=r(2615),a=r(4872),o=r(6310),s=r(3250),u=r(690),l=r(3689),c=n.RangeError,h=n.Int8Array,f=h&&h.prototype,d=f&&f.set,v=a.aTypedArray,p=a.exportTypedArrayMethod,y=!l((function(){var t=new Uint8ClampedArray(2);return i(d,t,{length:1,0:3},1),3!==t[1]})),g=y&&a.NATIVE_ARRAY_BUFFER_VIEWS&&l((function(){var t=new h(2);return t.set(1),t.set("2",1),0!==t[0]||2!==t[1]}));p("set",(function(t){v(this);var e=s(arguments.length>1?arguments[1]:void 0,1),r=u(t);if(y)return i(d,this,r,e);var n=this.length,a=o(r),l=0;if(a+e>n)throw new c("Wrong length");for(;l<a;)this[e+l]=r[l++]}),!y||g)},4797:function(t,e,r){var n=r(4872),i=r(7338),a=r(3689),o=r(6004),s=n.aTypedArray;(0,n.exportTypedArrayMethod)("slice",(function(t,e){for(var r=o(s(this),t,e),n=i(this),a=0,u=r.length,l=new n(u);u>a;)l[a]=r[a++];return l}),a((function(){new Int8Array(1).slice()})))},7300:function(t,e,r){var n=r(4872),i=r(2960).some,a=n.aTypedArray;(0,n.exportTypedArrayMethod)("some",(function(t){return i(a(this),t,arguments.length>1?arguments[1]:void 0)}))},3356:function(t,e,r){var n=r(9037),i=r(6576),a=r(3689),o=r(509),s=r(382),u=r(4872),l=r(7365),c=r(7298),h=r(3615),f=r(7922),d=u.aTypedArray,v=u.exportTypedArrayMethod,p=n.Uint16Array,y=p&&i(p.prototype.sort),g=!(!y||a((function(){y(new p(2),null)}))&&a((function(){y(new p(2),{})}))),m=!!y&&!a((function(){if(h)return h<74;if(l)return l<67;if(c)return!0;if(f)return f<602;var t,e,r=new p(516),n=Array(516);for(t=0;t<516;t++)e=t%4,r[t]=515-t,n[t]=t-2*e+3;for(y(r,(function(t,e){return(t/4|0)-(e/4|0)})),t=0;t<516;t++)if(r[t]!==n[t])return!0}));v("sort",(function(t){return void 0!==t&&o(t),m?y(this,t):s(d(this),function(t){return function(e,r){return void 0!==t?+t(e,r)||0:r!=r?-1:e!=e?1:0===e&&0===r?1/e>0&&1/r<0?1:-1:e>r}}(t))}),!m||g)},9724:function(t,e,r){var n=r(9037),i=r(1735),a=r(4872),o=r(3689),s=r(6004),u=n.Int8Array,l=a.aTypedArray,c=a.exportTypedArrayMethod,h=[].toLocaleString,f=!!u&&o((function(){h.call(new u(1))}));c("toLocaleString",(function(){return i(h,f?s(l(this)):l(this),s(arguments))}),o((function(){return[1,2].toLocaleString()!==new u([1,2]).toLocaleString()}))||!o((function(){u.prototype.toLocaleString.call([1,2])})))},9901:function(t,e,r){var n=r(4872).exportTypedArrayMethod,i=r(3689),a=r(9037),o=r(8844),s=a.Uint8Array,u=s&&s.prototype||{},l=[].toString,c=o([].join);i((function(){l.call({})}))&&(l=function(){return c(this)});var h=u.toString!==l;n("toString",l,h)},8607:function(t,e,r){r(1158)("Uint8",(function(t){return function(e,r,n){return t(this,e,r,n)}}))},6256:function(t,e,r){r(5194)},1274:function(t,e,r){r(82)},4302:function(t,e,r){r(522)}},function(t){var e;return e=5067,t(t.s=e)}])}));