"use strict";!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("dashjsSmartLibModule",[],t):"object"==typeof exports?exports.dashjsSmartLibModule=t():e.dashjsSmartLibModule=t()}("undefined"!=typeof self?self:global,(function(){return(("undefined"!=typeof self?self:global).webpackChunkSmartLibModule=("undefined"!=typeof self?self:global).webpackChunkSmartLibModule||[]).push([[112],{4505:function(e,t,i){i.r(t),i.d(t,{DashJsPlayerAdapter:function(){return _}});i(4338),i(752),i(228),i(1694),i(1090),i(6265),i(9373),i(9903),i(9749),i(6544),i(9288),i(8052),i(6034),i(50);var r=i(9393),n=i(7780),a=i(7960);function s(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,c(r.key),r)}}function o(e,t){return o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},o(e,t)}function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,r=u(e);if(t){var n=u(this).constructor;i=Reflect.construct(r,arguments,n)}else i=r.apply(this,arguments);return function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return h(e)}(this,i)}}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e){return u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},u(e)}function y(e,t,i){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,i)}function f(e,t,i){return(t=c(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function c(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var r=i.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}function d(e,t,i){return function(e,t,i){if(t.set)t.set.call(e,i);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=i}}(e,E(e,t,"set"),i),i}function p(e,t){return function(e,t){if(t.get)return t.get.call(e);return t.value}(e,E(e,t,"get"))}function E(e,t,i){if(!t.has(e))throw new TypeError("attempted to "+i+" private field on non-instance");return t.get(e)}var P="BpkDashJsPlayerAdapter",v=new WeakMap,R=new WeakMap,_=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&o(e,t)}(c,e);var t,i,n,u=l(c);function c(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c);for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return y(h(e=u.call.apply(u,[this].concat(i))),v,{writable:!0,value:void 0}),y(h(e),R,{writable:!0,value:void 0}),f(h(e),"started",void 0),f(h(e),"paused",void 0),f(h(e),"buffering",void 0),f(h(e),"seeking",void 0),f(h(e),"seekBeginPosition",void 0),f(h(e),"lastLayer",void 0),f(h(e),"playerStateManager",void 0),f(h(e),"playerListener",void 0),f(h(e),"position",void 0),e}return t=c,n=[{key:"attachLibrary",value:function(e){void 0!==e.MediaPlayer&&void 0!==e.Version?(r.oR.d(P,"Dash.js library attached"),c.library=e):r.oR.e(P,"Try to attach a library, but it is not recognized")}},{key:"checkPlayer",value:function(e,t){return"undefined"!=typeof window&&void 0!==window.dashjs&&(c.library=window.dashjs),"object"==typeof c.library&&"function"==typeof e.getDashMetrics&&"function"==typeof e.getClassName&&"MediaPlayer"===e.getClassName()}}],(i=[{key:"handleEvent",value:function(e){if("error"===e.type&&"object"==typeof e.error)return r.oR.e(P,"Player encountered an error : "+e.error.code),this.setStatusCode(this.getErrorCode(e.error)),void this.setPlayerErrorCode(e.error.code);if(this.started)if("playbackPlaying"===e.type)this.buffering&&(this.notifyStallEnd(),this.setStatusCode(r.$2.BPSessionEndsNormally),this.buffering=!1,this.seeking=!1),this.paused&&(this.notifyResume(),this.paused=!1);else if("playbackPaused"===e.type)this.paused||p(this,v).isSeeking()&&!this.seeking||(this.paused=!0,this.notifyPause());else if("playbackStarted"===e.type)this.paused&&(this.paused=!1,this.notifyResume());else if("playbackWaiting"===e.type||"bufferStalled"===e.type&&"video"===e.mediaType)this.buffering||(this.buffering=!0,this.notifyStallStart());else if("bufferLoaded"===e.type&&"video"===e.mediaType)this.buffering=!1,this.notifyStallEnd(),this.setStatusCode(r.$2.BPSessionEndsNormally);else if("qualityChangeRendered"===e.type){var t=this.getBitrate();t!==this.lastLayer&&(this.lastLayer=t,this.notifyLayerSwitch(t))}else"playbackSeeked"===e.type?this.seeking=!1:"playbackSeeking"===e.type&&(this.seekBeginPosition=this.playerStateManager.getPositionBeforeSeek(),this.seekBeginPosition!==this.getPosition()&&(this.seeking=!0,this.notifySeek(this.seekBeginPosition,this.getPosition())));else"playbackPlaying"===e.type&&(this.playerStateManager.start(),this.started=!0,this.notifyFirstImage())}},{key:"getName",value:function(){return"Dash.js"}},{key:"getVersion",value:function(){return c.library.Version.substring(0,32)}},{key:"getMediaElement",value:function(){return p(this,v).getVideoElement()}},{key:"getBitrate",value:function(){if(void 0!==p(this,v)&&p(this,v).isReady()){var e=p(this,v).getQualityFor("video"),t=p(this,v).getQualityFor("audio"),i=p(this,v).getBitrateInfoListFor("video"),r=p(this,v).getBitrateInfoListFor("audio"),n=0;return e<i.length&&(n=Math.round(i[e].bitrate/1e3)),t<r.length&&(n+=Math.round(r[t].bitrate/1e3)),n}return 0}},{key:"getPosition",value:function(){return void 0!==p(this,v)?p(this,v).isDynamic()&&(isNaN(p(this,v).timeAsUTC())||(this.position=Math.round(1e3*p(this,v).timeAsUTC())),0!==this.position)?this.position:Math.round(1e3*p(this,v).time()):0}},{key:"getDuration",value:function(){return void 0===p(this,v)||p(this,v).isDynamic()?0:Math.round(1e3*p(this,v).duration())}},{key:"getCapabilities",value:function(){return{adTracking:!0}}},{key:"getErrorCode",value:function(e){var t=c.library.MediaPlayer.errors;switch(e.code){case t.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE:return r.$2.BPFormatNotSupportedError;case t.MANIFEST_LOADER_LOADING_FAILURE_ERROR_CODE:case t.XLINK_LOADER_LOADING_FAILURE_ERROR_CODE:case t.SEGMENTS_UPDATE_FAILED_ERROR_CODE:case t.SEGMENTS_UNAVAILABLE_ERROR_CODE:case t.SEGMENT_BASE_LOADER_ERROR_CODE:case t.TIME_SYNC_FAILED_ERROR_CODE:case t.FRAGMENT_LOADER_LOADING_FAILURE_ERROR_CODE:case t.FRAGMENT_LOADER_NULL_REQUEST_ERROR_CODE:case t.URL_RESOLUTION_FAILED_GENERIC_ERROR_CODE:case t.APPEND_ERROR_CODE:case t.REMOVE_ERROR_CODE:case t.DATA_UPDATE_FAILED_ERROR_CODE:return r.$2.BPDecodingError;case t.CAPABILITY_MEDIASOURCE_ERROR_CODE:return r.$2.BPFormatNotSupportedError;case t.CAPABILITY_MEDIAKEYS_ERROR_CODE:return r.$2.BPAccessRightError;case t.DOWNLOAD_ERROR_ID_MANIFEST_CODE:case t.DOWNLOAD_ERROR_ID_SIDX_CODE:case t.DOWNLOAD_ERROR_ID_CONTENT_CODE:case t.DOWNLOAD_ERROR_ID_INITIALIZATION_CODE:case t.DOWNLOAD_ERROR_ID_XLINK_CODE:return r.$2.BPNetworkingError;case t.MANIFEST_ERROR_ID_CODEC_CODE:case t.MANIFEST_ERROR_ID_PARSE_CODE:case t.MANIFEST_ERROR_ID_NOSTREAMS_CODE:case t.TIMED_TEXT_ERROR_ID_PARSE_CODE:return r.$2.BPDecodingError;case t.MANIFEST_ERROR_ID_MULTIPLEXED_CODE:case t.MEDIASOURCE_TYPE_UNSUPPORTED_CODE:return r.$2.BPFormatNotSupportedError}return e.code>=t.MEDIA_KEYERR_CODE?r.$2.BPAccessRightError:r.$2.BPUnspecifiedError}},{key:"initSessionPlayerObjects",value:function(){this.started=!1,this.paused=!1,this.buffering=!1,this.seeking=!1,this.seekBeginPosition=0,this.lastLayer=0,this.position=0,void 0!==p(this,v)&&(void 0!==this.playerStateManager&&this.playerStateManager.stop(),this.playerStateManager=new a.Z(this,this),this.playerListener=this.handleEvent.bind(this),p(this,v).on(c.library.MediaPlayer.events.PLAYBACK_PLAYING,this.playerListener,this),p(this,v).on(c.library.MediaPlayer.events.PLAYBACK_PAUSED,this.playerListener,this),p(this,v).on(c.library.MediaPlayer.events.BUFFER_EMPTY,this.playerListener,this),p(this,v).on(c.library.MediaPlayer.events.QUALITY_CHANGE_RENDERED,this.playerListener,this),p(this,v).on(c.library.MediaPlayer.events.ERROR,this.playerListener,this),p(this,v).on(c.library.MediaPlayer.events.PLAYBACK_WAITING,this.playerListener,this),p(this,v).on(c.library.MediaPlayer.events.BUFFER_LOADED,this.playerListener,this),p(this,v).on(c.library.MediaPlayer.events.PLAYBACK_STARTED,this.playerListener,this),p(this,v).on(c.library.MediaPlayer.events.PLAYBACK_SEEKING,this.playerListener,this),p(this,v).on(c.library.MediaPlayer.events.PLAYBACK_SEEKED,this.playerListener,this))}},{key:"releaseSessionPlayerObjects",value:function(){void 0!==this.playerStateManager&&(this.playerStateManager.stop(),this.playerStateManager=void 0),void 0!==p(this,v)&&void 0!==this.playerListener&&(p(this,v).off(c.library.MediaPlayer.events.PLAYBACK_PLAYING,this.playerListener,this),p(this,v).off(c.library.MediaPlayer.events.PLAYBACK_PAUSED,this.playerListener,this),p(this,v).off(c.library.MediaPlayer.events.BUFFER_EMPTY,this.playerListener,this),p(this,v).off(c.library.MediaPlayer.events.QUALITY_CHANGE_RENDERED,this.playerListener,this),p(this,v).off(c.library.MediaPlayer.events.ERROR,this.playerListener,this),p(this,v).off(c.library.MediaPlayer.events.PLAYBACK_WAITING,this.playerListener,this),p(this,v).off(c.library.MediaPlayer.events.BUFFER_LOADED,this.playerListener,this),p(this,v).off(c.library.MediaPlayer.events.PLAYBACK_STARTED,this.playerListener,this),p(this,v).off(c.library.MediaPlayer.events.PLAYBACK_SEEKING,this.playerListener,this),p(this,v).off(c.library.MediaPlayer.events.PLAYBACK_SEEKED,this.playerListener,this),p(this,v).setPlaybackRate(1))}},{key:"attachPlayer",value:function(e,t){return!!c.checkPlayer(e,t)&&(void 0===c.library&&r.oR.e(P,"Player library not attached to the adapter, please call DashJsPlayerAdapter.attachLibrary(dashjs) before attachPlayer"),d(this,v,e),d(this,R,t),!0)}},{key:"detachPlayer",value:function(){this.releaseSessionPlayerObjects(),d(this,v,void 0),d(this,R,void 0)}}])&&s(t.prototype,i),n&&s(t,n),Object.defineProperty(t,"prototype",{writable:!1}),c}(n.y4);f(_,"library",void 0),i(5911).Z.dashjsModule={DashJsPlayerAdapter:_}},7960:function(e,t,i){i.d(t,{Z:function(){return o}});i(9373),i(9903),i(9749),i(6544),i(228),i(9288);var r=i(9393);function n(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,s(r.key),r)}}function a(e,t,i){return(t=s(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function s(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var r=i.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}var o=function(){function e(t,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),a(this,"playerAdapter",void 0),a(this,"listener",void 0),a(this,"pollPeriod",void 0),a(this,"pollLastDate",void 0),a(this,"pollPlayerInterval",void 0),a(this,"lastPosition",void 0),a(this,"expectedPosition",void 0),this.playerAdapter=t,this.listener=i,this.pollPeriod=e.POLLING_PERIOD,this.pollPlayerInterval=null,this.expectedPosition=0,this.pollLastDate=0}var t,i,s;return t=e,(i=[{key:"start",value:function(){var e=this;this.lastPosition=this.playerAdapter.getPosition(),this.expectedPosition=this.lastPosition+this.pollPeriod,this.pollLastDate=Date.now(),null!==this.pollPlayerInterval&&clearInterval(this.pollPlayerInterval),this.pollPlayerInterval=setInterval((function(){e.pollPlayerPosition()}),this.pollPeriod)}},{key:"stop",value:function(){null!==this.pollPlayerInterval&&(clearInterval(this.pollPlayerInterval),this.pollPlayerInterval=null)}},{key:"forcePollPlayerPosition",value:function(){this.expectedPosition=this.expectedPosition-this.pollPeriod+(Date.now()-this.pollLastDate),this.pollPlayerPosition()}},{key:"pollPlayerPosition",value:function(){this.lastPosition=this.playerAdapter.getPosition();var e=this.expectedPosition+2*this.pollPeriod,t=this.expectedPosition-2*this.pollPeriod;(this.lastPosition<t||this.lastPosition>e)&&void 0!==this.listener&&"function"==typeof this.listener.handleSeek&&!0===this.listener.handleSeek(this.expectedPosition,this.lastPosition)&&r.oR.d("BpkPlayerStateManager","Player is seeking ("+r.ED.formatTime(this.expectedPosition)+" to "+r.ED.formatTime(this.lastPosition)+")"),this.expectedPosition=this.lastPosition+this.pollPeriod,void 0!==this.listener&&"function"==typeof this.listener.handlePoll&&this.listener.handlePoll(),this.pollLastDate=Date.now()}},{key:"getPositionBeforeSeek",value:function(){return this.lastPosition}}])&&n(t.prototype,i),s&&n(t,s),Object.defineProperty(t,"prototype",{writable:!1}),e}();a(o,"POLLING_PERIOD",500)},4338:function(e,t,i){var r=i(9989),n=i(3689),a=i(2297),s=i(8999),o=i(690),l=i(6310),h=i(5565),u=i(6522),y=i(7120),f=i(9042),c=i(4201),d=i(3615),p=c("isConcatSpreadable"),E=d>=51||!n((function(){var e=[];return e[p]=!1,e.concat()[0]!==e})),P=function(e){if(!s(e))return!1;var t=e[p];return void 0!==t?!!t:a(e)};r({target:"Array",proto:!0,arity:1,forced:!E||!f("concat")},{concat:function(e){var t,i,r,n,a,s=o(this),f=y(s,0),c=0;for(t=-1,r=arguments.length;t<r;t++)if(P(a=-1===t?s:arguments[t]))for(n=l(a),h(c+n),i=0;i<n;i++,c++)i in a&&u(f,c,a[i]);else h(c+1),u(f,c++,a);return f.length=c,f}})}},function(e){return e.O(0,[142],(function(){return t=4505,e(e.s=t);var t})),e.O()}])}));