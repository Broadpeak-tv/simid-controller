"use strict";!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("analyticsSmartLibModule",[],e):"object"==typeof exports?exports.analyticsSmartLibModule=e():t.analyticsSmartLibModule=e()}("undefined"!=typeof self?self:global,(function(){return(("undefined"!=typeof self?self:global).webpackChunkSmartLibModule=("undefined"!=typeof self?self:global).webpackChunkSmartLibModule||[]).push([[153],{373:function(t,e,n){var r=n(4576),i=n(7476),a=n(9039),o=n(9306),s=n(4488),u=n(4644),l=n(3709),c=n(3763),f=n(9519),h=n(3607),d=u.aTypedArray,v=u.exportTypedArrayMethod,p=r.Uint16Array,y=p&&i(p.prototype.sort),m=!(!y||a((function(){y(new p(2),null)}))&&a((function(){y(new p(2),{})}))),g=!!y&&!a((function(){if(f)return f<74;if(l)return l<67;if(c)return!0;if(h)return h<602;var t,e,n=new p(516),r=Array(516);for(t=0;t<516;t++)e=t%4,n[t]=515-t,r[t]=t-2*e+3;for(y(n,(function(t,e){return(t/4|0)-(e/4|0)})),t=0;t<516;t++)if(n[t]!==r[t])return!0}));v("sort",(function(t){return void 0!==t&&o(t),g?y(this,t):s(d(this),function(t){return function(e,n){return void 0!==t?+t(e,n)||0:n!=n?-1:e!=e?1:0===e&&0===n?1/e>0&&1/n<0?1:-1:e>n}}(t))}),!g||m)},713:function(t,e,n){var r=n(9565),i=n(9306),a=n(8551),o=n(1767),s=n(9462),u=n(6319),l=s((function(){var t=this.iterator,e=a(r(this.next,t));if(!(this.done=!!e.done))return u(t,this.mapper,[e.value,this.counter++],!0)}));t.exports=function(t){return a(this),i(t),new l(o(this),{mapper:t})}},888:function(t,e,n){var r=n(6518),i=n(9565),a=n(34),o=n(8551),s=n(6575),u=n(7347),l=n(2787);r({target:"Reflect",stat:!0},{get:function t(e,n){var r,c,f=arguments.length<3?e:arguments[2];return o(e)===f?e[n]:(r=u.f(e,n))?s(r)?r.value:void 0===r.get?void 0:i(r.get,f):a(c=l(e))?t(c,n,f):void 0}})},926:function(t,e,n){var r=n(9306),i=n(8981),a=n(7055),o=n(6198),s=TypeError,u="Reduce of empty array with no initial value",l=function(t){return function(e,n,l,c){var f=i(e),h=a(f),d=o(f);if(r(n),0===d&&l<2)throw new s(u);var v=t?d-1:0,p=t?-1:1;if(l<2)for(;;){if(v in h){c=h[v],v+=p;break}if(v+=p,t?v<0:d<=v)throw new s(u)}for(;t?v>=0:d>v;v+=p)v in h&&(c=n(c,h[v],v,f));return c}};t.exports={left:l(!1),right:l(!0)}},1108:function(t,e,n){var r=n(6955);t.exports=function(t){var e=r(t);return"BigInt64Array"===e||"BigUint64Array"===e}},1134:function(t,e,n){var r=n(4644),i=n(3839).findLastIndex,a=r.aTypedArray;(0,r.exportTypedArrayMethod)("findLastIndex",(function(t){return i(a(this),t,arguments.length>1?arguments[1]:void 0)}))},1405:function(t,e,n){var r=n(4576),i=n(8745),a=n(4644),o=n(9039),s=n(7680),u=r.Int8Array,l=a.aTypedArray,c=a.exportTypedArrayMethod,f=[].toLocaleString,h=!!u&&o((function(){f.call(new u(1))}));c("toLocaleString",(function(){return i(f,h?s(l(this)):l(this),s(arguments))}),o((function(){return[1,2].toLocaleString()!==new u([1,2]).toLocaleString()}))||!o((function(){u.prototype.toLocaleString.call([1,2])})))},1454:function(t,e,n){n(1701)},1473:function(t,e,n){n.d(e,{A:function(){return o}});n(2675),n(9463),n(2259),n(5700),n(3792),n(9572),n(2892),n(6099),n(7764),n(8992),n(3949),n(3500),n(2953);function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,a(r.key),r)}}function a(t){var e=function(t,e){if("object"!=r(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==r(e)?e:e+""}var o=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)},n=[{key:"hasMethods",value:function(t,e){var n=!0;return void 0!==t&&(e.forEach((function(e){"function"!=typeof t[e]&&(n=!1)})),n)}},{key:"count",value:function(t,e){var n=0;for(var r in t)!0===e(r,t[r])&&n++;return n}}],(e=null)&&i(t.prototype,e),n&&i(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n}()},1489:function(t,e,n){n(5823)("Uint8",(function(t){return function(e,n,r){return t(this,e,n,r)}}))},1575:function(t,e,n){var r=n(4644),i=n(926).left,a=r.aTypedArray;(0,r.exportTypedArrayMethod)("reduce",(function(t){var e=arguments.length;return i(a(this),t,e,e>1?arguments[1]:void 0)}))},1630:function(t,e,n){var r=n(9504),i=n(4644),a=r(n(7029)),o=i.aTypedArray;(0,i.exportTypedArrayMethod)("copyWithin",(function(t,e){return a(o(this),t,e,arguments.length>2?arguments[2]:void 0)}))},1694:function(t,e,n){var r=n(4644),i=n(9213).find,a=r.aTypedArray;(0,r.exportTypedArrayMethod)("find",(function(t){return i(a(this),t,arguments.length>1?arguments[1]:void 0)}))},1701:function(t,e,n){var r=n(6518),i=n(713);r({target:"Iterator",proto:!0,real:!0,forced:n(6395)},{map:i})},1706:function(t,e,n){n(1903)},1839:function(t,e,n){n(5759)},1903:function(t,e,n){var r=n(4644),i=n(3839).findLast,a=r.aTypedArray;(0,r.exportTypedArrayMethod)("findLast",(function(t){return i(a(this),t,arguments.length>1?arguments[1]:void 0)}))},1920:function(t,e,n){var r=n(4644),i=n(9213).filter,a=n(9948),o=r.aTypedArray;(0,r.exportTypedArrayMethod)("filter",(function(t){var e=i(o(this),t,arguments.length>1?arguments[1]:void 0);return a(this,e)}))},2062:function(t,e,n){var r=n(6518),i=n(9213).map;r({target:"Array",proto:!0,forced:!n(597)("map")},{map:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}})},2087:function(t,e,n){var r=n(34),i=Math.floor;t.exports=Number.isInteger||function(t){return!r(t)&&isFinite(t)&&i(t)===t}},2170:function(t,e,n){var r=n(4644),i=n(9213).every,a=r.aTypedArray;(0,r.exportTypedArrayMethod)("every",(function(t){return i(a(this),t,arguments.length>1?arguments[1]:void 0)}))},2795:function(t,e,n){n.r(e),n.d(e,{AnalyticsRequestManager:function(){return i.bW},AnalyticsSession:function(){return i.Bw},BroadpeakCDNCacheKeepaliveManager:function(){return i._7},CacheHandler:function(){return g},CacheKeepaliveManager:function(){return i.sX},CacheManager:function(){return i.Go},GenericPlayerAdapter:function(){return i.qT},GenericPlayerApi:function(){return i.NQ},Metrics:function(){return i.K1},MetricsManager:function(){return i.pi},PlayerAdapter:function(){return i.nm},PlayerEventListener:function(){return i.Wy},PlayerManager:function(){return i.dx},SessionTrackerEvent:function(){return i.lX},SessionTrackerEvents:function(){return i.c5},SessionTrackerTimeline:function(){return i.EC}});var r=n(3557),i=(n(2675),n(9463),n(2259),n(5700),n(3792),n(9572),n(2892),n(6099),n(7764),n(3772),n(2953),n(3575));function a(t){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a(t)}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,s(r.key),r)}}function s(t){var e=function(t,e){if("object"!=a(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=a(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==a(e)?e:e+""}function u(t,e,n){(function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")})(t,e),e.set(t,n)}function l(t,e){return t.get(c(t,e))}function c(t,e,n){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:n;throw new TypeError("Private element is not present on this object")}var f=new WeakMap,h=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),u(this,f,void 0)},(e=[{key:"loadPlayerAdapters",value:function(){var t,e,n,a,o,s,u,h,d,v,p,y,m,g,b,S,k,E,w,D;return w=this,D={},(E=f).set(c(E,w),D),l(f,this).generic=i.qT,this.addAdapter("voplayer",null===(t=r.A.voplayerModule)||void 0===t?void 0:t.VOPlayerAdapter),this.addAdapter("theoplayer",null===(e=r.A.theoplayerModule)||void 0===e?void 0:e.THEOPlayerAdapter),this.addAdapter("shaka",null===(n=r.A.shakaModule)||void 0===n?void 0:n.ShakaPlayerAdapter),this.addAdapter("dashjs",null===(a=r.A.dashjsModule)||void 0===a?void 0:a.DashJsPlayerAdapter),this.addAdapter("html5",null===(o=r.A.html5Module)||void 0===o?void 0:o.HTML5PlayerAdapter),this.addAdapter("avplay",null===(s=r.A.avplayModule)||void 0===s?void 0:s.AVPlayAdapter),this.addAdapter("diw387",null===(u=r.A.diw387Module)||void 0===u?void 0:u.SagemcomDIW387Adapter),this.addAdapter("hbbtv1",null===(h=r.A.hbbtv1Module)||void 0===h?void 0:h.HbbTV1PlayerAdapter),this.addAdapter("kaltura",null===(d=r.A.kalturaModule)||void 0===d?void 0:d.KalturaPlayerAdapter),this.addAdapter("connectplayer",null===(v=r.A.connectplayerModule)||void 0===v?void 0:v.ConnectPlayerAdapter),this.addAdapter("rxplayer",null===(p=r.A.rxplayerModule)||void 0===p?void 0:p.RxPlayerAdapter),this.addAdapter("videojs",null===(y=r.A.videojsModule)||void 0===y?void 0:y.VideoJsPlayerAdapter),this.addAdapter("hlsjs",null===(m=r.A.hlsjsModule)||void 0===m?void 0:m.HlsJsPlayerAdapter),this.addAdapter("bitmovin",null===(g=r.A.bitmovinModule)||void 0===g?void 0:g.BitmovinPlayerAdapter),this.addAdapter("reactnativeconnectplayer",null===(b=r.A.reactnativeconnectplayerModule)||void 0===b?void 0:b.ReactNativeConnectPlayerAdapter),this.addAdapter("reactnativetheoplayer",null===(S=r.A.reactnativetheoplayerModule)||void 0===S?void 0:S.ReactNativeTHEOplayerAdapter),this.addAdapter("chromecast",null===(k=r.A.chromecastModule)||void 0===k?void 0:k.ChromecastPlayerAdapter),l(f,this)}},{key:"addAdapter",value:function(t,e){void 0!==e&&(l(f,this)[t]=e)}},{key:"attachPlayer",value:function(t,e){for(var n in l(f,this))if(void 0!==l(f,this)[n]&&l(f,this)[n].checkPlayer(t,e)){var r=new(l(f,this)[n]);return r.attachPlayer(t,e),r}}}])&&o(t.prototype,e),n&&o(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n}(),d=(n(2008),n(2062),n(7495),n(5440),n(1392),n(8992),n(3949),n(1454),n(3500),n(8636));function v(t){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},v(t)}function p(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,y(r.key),r)}}function y(t){var e=function(t,e){if("object"!=v(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=v(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==v(e)?e:e+""}var m="sl-",g=function(){return t=function t(){var e,n,r,i=this;if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e=this,r=void 0,(n=y(n="storage"))in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,d.gD.d("BpkCacheHandler","Init cache handler, localStorage is "+("undefined"!=typeof localStorage?"available":"unavailable")+"..."),this.storage={},"undefined"!=typeof localStorage){for(var a=[],o=0;o<localStorage.length;o++)a.push(localStorage.key(o));a.filter((function(t){return t.startsWith(m)})).map((function(t){return{key:t,value:localStorage.getItem(t)}})).forEach((function(t){void 0!==t.value&&(i.storage[t.key]=t.value)}))}},e=[{key:"set",value:function(t,e){t=m+t,this.storage[t]=e,setTimeout((function(){var n;null===(n=localStorage)||void 0===n||n.setItem(t,e)}),1)}},{key:"get",value:function(t){var e;return!1===(arguments.length>1&&void 0!==arguments[1]&&arguments[1])&&(t=m+t),t in this.storage?this.storage[t]:("undefined"!=typeof localStorage&&(e=localStorage.getItem(t)),null!=e?(this.storage[t]=e,e):void 0)}},{key:"delete",value:function(t){t=m+t,delete this.storage[t],setTimeout((function(){var e;null===(e=localStorage)||void 0===e||e.removeItem(t)}),1)}},{key:"keys",value:function(){return void 0!==this.storage?Object.keys(this.storage).map((function(t){return t.replace(m,"")})):[]}}],e&&p(t.prototype,e),n&&p(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n}();r.A.analyticsModule={PlayerManagerHandler:h,PlayerEventListener:i.Wy,GenericPlayerApi:i.NQ,CacheHandler:g},r.A.getInstance().registerPlayerAdapters()},2805:function(t,e,n){var r=n(4576),i=n(9039),a=n(4428),o=n(4644).NATIVE_ARRAY_BUFFER_VIEWS,s=r.ArrayBuffer,u=r.Int8Array;t.exports=!o||!i((function(){u(1)}))||!i((function(){new u(-1)}))||!a((function(t){new u,new u(null),new u(1.5),new u(t)}),!0)||i((function(){return 1!==new u(new s(2),1,void 0).length}))},2887:function(t,e,n){var r=n(4576),i=n(9039),a=n(9504),o=n(4644),s=n(3792),u=n(8227)("iterator"),l=r.Uint8Array,c=a(s.values),f=a(s.keys),h=a(s.entries),d=o.aTypedArray,v=o.exportTypedArrayMethod,p=l&&l.prototype,y=!i((function(){p[u].call([1])})),m=!!p&&p.values&&p[u]===p.values&&"values"===p.values.name,g=function(){return c(d(this))};v("entries",(function(){return h(d(this))}),y),v("keys",(function(){return f(d(this))}),y),v("values",g,y||!m,{name:"values"}),v(u,g,y||!m,{name:"values"})},3164:function(t,e,n){var r=n(7782),i=n(3602),a=Math.abs;t.exports=function(t,e,n,o){var s=+t,u=a(s),l=r(s);if(u<o)return l*i(u/o/e)*o*e;var c=(1+e/2220446049250313e-31)*u,f=c-(c-u);return f>n||f!=f?l*(1/0):l*f}},3206:function(t,e,n){var r=n(4644),i=n(9213).forEach,a=r.aTypedArray;(0,r.exportTypedArrayMethod)("forEach",(function(t){i(a(this),t,arguments.length>1?arguments[1]:void 0)}))},3251:function(t,e,n){var r=n(6080),i=n(9565),a=n(5548),o=n(8981),s=n(6198),u=n(81),l=n(851),c=n(4209),f=n(1108),h=n(4644).aTypedArrayConstructor,d=n(5854);t.exports=function(t){var e,n,v,p,y,m,g,b,S=a(this),k=o(t),E=arguments.length,w=E>1?arguments[1]:void 0,D=void 0!==w,A=l(k);if(A&&!c(A))for(b=(g=u(k,A)).next,k=[];!(m=i(b,g)).done;)k.push(m.value);for(D&&E>2&&(w=r(w,arguments[2])),n=s(k),v=new(h(S))(n),p=f(v),e=0;n>e;e++)y=D?w(k[e],e):k[e],v[e]=p?d(y):+y;return v}},3575:function(t,e,n){n.d(e,{bW:function(){return it},Bw:function(){return pe},_7:function(){return Ce},sX:function(){return xe},Go:function(){return Be},qT:function(){return k},NQ:function(){return Q},K1:function(){return bt},pi:function(){return Pt},nm:function(){return c},Wy:function(){return R},dx:function(){return K},lX:function(){return Vt},c5:function(){return Mt},EC:function(){return ie}});n(2675),n(9463),n(2259),n(5700),n(3792),n(9572),n(2892),n(6099),n(7764),n(3772),n(2953);var r=n(3914),i=(n(3851),n(875),n(825),n(888),n(5472),n(7604));function a(t){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a(t)}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,u(r.key),r)}}function s(t,e,n){return(e=u(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function u(t){var e=function(t,e){if("object"!=a(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=a(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==a(e)?e:e+""}var l="BpkPlayerAdapter",c=function(){return t=function t(){var e=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),s(this,"handler",void 0),s(this,"webOSVersion",void 0),"undefined"!=typeof webOS&&webOS.deviceInfo((function(t){e.webOSVersion=t.sdkVersion}))},e=[{key:"getName",value:function(){return""}},{key:"getVersion",value:function(){return""}},{key:"getOSName",value:function(){return i.A.getInstance().osName}},{key:"getOSVersion",value:function(){return i.A.getInstance().osVersion}},{key:"getDeviceType",value:function(){return i.A.getInstance().deviceType}},{key:"getBitrate",value:function(){return-1}},{key:"getPosition",value:function(){return 0}},{key:"getDuration",value:function(){return 0}},{key:"getVolume",value:function(){return 1}},{key:"getCapabilities",value:function(){return{adTracking:!1}}},{key:"initSessionPlayerObjects",value:function(){}},{key:"releaseSessionPlayerObjects",value:function(){}},{key:"initDiversityPlugin",value:function(t,e){}},{key:"initDiversitySession",value:function(t){}},{key:"setDiversityManifest",value:function(t){}},{key:"releaseDiversitySession",value:function(){}},{key:"fillSessionReport",value:function(t){t.playerName=this.getName(),t.playerVersion=this.getVersion(),t.osName=this.getOSName(),t.osVersion=this.getOSVersion(),t.deviceType=this.getDeviceType()}},{key:"onStart",value:function(){var t=this.handler.sessionReport;this.fillSessionReport(t)}},{key:"onKeepaliveSessionReportUpdateRequested",value:function(t){this.fillSessionReport(t)}},{key:"onEndSessionReportUpdateRequested",value:function(t){this.fillSessionReport(t)}},{key:"notifyLoading",value:function(){void 0!==this.handler?this.handler.notifyLoading():r.g.e(l,"Implementation error: session.attachPlayer should be called prior to onLoading event. This event is called when the player starts buffering the first time.")}},{key:"notifyPrecacheEnded",value:function(){void 0!==this.handler?this.handler.notifyPrecacheEnded():r.g.e(l,"Implementation error: session.attachPlayer should be called prior to onPrecachedEnded event. This event is called when the player starts buffering chunks.")}},{key:"notifyFirstImage",value:function(){void 0!==this.handler?this.handler.notifyFirstImage(this.getBitrate(),this.getPosition()):r.g.e(l,"Implementation error: session.getURL(...) or session.getQuery()/session.startStreamingSession(...) should be called prior to onSessionStart event. This event is called when the first image is displayed.")}},{key:"notifyPause",value:function(){void 0!==this.handler?this.handler.notifyPause():r.g.e(l,"Implementation error: session.getURL(...) or session.getQuery()/session.startStreamingSession(...) should be called prior to onSessionPause event.")}},{key:"notifyResume",value:function(){void 0!==this.handler?this.handler.notifyResume():r.g.e(l,"Implementation error: session.getURL(...) or session.getQuery()/session.startStreamingSession(...) should be called prior to onSessionResume event.")}},{key:"notifyLayerSwitch",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.getBitrate();void 0!==this.handler?this.handler.notifyLayerSwitch(t):r.g.e(l,"Implementation error: session.getURL(...) or session.getQuery()/session.startStreamingSession(...) should be called prior to onLayerSwitch event.")}},{key:"notifySeek",value:function(t,e){void 0!==this.handler?this.handler.notifySeek(t,e):r.g.e(l,"Implementation error: session.getURL(...) or session.getQuery()/session.startStreamingSession(...) should be called prior to onSeek event.")}},{key:"notifyStallStart",value:function(){void 0!==this.handler?this.handler.notifyBufferingStart():r.g.e(l,"Implementation error: session.getURL(...) or session.getQuery()/session.startStreamingSession(...) should be called prior to onStallStart event.")}},{key:"notifyStallEnd",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];void 0!==this.handler?this.handler.notifyBufferingEnd(t):r.g.e(l,"Implementation error: session.getURL(...) or session.getQuery()/session.startStreamingSession(...) should be called prior to onStallEnd event.")}},{key:"notifyClose",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;void 0!==this.handler?this.handler.notifyClose(t):r.g.e(l,"Implementation error: session.attachPlayer should be called prior to onSessionStart event. This event is called when the player is closing.")}},{key:"notifyVolumeChanged",value:function(t){void 0!==this.handler?this.handler.notifyVolumeChanged(t):r.g.e(l,"Implementation error: session.getURL(...) or session.getQuery()/session.startStreamingSession(...) should be called prior to onVolumeChanged event.")}},{key:"notifyPlayerError",value:function(t,e){void 0!==this.handler?this.handler.notifyPlayerError(t,e):r.g.e(l,"Implementation error: session.getURL(...) or session.getQuery()/session.startStreamingSession(...) should be called prior to onPlayerError event.")}},{key:"attachPlayer",value:function(t,e){return r.g.e(l,"Implementation error: attachPlayer not implemented for this adapter."),!1}},{key:"detachPlayer",value:function(){r.g.e(l,"Implementation error: detachPlayer not implemented for this adapter.")}},{key:"attachSession",value:function(t){this.handler=t}},{key:"detachSession",value:function(){this.handler=void 0}},{key:"setStatusCode",value:function(t){void 0!==this.handler&&(this.handler.sessionReport.statusCode=t)}},{key:"setPlayerErrorCode",value:function(t){void 0!==this.handler&&(this.handler.sessionReport.playerErrorCode=String(t))}},{key:"setCustomParameter",value:function(t,e){void 0!==this.handler&&(void 0===this.handler.streamingSession?r.g.e(l,"Set custom parameter on player adapter is only available when using StreamingSession API.",this.handler.id):this.handler.streamingSession.setCustomParameter(t,e))}}],n=[{key:"checkPlayer",value:function(t,e){return r.g.e(l,"Implementation error: static checkPlayer not implemented for this adapter."),!1}}],e&&o(t.prototype,e),n&&o(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n}(),f=n(1473);function h(t){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},h(t)}function d(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,S(r.key),r)}}function v(t,e,n){return e=m(e),function(t,e){if(e&&("object"==h(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,p()?Reflect.construct(e,n||[],m(t).constructor):e.apply(t,n))}function p(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(p=function(){return!!t})()}function y(){return y="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!{}.hasOwnProperty.call(t,e)&&null!==(t=m(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(arguments.length<3?t:n):i.value}},y.apply(null,arguments)}function m(t){return m=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},m(t)}function g(t,e){return g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},g(t,e)}function b(t,e,n){return(e=S(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function S(t){var e=function(t,e){if("object"!=h(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=h(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==h(e)?e:e+""}var k=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),b(t=v(this,e),"player",void 0),b(t,"listener",void 0),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&g(t,e)}(e,t),n=e,r=[{key:"getName",value:function(){return this.player.getPlayerName()}},{key:"getVersion",value:function(){return this.player.getVersion()}},{key:"getOSName",value:function(){return this.player.getOSName()}},{key:"getOSVersion",value:function(){return this.player.getDeviceVersion()}},{key:"getDeviceType",value:function(){return this.player.getDeviceType()}},{key:"getBitrate",value:function(){return this.player.getCurrentBitrate()}},{key:"getPosition",value:function(){return this.player.getCurrentPosition()}},{key:"getDuration",value:function(){return this.player.getTotalDuration()}},{key:"getCapabilities",value:function(){return"function"==typeof this.player.getCapabilities?this.player.getCapabilities():(t=e,n="getCapabilities",r=this,a=y(m(1&(i=3)?t.prototype:t),n,r),2&i&&"function"==typeof a?function(t){return a.apply(r,t)}:a)([]);var t,n,r,i,a}},{key:"initDiversitySession",value:function(t){return this.player.initDiversitySession(t)}},{key:"attachPlayer",value:function(t,n){return!!e.checkPlayer(t,n)&&(this.player=t,this.listener=n,this.player.playerAdapter=this,!0)}},{key:"detachPlayer",value:function(){void 0!==this.player&&(this.player.playerAdapter=void 0),this.player=void 0,this.listener=void 0}}],i=[{key:"checkPlayer",value:function(t,e){return f.A.hasMethods(t,["getPlayerName","getVersion","getOSName","getDeviceVersion","getDeviceType","getCurrentPosition","getTotalDuration","getCurrentBitrate"])}}],r&&d(n.prototype,r),i&&d(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(c);n(5276),n(4554),n(8992),n(3949),n(3500);function E(t){return E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},E(t)}function w(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,D(r.key),r)}}function D(t){var e=function(t,e){if("object"!=E(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=E(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==E(e)?e:e+""}var A,P,I,T="BpkPlayerEventListener",R=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return e=t,i=[{key:"addPlayerAdapter",value:function(e){-1===t.playerAdapters.indexOf(e)&&t.playerAdapters.push(e)}},{key:"removePlayerAdapter",value:function(e){var n=t.playerAdapters.indexOf(e);-1!==n&&t.playerAdapters.splice(n,1)}},{key:"isStarted",value:function(){var e=t.playerAdapters;return e.length>0&&void 0!==e[e.length-1].handler&&e[e.length-1].handler.metricsManager.started}},{key:"isPlaying",value:function(){var e=t.playerAdapters;return e.length>0&&void 0!==e[e.length-1].handler&&e[e.length-1].handler.metricsManager.playing}},{key:"isBuffering",value:function(){var e=t.playerAdapters;return e.length>0&&void 0!==e[e.length-1].handler&&e[e.length-1].handler.metricsManager.buffering}},{key:"onSessionStart",value:function(){var e=t.playerAdapters;e.length>0?e.forEach((function(t){return t.notifyFirstImage()})):r.g.e(T,"Implementation error: SmartLib.attachPlayer(...) should be called prior to onSessionStart event. If you don't attach any player, please remove this call, SmartLib is now handling it automatically.")}},{key:"onSessionPause",value:function(){var e=t.playerAdapters;e.length>0?e.forEach((function(t){return t.notifyPause()})):r.g.e(T,"Implementation error: SmartLib.attachPlayer(...) should be called prior to onSessionPause event.")}},{key:"onSessionResume",value:function(){var e=t.playerAdapters;e.length>0?e.forEach((function(t){return t.notifyResume()})):r.g.e(T,"Implementation error: SmartLib.attachPlayer(...) should be called prior to onSessionResume event.")}},{key:"onLayerSwitch",value:function(e){var n=t.playerAdapters;n.length>0?n.forEach((function(t){return t.notifyLayerSwitch(e)})):r.g.e(T,"Implementation error: SmartLib.attachPlayer(...) should be called prior to onLayerSwitch event.")}},{key:"onSeek",value:function(e,n){var i=t.playerAdapters;i.length>0?i.forEach((function(t){return t.notifySeek(e,n)})):r.g.e(T,"Implementation error: SmartLib.attachPlayer(...) should be called prior to onSeek event.")}},{key:"onStallStart",value:function(){var e=t.playerAdapters;e.length>0?e.forEach((function(t){return t.notifyStallStart()})):r.g.e(T,"Implementation error: SmartLib.attachPlayer(...) should be called prior to onStallStart event.")}},{key:"onStallEnd",value:function(e){var n=t.playerAdapters;n.length>0?n.forEach((function(t){return t.notifyStallEnd(e)})):r.g.e(T,"Implementation error: SmartLib.attachPlayer(...) should be called prior to onStallEnd event.")}}],(n=null)&&w(e.prototype,n),i&&w(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,n,i}();function N(t,e,n){(function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")})(t,e),e.set(t,n)}function M(t,e,n){return t.set(O(t,e),n),n}function B(t,e){return t.get(O(t,e))}function O(t,e,n){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:n;throw new TypeError("Private element is not present on this object")}function x(t){return x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},x(t)}function C(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function L(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,_(r.key),r)}}function j(t,e,n){return e&&L(t.prototype,e),n&&L(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function _(t){var e=function(t,e){if("object"!=x(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=x(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==x(e)?e:e+""}A=R,I=[],(P=D(P="playerAdapters"))in A?Object.defineProperty(A,P,{value:I,enumerable:!0,configurable:!0,writable:!0}):A[P]=I;var U="BpkPlayerMgr",F=function(){return j((function t(){C(this,t)}),null,[{key:"loadPlayerAdapters",value:function(){return{}}}])}(),V=new WeakMap,W=new WeakMap,H=new WeakMap,K=function(){function t(){C(this,t),function(t,e,n){(e=_(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}(this,"smartLib",void 0),N(this,V,F),N(this,W,{}),N(this,H,void 0)}return j(t,[{key:"init",value:function(t){B(V,this)===F&&(M(V,this,t),M(W,this,B(V,this).loadPlayerAdapters()),r.g.v(U,"Compatible players: "+Object.keys(B(W,this))))}},{key:"release",value:function(){this.setPlayerAdapter(void 0)}},{key:"attachInstance",value:function(t){this.smartLib=t}},{key:"getAdapters",value:function(){return B(W,this)}},{key:"setPlayerAdapter",value:function(t){void 0!==B(H,this)&&B(H,this)!==t&&(r.g.i(U,"Player "+B(H,this).getName()+" detached"),B(H,this).detachPlayer()),B(H,this)!==t&&void 0!==t?t instanceof k&&(r.g.d(U,"Attaching generic player to SmartLib singleton"),R.addPlayerAdapter(t)):B(H,this)!==t&&void 0===t&&B(H,this)instanceof k&&(r.g.d(U,"Detaching generic player from SmartLib singleton"),R.removePlayerAdapter(B(H,this))),B(H,this)!==t?M(H,this,t):void 0!==t&&r.g.i(U,"Player "+B(H,this).getName()+" already attached"),void 0!==t&&r.g.i(U,"Player "+t.getName()+" attached")}},{key:"getPlayerAdapter",value:function(){return B(H,this)}}],[{key:"getInstance",value:function(){return z._||(z._=new t),z._}}])}(),z={_:void 0};function Y(t){return Y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Y(t)}function q(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,G(r.key),r)}}function G(t){var e=function(t,e){if("object"!=Y(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=Y(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Y(e)?e:e+""}var J="BpkGenericPlayerApi",Q=function(){return function(t,e,n){return e&&q(t.prototype,e),n&&q(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),function(t,e,n){(e=G(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}(this,"playerAdapter",void 0)}),[{key:"getPlayerName",value:function(){return""}},{key:"getVersion",value:function(){return""}},{key:"getOSName",value:function(){return""}},{key:"getDeviceVersion",value:function(){return""}},{key:"getDeviceType",value:function(){return""}},{key:"getCurrentPosition",value:function(){return 0}},{key:"getTotalDuration",value:function(){return 0}},{key:"getCurrentBitrate",value:function(){return 0}},{key:"getCapabilities",value:function(){return{}}},{key:"notifyPrecacheEnded",value:function(){void 0!==this.playerAdapter?this.playerAdapter.notifyPrecacheEnded():r.g.e(J,"Implementation error: session.attachPlayer(...) should be called prior to notifyPrecacheEnded. This event is called when the player starts buffering chunks.")}},{key:"notifyFirstImage",value:function(){void 0!==this.playerAdapter?this.playerAdapter.notifyFirstImage():r.g.e(J,"Implementation error: session.attachPlayer(...) should be called prior to notifyFirstImage. This event is called when the first image is displayed.")}},{key:"notifyPause",value:function(){void 0!==this.playerAdapter?this.playerAdapter.notifyPause():r.g.e(J,"Implementation error: session.attachPlayer(...) should be called prior to notifyPause.")}},{key:"notifyResume",value:function(){void 0!==this.playerAdapter?this.playerAdapter.notifyResume():r.g.e(J,"Implementation error: session.attachPlayer(...) should be called prior to notifyResume.")}},{key:"notifyLayerSwitch",value:function(t){void 0!==this.playerAdapter?this.playerAdapter.notifyLayerSwitch(t):r.g.e(J,"Implementation error: session.attachPlayer(...) should be called prior to notifyLayerSwitch.")}},{key:"notifyStallStart",value:function(){void 0!==this.playerAdapter?this.playerAdapter.notifyStallStart():r.g.e(J,"Implementation error: session.attachPlayer(...) should be called prior to notifyStallStart.")}},{key:"notifyStallEnd",value:function(t){void 0!==this.playerAdapter?this.playerAdapter.notifyStallEnd(t):r.g.e(J,"Implementation error: session.attachPlayer(...) should be called prior to notifyStallEnd.")}},{key:"notifySeek",value:function(t,e){void 0!==this.playerAdapter?this.playerAdapter.notifySeek(t,e):r.g.e(J,"Implementation error: session.attachPlayer(...) should be called prior to notifySeek.")}},{key:"setPlayerErrorCode",value:function(t){void 0!==this.playerAdapter?this.playerAdapter.setPlayerErrorCode(t):r.g.e(J,"Implementation error: session.attachPlayer(...) should be called prior to setPlayerErrorCode. This has to be called before stopStreamingSession when the player error code as a string.")}}])}(),X=(n(3110),n(3362),n(9449),n(2762),n(977)),Z=n(8140);function $(t){return $="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$(t)}function tt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,nt(r.key),r)}}function et(t,e,n){return(e=nt(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function nt(t){var e=function(t,e){if("object"!=$(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=$(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==$(e)?e:e+""}var rt="BpkAnalyticsRequestMgr",it=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return function(t,e,n){return e&&tt(t.prototype,e),n&&tt(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}(t,[{key:"buildAnalyticsAddress",value:function(e){return(e=e.trim()).endsWith("/")||(e+="/"),e+=t.METRICS_RECEIVER_PATH}},{key:"endSession",value:function(e,n){var i=this,a=e.sessionReport;if(0!==n.analyticsAddress.length){var o=n.analyticsAddress.split(","),s=[];return o.forEach((function(o){var u;0===o.indexOf(t.NOCACHE_PREFIX)?(r.g.d(rt,t.NOCACHE_PREFIX+" option used, no need to store the report in cache"),o=i.buildAnalyticsAddress(o.substring(t.NOCACHE_PREFIX.length))):(o=i.buildAnalyticsAddress(o),u=Z.A.analyticsModule.CacheManager.getInstance().storeSessionReport(o,a.toEndSessionJSON(),!0,Date.now(),!0)),r.g.i(rt,"Posting metrics to "+o,e.id);var l=i.postSession(o,a.toEndSessionJSON(),n).then((function(t){return r.g.i(rt,"Send session metrics ended with status code "+t.httpStatus+" ("+o+")",e.id),t.httpStatus>=200&&t.httpStatus<300?(void 0!==u&&Z.A.analyticsModule.CacheManager.getInstance().deleteSessionReport(u),Z.A.analyticsModule.CacheManager.getInstance().push(),!0):(void 0!==u&&Z.A.analyticsModule.CacheManager.getInstance().update(u,"sending",!1),!1)}));s.push(l)})),Promise.all(s).then((function(){r.g.d(rt,"Send session metrics done",e.id)}))}return r.g.w(rt,"Metrics platform URL is null, metrics won't be posted anywhere.",e.id),Promise.resolve(!1)}},{key:"endSessionCache",value:function(t,e,n){return 0!==t.length?(r.g.i(rt,"Posting cache to "+t),this.postSession(t,e,n).then((function(e){return r.g.i(rt,"Send cache ended with status code "+e.httpStatus+" ("+t+")"),e.httpStatus>=200&&e.httpStatus<300}))):(r.g.w(rt,"Metrics platform URL is null, cache won't be posted anywhere."),Promise.resolve(!1))}},{key:"postSession",value:function(e,n,i){return new Promise((function(a,o){var s={Connection:"close"};void 0!==i.userAgent&&(s["User-Agent"]=i.userAgent);var u=JSON.stringify(n);r.g.v(rt,"Executing POST request with body: "+u),X.A.getInstance().asyncPost(e,s,u,t.POST_SESSION_REQUEST_TIMEOUT,(function(t){var e=0;void 0!==t.statusCode&&(e=parseInt(t.statusCode,10)),a({httpStatus:e})}))}))}}],[{key:"getInstance",value:function(){return at._||(at._=new t),at._}}])}();et(it,"METRICS_RECEIVER_PATH","fservices/metricsReceiver"),et(it,"POST_SESSION_REQUEST_TIMEOUT",5e3),et(it,"NOCACHE_PREFIX","nocache=");var at={_:void 0},ot=(n(8781),n(1489),n(1630),n(2170),n(5044),n(1920),n(1694),n(9955),n(3206),n(4496),n(6651),n(2887),n(9369),n(6812),n(8995),n(1575),n(6072),n(8747),n(8845),n(9423),n(7301),n(373),n(1405),n(3684),n(1839),n(1706),n(6847),n(7058));function st(t){return st="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},st(t)}function ut(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,ct(r.key),r)}}function lt(t,e,n){return(e=ct(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ct(t){var e=function(t,e){if("object"!=st(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=st(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==st(e)?e:e+""}var ft=function(){return function(t,e,n){return e&&ut(t.prototype,e),n&&ut(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),lt(this,"index",void 0),lt(this,"buffer",void 0),this.index=0,this.buffer=new Uint8Array(e)}),[{key:"put",value:function(t){return this.buffer[this.index++]=t,this}},{key:"putChar",value:function(t){return this.buffer[this.index++]=(65280&t)>>8,this.buffer[this.index++]=255&t,this}},{key:"putByteBuffer",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.buffer.length,n=t.buffer;return this.buffer.length>=this.index+e&&(this.buffer.set(n,this.index),this.index+=e),this}},{key:"set",value:function(t,e){return this.buffer[e]=t,this}},{key:"data",value:function(){return this.buffer}},{key:"base64",value:function(){return ot.A.bufferToBase64(this)}},{key:"length",value:function(){return this.index}},{key:"capacity",value:function(){return this.buffer.length}},{key:"remaining",value:function(){return this.capacity()-this.length()}},{key:"toString",value:function(){return ot.A.bufferToString(this.buffer,this.index)+"(length:"+this.length()+")"}}])}();lt(ft,"EMPTY",new ft(0));var ht=n(4836);n(4782),n(6910);function dt(t){return dt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},dt(t)}function vt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,gt(r.key),r)}}function pt(t,e,n){return e&&vt(t.prototype,e),n&&vt(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function yt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function mt(t,e,n){return(e=gt(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function gt(t){var e=function(t,e){if("object"!=dt(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=dt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==dt(e)?e:e+""}var bt=pt((function t(e){yt(this,t),mt(this,"redirectionTime",void 0),mt(this,"startupTime",void 0),mt(this,"completion",void 0),mt(this,"playbackType",void 0),mt(this,"playbackDuration",void 0),mt(this,"sessionDuration",void 0),mt(this,"contentDuration",void 0),mt(this,"stallsNumber",void 0),mt(this,"maxStallDuration",void 0),mt(this,"totalStallsDuration",void 0),mt(this,"rebufferingsNumber",void 0),mt(this,"maxRebufferingDuration",void 0),mt(this,"totalRebufferingDuration",void 0),mt(this,"minBitrate",void 0),mt(this,"maxBitrate",void 0),mt(this,"averageBitrate",void 0),mt(this,"layerSwitchesNumber",void 0),mt(this,"timeSpentPerLayer",void 0),mt(this,"preStartupTime",void 0),void 0!==e?(this.redirectionTime=e.redirectionTime,this.startupTime=e.startupTime,this.completion=e.completion,this.playbackType=e.playbackType,this.playbackDuration=e.playbackDuration,this.sessionDuration=e.sessionDuration,this.contentDuration=e.contentDuration,this.stallsNumber=e.stallsNumber,this.maxStallDuration=e.maxStallDuration,this.totalStallsDuration=e.totalStallsDuration,this.rebufferingsNumber=e.rebufferingsNumber,this.maxRebufferingDuration=e.maxRebufferingDuration,this.totalRebufferingDuration=e.totalRebufferingDuration,this.minBitrate=e.minBitrate,this.maxBitrate=e.maxBitrate,this.averageBitrate=e.averageBitrate,this.layerSwitchesNumber=e.layerSwitchesNumber,this.timeSpentPerLayer=JSON.parse(JSON.stringify(e.timeSpentPerLayer)),this.preStartupTime=e.preStartupTime):(this.redirectionTime=0,this.startupTime=0,this.completion=0,this.playbackType="",this.playbackDuration=0,this.sessionDuration=0,this.contentDuration=0,this.stallsNumber=0,this.maxStallDuration=0,this.totalStallsDuration=0,this.rebufferingsNumber=0,this.maxRebufferingDuration=0,this.totalRebufferingDuration=0,this.minBitrate=0,this.maxBitrate=0,this.averageBitrate=0,this.layerSwitchesNumber=0,this.timeSpentPerLayer={},this.preStartupTime=0)}));mt(bt,"PLAYBACK_TYPE_LIVE","LIVE"),mt(bt,"PLAYBACK_TYPE_VOD","VOD");var St=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new bt;yt(this,t),mt(this,"metrics",void 0),mt(this,"watchingRanges",void 0),this.metrics=e,this.reset()}return pt(t,[{key:"setRedirectionTime",value:function(t){return this.metrics.redirectionTime=t,this}},{key:"setStartupTime",value:function(t){return this.metrics.startupTime=t,this}},{key:"setSessionDuration",value:function(t){return this.metrics.sessionDuration=t,this}},{key:"setContentDuration",value:function(t){return this.metrics.contentDuration=t,this}},{key:"setPlaybackType",value:function(t){return this.metrics.playbackType=t,this}},{key:"setFirstLayer",value:function(t){return t>0&&(this.metrics.maxBitrate=t,this.metrics.minBitrate=t),this}},{key:"setPreStartupTime",value:function(t){return this.metrics.preStartupTime=t,this}},{key:"addTimeSpentPerLayer",value:function(t,e){if((t=Math.round(t))>0){var n=this.metrics.timeSpentPerLayer[t];void 0===n&&(n=0),n+=e,this.metrics.timeSpentPerLayer[t]=n,this.metrics.maxBitrate<t&&(this.metrics.maxBitrate=t),(this.metrics.minBitrate>t||0===this.metrics.minBitrate)&&(this.metrics.minBitrate=t)}return this}},{key:"addLayerSwitch",value:function(){return this.metrics.layerSwitchesNumber++,this}},{key:"addPlaybackDuration",value:function(t){return this.metrics.playbackDuration+=t,this}},{key:"addWatchingRange",value:function(t,e){return t<e&&(r.g.v("BpkMetrics","Add watching range, duration "+(e-t)+"ms"),this.watchingRanges.push({start:t,end:e,duration:e-t})),this}},{key:"addStall",value:function(t){return this.metrics.stallsNumber++,this.metrics.totalStallsDuration+=t,this.metrics.maxStallDuration<t&&(this.metrics.maxStallDuration=t),this}},{key:"addRebuffering",value:function(t){return this.metrics.rebufferingsNumber++,this.metrics.totalRebufferingDuration+=t,this.metrics.maxRebufferingDuration<t&&(this.metrics.maxRebufferingDuration=t),this}},{key:"clone",value:function(){var e=new t(new bt(this.metrics));return e.watchingRanges=JSON.parse(JSON.stringify(this.watchingRanges)),e}},{key:"computeCompletion",value:function(){if(this.metrics.playbackType===bt.PLAYBACK_TYPE_LIVE||0===this.metrics.contentDuration)return 1e3;var t=JSON.parse(JSON.stringify(this.watchingRanges)),e=t.slice(0);if(1===t.length)return Math.floor(1e3*e[0].duration/this.metrics.contentDuration);if(0===t.length)return 0;var n=[],r=null;e=e.sort((function(t,e){return parseInt(t.start,10)>parseInt(e.start,10)?1:parseInt(t.start,10)<parseInt(e.start,10)?-1:0})),n.push(e[0]);for(var i=1;i<e.length;i++)r=n[n.length-1],parseInt(r.end,10)<parseInt(e[i].start,10)?n.push(e[i]):parseInt(r.end,10)<parseInt(e[i].end,10)&&(r.end=parseInt(e[i].end,10),r.duration=r.end-r.start,n.pop(),n.push(r));for(var a=0,o=0;o<n.length;o++)n[o].duration=parseInt(n[o].end,10)-parseInt(n[o].start,10),a+=parseInt(n[o].duration,10);this.watchingRanges=n;var s=Math.floor(1e3*a/this.metrics.contentDuration);return s>1e3?1e3:s}},{key:"build",value:function(){var t=0,e=0;for(var n in this.metrics.timeSpentPerLayer){var r=this.metrics.timeSpentPerLayer[n];t+=n*r,e+=r}return 0!==e&&(this.metrics.averageBitrate=Math.round(t/e)),this.metrics.completion=this.computeCompletion(),this.metrics.completion<0?this.metrics.completion=0:this.metrics.completion>1e3&&(this.metrics.completion=1e3),this.metrics.startupTime+=this.metrics.preStartupTime,this.metrics}},{key:"reset",value:function(){return this.watchingRanges=[],this}}])}();function kt(t){return kt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},kt(t)}function Et(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Dt(r.key),r)}}function wt(t,e,n){return(e=Dt(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Dt(t){var e=function(t,e){if("object"!=kt(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=kt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==kt(e)?e:e+""}var At="BpkMetricsMgr",Pt=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),wt(this,"handler",void 0),wt(this,"builder",void 0),wt(this,"playerAdapter",void 0),wt(this,"timeline",void 0),wt(this,"started",void 0),wt(this,"playing",void 0),wt(this,"buffering",void 0),wt(this,"seeking",void 0),wt(this,"bitrate",void 0),wt(this,"redirectionStartDate",void 0),wt(this,"playingStartDate",void 0),wt(this,"bufferingStartDate",void 0),wt(this,"lastLayerSwitchDate",void 0),wt(this,"lastSeekDate",void 0),wt(this,"playOnNextBufferingEnd",void 0),wt(this,"startPosition",void 0),this.handler=e,this.builder=new St,this.playerAdapter=n,this.timeline=this.handler.sessionReport.timeline,this.started=!1,this.playing=!1,this.buffering=!1,this.seeking=!1,this.bitrate=-1,this.redirectionStartDate=Date.now(),this.playingStartDate=Date.now(),this.bufferingStartDate=0,this.lastLayerSwitchDate=0,this.lastSeekDate=0,this.playOnNextBufferingEnd=!1,this.startPosition=0}return function(t,e,n){return e&&Et(t.prototype,e),n&&Et(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}(t,[{key:"onStart",value:function(){this.redirectionStartDate=Date.now()}},{key:"onRedirectionEnd",value:function(){this.builder.setRedirectionTime(Date.now()-this.redirectionStartDate),this.playingStartDate=Date.now()}},{key:"onPrecacheEnded",value:function(){this.playingStartDate=Date.now()}},{key:"onFirstImage",value:function(t,e){r.g.i(At,"Streaming session started ("+t+"kbps,"+ht.A.formatTime(e)+")",this.handler.id),this.started=!0,this.playing=!0,this.startPosition=e,this.builder.setContentDuration(this.playerAdapter.getDuration()).setPlaybackType(this.playerAdapter.getDuration()<=0?bt.PLAYBACK_TYPE_LIVE:bt.PLAYBACK_TYPE_VOD),this.builder.setStartupTime(Date.now()-this.redirectionStartDate),this.playingStartDate=Date.now(),this.builder.setFirstLayer(t),this.bitrate=t,this.lastLayerSwitchDate=Date.now()}},{key:"onLayerSwitch",value:function(t){var e;(r.g.d(At,"Player changed layer to "+t+"kbps",this.handler.id),this.started)&&(this.builder.addTimeSpentPerLayer(this.bitrate,Date.now()-this.lastLayerSwitchDate),this.lastLayerSwitchDate=Date.now(),this.bitrate!==t&&this.bitrate>0&&(r.g.d(At,"Player changed layer, before: "+this.bitrate+"kbps, now: "+t+"kbps",this.handler.id),null===(e=this.timeline)||void 0===e||e.pushEventBitrate(Mt.LayerSwitch,t),this.builder.addLayerSwitch()));this.bitrate=t}},{key:"onPause",value:function(){var t;this.playing&&(r.g.d(At,"Player is paused",this.handler.id),null===(t=this.timeline)||void 0===t||t.pushEvent(Mt.Pause),this.playing=!1,this.buffering||this.builder.addPlaybackDuration(Date.now()-this.playingStartDate),this.builder.addWatchingRange(this.startPosition,this.playerAdapter.getPosition()))}},{key:"onResume",value:function(){var t;this.started&&!this.playing&&(r.g.d(At,"Player is resumed",this.handler.id),null===(t=this.timeline)||void 0===t||t.pushEvent(Mt.Resume),this.playing=!0,this.buffering=!1,this.playingStartDate=Date.now())}},{key:"onBufferingStart",value:function(){if(!this.buffering&&this.started){var e;r.g.d(At,"Player is buffering",this.handler.id),null===(e=this.timeline)||void 0===e||e.pushEvent(Mt.BufferingStart);var n=Date.now();this.buffering=!0,this.seeking&&n-this.lastSeekDate>t.MAX_TIME_BETWEEN_SEEK_AND_REBUFFERING&&(this.seeking=!1),this.bufferingStartDate=n,this.playOnNextBufferingEnd=!1,this.playing&&this.builder.addPlaybackDuration(n-this.playingStartDate)}}},{key:"onBufferingEnd",value:function(t){var e=Date.now();t&&this.playOnNextBufferingEnd&&!this.buffering&&(this.playingStartDate=e,this.playOnNextBufferingEnd=!1),this.started&&this.bufferingStartDate>0&&(this.buffering=!1,t?this.playingStartDate=e:this.playOnNextBufferingEnd=!0,this.seeking?(this.seeking=!1,this.handler.notifyRebufferingEnd()):this.handler.notifyStallEnd(),this.bufferingStartDate=0)}},{key:"onStallEnd",value:function(){var t,e=Date.now()-this.bufferingStartDate;this.builder.addStall(e),null===(t=this.timeline)||void 0===t||t.pushEvent(Mt.StallStop),r.g.d(At,"Player stalled for "+e+"ms",this.handler.id)}},{key:"onRebufferingEnd",value:function(){var t,e=Date.now()-this.bufferingStartDate;this.builder.addRebuffering(e),null===(t=this.timeline)||void 0===t||t.pushEvent(Mt.RebufferingStop),r.g.d(At,"Player buffered for "+e+"ms",this.handler.id)}},{key:"onSeek",value:function(t,e){var n;r.g.d(At,"Player seeked from "+ht.A.formatTime(t)+" to "+ht.A.formatTime(e),this.handler.id),null===(n=this.timeline)||void 0===n||n.pushEventPositionStartEnd(Mt.Seek,t,e),this.builder.addWatchingRange(this.startPosition,t),this.startPosition=e,this.seeking=!0,this.lastSeekDate=Date.now()}},{key:"onStop",value:function(t){if(this.started){var e=Date.now();this.playing&&!this.buffering&&this.builder.addPlaybackDuration(e-this.playingStartDate),this.buffering&&this.onBufferingEnd(!1),this.playing&&(this.builder.addWatchingRange(this.startPosition,this.playerAdapter.getPosition()),this.playing=!1),this.builder.setSessionDuration(e-this.redirectionStartDate).addTimeSpentPerLayer(this.bitrate,e-this.lastLayerSwitchDate),this.started=!1}}},{key:"onStartSessionReportUpdateRequested",value:function(t){t.metrics=this.builder.build()}},{key:"onKeepaliveSessionReportUpdateRequested",value:function(t){var e=Date.now(),n=this.builder.clone();if(this.playing&&!this.buffering&&n.addPlaybackDuration(e-this.playingStartDate),this.started&&this.bufferingStartDate>0){var r=Date.now()-this.bufferingStartDate;this.seeking?n.addRebuffering(r):n.addStall(r)}this.playing&&n.addWatchingRange(this.startPosition,this.playerAdapter.getPosition()),n.setSessionDuration(e-this.redirectionStartDate).addTimeSpentPerLayer(this.bitrate,e-this.lastLayerSwitchDate);var i=this.handler.getCustomParameters().pre_startup_time,a=0;void 0===i||isNaN(i)||(a=parseInt(i,10)),n.setPreStartupTime(a),t.metrics=n.build()}},{key:"onEndSessionReportUpdateRequested",value:function(t){var e=Date.now();this.builder.setSessionDuration(e-this.redirectionStartDate);var n=this.handler.getCustomParameters().pre_startup_time,r=0;void 0===n||isNaN(n)||(r=parseInt(n,10)),this.builder.setPreStartupTime(r),t.metrics=this.builder.build()}}])}();function It(t){return It="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},It(t)}function Tt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Nt(r.key),r)}}function Rt(t,e,n){return(e=Nt(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Nt(t){var e=function(t,e){if("object"!=It(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=It(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==It(e)?e:e+""}wt(Pt,"MAX_TIME_BETWEEN_SEEK_AND_REBUFFERING",1e3);var Mt={None:0,Start:1,Stop:2,RedirectionEnd:3,FirstImage:4,Pause:5,Resume:6,BufferingStart:7,StallStart:8,StallStop:9,RebufferingStart:10,RebufferingStop:11,Seek:12,LayerSwitch:13,AdBreakStart:14,AdBreakStop:15,NetworkAvailable:16,NetworkLost:17,Mute:18,Unmute:19,Multicast:20,Unicast:21,PrecacheEnded:22,DataSummary:144,EmptySummary:145},Bt=[Mt.RedirectionEnd,Mt.Pause,Mt.Resume,Mt.BufferingStart,Mt.StallStart,Mt.StallStop,Mt.RebufferingStart,Mt.RebufferingStop,Mt.AdBreakStart,Mt.NetworkLost,Mt.Mute,Mt.Unmute,Mt.Multicast,Mt.Unicast,Mt.PrecacheEnded],Ot=[Mt.Start],xt=[Mt.LayerSwitch],Ct=[Mt.FirstImage],Lt=[Mt.Seek],jt=[Mt.Stop],_t=[Mt.AdBreakStop],Ut=[Mt.NetworkAvailable],Ft="BpkSessionTrackerEvent",Vt=function(){return function(t,e,n){return e&&Tt(t.prototype,e),n&&Tt(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),Rt(this,"eventId",void 0),Rt(this,"eventDate",void 0),Rt(this,"eventData",void 0),Rt(this,"startStopEvent",void 0),Rt(this,"startEventId",void 0),Rt(this,"stopEventId",void 0),Rt(this,"triggerStartEventId",void 0),Rt(this,"keepLastOnly",void 0),Rt(this,"attachEventId",void 0),Rt(this,"attachMaxDurationBeforeStart",void 0),Rt(this,"startEvent",void 0),Rt(this,"stopEvent",void 0),Rt(this,"attachedEvent",void 0),Rt(this,"compressed",void 0),Rt(this,"compressedData",void 0),this.eventId=e,this.eventDate=Date.now(),this.eventData={},this.startStopEvent=!1,this.startEventId=0,this.stopEventId=0,this.triggerStartEventId=0,this.keepLastOnly=!1,this.attachEventId=0,this.attachMaxDurationBeforeStart=-1,this.startEvent=null,this.stopEvent=null,this.attachedEvent=null,this.addDataSizeInTimeline=!1,this.compressed=!1,this.compressedData=void 0,this.updateMetadata()}),[{key:"updateMetadata",value:function(){switch(this.startStopEvent=!1,this.startEventId=Mt.None,this.stopEventId=Mt.None,this.triggerStartEventId=Mt.None,this.keepLastOnly=!1,this.attachEventId=Mt.None,this.attachMaxDurationBeforeStart=-1,this.eventId){case Mt.None:break;case Mt.Start:this.startStopEvent=!0,this.startEventId=Mt.Start,this.stopEventId=Mt.Stop,this.addDataSizeInTimeline=!0;break;case Mt.Stop:this.startStopEvent=!0,this.startEventId=Mt.Start,this.stopEventId=Mt.Stop;break;case Mt.RedirectionEnd:this.startStopEvent=!1,this.attachEventId=Mt.Start;break;case Mt.FirstImage:this.startStopEvent=!1,this.keepLastOnly=!0,this.attachEventId=Mt.RedirectionEnd;break;case Mt.Pause:case Mt.Resume:this.startStopEvent=!0,this.startEventId=Mt.Pause,this.stopEventId=Mt.Resume;break;case Mt.StallStart:this.startStopEvent=!0,this.startEventId=Mt.StallStart,this.stopEventId=Mt.StallStop;break;case Mt.StallStop:this.startStopEvent=!0,this.startEventId=Mt.StallStart,this.stopEventId=Mt.StallStop,this.triggerStartEventId=Mt.BufferingStart;break;case Mt.RebufferingStart:this.startStopEvent=!0,this.startEventId=Mt.RebufferingStart,this.stopEventId=Mt.RebufferingStop;break;case Mt.RebufferingStop:this.startStopEvent=!0,this.startEventId=Mt.RebufferingStart,this.stopEventId=Mt.RebufferingStop,this.triggerStartEventId=Mt.BufferingStart,this.attachEventId=Mt.Seek,this.attachMaxDurationBeforeStart=Pt.MAX_TIME_BETWEEN_SEEK_AND_REBUFFERING;break;case Mt.AdBreakStart:this.startStopEvent=!0,this.startEventId=Mt.AdBreakStart,this.stopEventId=Mt.AdBreakStop;break;case Mt.AdBreakStop:this.startStopEvent=!0,this.startEventId=Mt.AdBreakStart,this.stopEventId=Mt.AdBreakStop,this.attachEventId=Mt.Seek,this.attachMaxDurationBeforeStart=0;break;case Mt.BufferingStart:case Mt.Seek:case Mt.LayerSwitch:case Mt.NetworkAvailable:case Mt.NetworkLost:this.startStopEvent=!1;break;case Mt.Mute:case Mt.Unmute:case Mt.Multicast:case Mt.Unicast:case Mt.PrecacheEnded:this.startStopEvent=!1,this.addDataSizeInTimeline=!0}}},{key:"getEventName",value:function(){switch(this.eventId){case Mt.None:return"None";case Mt.Start:return"Start";case Mt.Stop:return"Stop";case Mt.RedirectionEnd:return"RedirectionEnd";case Mt.FirstImage:return"FirstImage";case Mt.Pause:return"Pause";case Mt.Resume:return"Resume";case Mt.BufferingStart:return"BufferingStart";case Mt.StallStart:return"StallStart";case Mt.StallStop:return"StallStop";case Mt.RebufferingStart:return"RebufferingStart";case Mt.RebufferingStop:return"RebufferingStop";case Mt.Seek:return"Seek";case Mt.LayerSwitch:return"LayerSwitch";case Mt.AdBreakStart:return"AdBreakStart";case Mt.AdBreakStop:return"AdBreakStop";case Mt.NetworkAvailable:return"NetworkAvailable";case Mt.NetworkLost:return"NetworkLost";case Mt.Mute:return"Mute";case Mt.Unmute:return"Unmute";case Mt.Multicast:return"Multicast";case Mt.Unicast:return"Unicast";case Mt.PrecacheEnded:return"PrecacheEnded"}return""}},{key:"isStartEvent",value:function(){return this.startStopEvent&&this.eventId===this.startEventId}},{key:"isStopEvent",value:function(){return this.startStopEvent&&this.eventId===this.stopEventId}},{key:"addEventData",value:function(t,e){"string"==typeof t&&(this.eventData[t]=e)}},{key:"toData",value:function(t){for(var e=Math.abs(this.eventDate-t)/100,n=ot.A.floor(e/65535),r=e%65535,i=Object.keys(this.eventData).length,a=3*n+1+2+2*i+(this.addDataSizeInTimeline?1:0),o=new ft(a),s=0;s<n;s++)o.put(Mt.None),o.put(255),o.put(255);switch(o.put(this.eventId),o.putChar(r),this.addDataSizeInTimeline&&o.put(2*i),this.eventId){case Mt.Start:var u=parseInt(this.eventData.networkType,10),l=parseInt(this.eventData.muteState,10);o.putChar(u),o.putChar(l);break;case Mt.Stop:var c=parseInt(this.eventData.statusCode,10);o.putChar(c);break;case Mt.FirstImage:var f=parseInt(this.eventData.bitrate,10),h=parseInt(this.eventData.position,10);o.putChar(f),o.putChar(h);break;case Mt.Seek:var d=parseInt(this.eventData.positionStart,10),v=parseInt(this.eventData.positionEnd,10);o.putChar(d),o.putChar(v);break;case Mt.LayerSwitch:var p=parseInt(this.eventData.bitrate,10);o.putChar(p);break;case Mt.AdBreakStop:var y=parseInt(this.eventData.progress,10);o.putChar(y);break;case Mt.NetworkAvailable:var m=parseInt(this.eventData.state,10);o.putChar(m)}return o}},{key:"formatDate",value:function(t){return ht.A.formatDate(new Date(t))}},{key:"print",value:function(){for(var t in r.g.v(Ft,"   |"),r.g.v(Ft,"   --\x3e "+this.getEventName()+" -> "+(!0===this.compressed?"compressed":"not compressed")+" -> "+this.eventDate),r.g.v(Ft,"   |      date: "+this.formatDate(this.eventDate)),this.eventData)r.g.v(Ft,"   |      "+t+": "+this.eventData[t]);this.isStartEvent()&&null!==this.stopEvent&&r.g.v(Ft,"   |      stop event: "+this.stopEvent.getEventName()+" "+this.stopEvent.eventDate),this.isStopEvent()&&null!==this.startEvent&&r.g.v(Ft,"   |      start event: "+this.startEvent.getEventName()+" "+this.startEvent.eventDate),null!==this.attachedEvent&&r.g.v(Ft,"   |      attached event: "+this.attachedEvent.getEventName()+" "+this.attachedEvent.eventDate)}},{key:"toString",value:function(){return this.getEventName()+" ("+this.formatDate(this.eventDate)+")"}}])}();function Wt(t){return Wt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Wt(t)}function Ht(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,zt(r.key),r)}}function Kt(t,e,n){return(e=zt(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function zt(t){var e=function(t,e){if("object"!=Wt(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=Wt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Wt(e)?e:e+""}var Yt=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),Kt(this,"timeline",void 0),Kt(this,"minIndex",void 0),Kt(this,"initialBitrate",void 0),Kt(this,"builder",void 0),Kt(this,"summaryDuration",void 0),Kt(this,"pauseDuration",void 0),Kt(this,"nbNetworkDisconnected",void 0),Kt(this,"nbNetworkWifi",void 0),Kt(this,"nbNetworkMobile",void 0),Kt(this,"nbNetworkEthernet",void 0),Kt(this,"lastNetworkState",void 0),Kt(this,"muteDuration",void 0),Kt(this,"lastMuteState",void 0),this.timeline=e,this.minIndex=n,this.initialBitrate=void 0,this.builder=void 0,this.summaryDuration=0,this.pauseDuration=0,this.nbNetworkDisconnected=0,this.nbNetworkWifi=0,this.nbNetworkMobile=0,this.nbNetworkEthernet=0,this.lastNetworkState=void 0,this.muteDuration=0,this.lastMuteState=void 0,this.init()}return function(t,e,n){return e&&Ht(t.prototype,e),n&&Ht(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}(t,[{key:"init",value:function(){for(var t=this.minIndex;t>=0;t--){var e=this.timeline.events[t];switch(e.eventId){case Mt.LayerSwitch:case Mt.FirstImage:void 0===this.initialBitrate&&(this.initialBitrate=parseInt(e.eventData.bitrate,10));break;case Mt.Start:void 0===this.lastNetworkState&&(this.lastNetworkState=parseInt(e.eventData.networkType,10)),void 0===this.lastMuteState&&(this.lastMuteState=parseInt(e.eventData.muteState,10));break;case Mt.NetworkAvailable:void 0===this.lastNetworkState&&(this.lastNetworkState=parseInt(e.eventData.state,10));break;case Mt.NetworkLost:void 0===this.lastNetworkState&&(this.lastNetworkState=0);break;case Mt.Mute:void 0===this.lastMuteState&&(this.lastMuteState=1);break;case Mt.Unmute:void 0===this.lastMuteState&&(this.lastMuteState=0)}}void 0!==this.initialBitrate&&0!==this.initialBitrate||(this.initialBitrate=-1),void 0===this.lastNetworkState&&(this.lastNetworkState=1),void 0===this.lastMuteState&&(this.lastMuteState=0)}},{key:"update",value:function(t){if(!(this.minIndex>=this.timeline.events.length||t>=this.timeline.events.length)){var e,n,r,i=this.timeline.events[this.minIndex],a=this.timeline.events[t],o=this.initialBitrate,s=i.eventDate,u=1===this.lastMuteState?i.eventDate:-1;this.builder=new St,this.summaryDuration=a.eventDate-i.eventDate,this.pauseDuration=0,this.nbNetworkDisconnected=0,this.nbNetworkWifi=0,this.nbNetworkMobile=0,this.nbNetworkEthernet=0,this.muteDuration=0;for(var l=this.minIndex;l<=t;l++){var c=this.timeline.events[l];switch(c.eventId){case Mt.Pause:!1!==e&&void 0!==e||(null!==c.stopEvent&&c.stopEvent.eventDate<=a.eventDate&&(this.pauseDuration+=c.stopEvent.eventDate-c.eventDate),e=!0);break;case Mt.Resume:void 0===e&&(this.pauseDuration+=c.eventDate-i.eventDate),e=!1;break;case Mt.StallStart:!1!==n&&void 0!==n||(null!==c.stopEvent&&c.stopEvent.eventDate<=a.eventDate&&this.builder.addStall(c.stopEvent.eventDate-c.eventDate),n=!0);break;case Mt.StallStop:void 0===n&&this.builder.addStall(c.eventDate-i.eventDate),n=!1;break;case Mt.RebufferingStart:!1!==r&&void 0!==r||(null!==c.stopEvent&&c.stopEvent.eventDate<=a.eventDate&&this.builder.addRebuffering(c.stopEvent.eventDate-c.eventDate),r=!0);break;case Mt.RebufferingStop:void 0===r&&this.builder.addRebuffering(c.eventDate-i.eventDate),r=!1;break;case Mt.LayerSwitch:this.builder.addLayerSwitch(),-1!==o&&this.builder.addTimeSpentPerLayer(o,c.eventDate-s),o=parseInt(c.eventData.bitrate,10),s=c.eventDate;break;case Mt.NetworkAvailable:this.lastNetworkState=parseInt(c.eventData.state,10),this.lastNetworkState>=10&&this.lastNetworkState<20?this.nbNetworkWifi++:this.lastNetworkState>=20&&this.lastNetworkState<30?this.nbNetworkMobile++:this.lastNetworkState>=30&&this.lastNetworkState<40&&this.nbNetworkEthernet++;break;case Mt.NetworkLost:this.lastNetworkState=0,this.nbNetworkDisconnected++;break;case Mt.Mute:this.lastMuteState=1,u=c.eventDate;break;case Mt.Unmute:this.lastMuteState=0,-1!==u&&(this.muteDuration+=c.eventDate-u,u=-1)}}-1!==o&&this.builder.addTimeSpentPerLayer(o,a.eventDate-s),-1!==u&&(this.muteDuration+=a.eventDate-u),this.builder.build()}}},{key:"data",value:function(){if(void 0===this.builder)return ft.EMPTY;var e=new ft(t.BUFFER_SIZE),n=this.builder.metrics;return e.put(Mt.DataSummary).putChar(Math.round(this.summaryDuration/1e3)).put(t.BUFFER_SIZE-2-1-1).putChar(this.pauseDuration/100).put(n.stallsNumber).putChar(n.totalStallsDuration/100).put(n.rebufferingsNumber).putChar(n.totalRebufferingDuration/100).put(n.layerSwitchesNumber).putChar(n.minBitrate).putChar(n.maxBitrate).putChar(n.averageBitrate).put(this.nbNetworkDisconnected).put(this.nbNetworkWifi).put(this.nbNetworkMobile).put(this.nbNetworkEthernet).putChar(this.lastNetworkState).putChar(Math.round(this.muteDuration/1e3)).put(this.lastMuteState),e}},{key:"toString",value:function(){if(void 0===this.builder)return"no data";var t=this.builder.metrics;return this.summaryDuration+", "+this.pauseDuration+", "+t.minBitrate+", "+t.maxBitrate+", "+t.layerSwitchesNumber+", "+t.averageBitrate+", "+t.stallsNumber+", "+t.totalStallsDuration+", "+t.rebufferingsNumber+", "+t.totalRebufferingDuration+", "+this.nbNetworkDisconnected+", "+this.nbNetworkWifi+", "+this.nbNetworkMobile+", "+this.nbNetworkEthernet+", "+this.lastNetworkState+", "+this.muteDuration+", "+this.lastMuteState}}])}();function qt(t){return qt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},qt(t)}function Gt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Qt(r.key),r)}}function Jt(t,e,n){return(e=Qt(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Qt(t){var e=function(t,e){if("object"!=qt(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=qt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==qt(e)?e:e+""}Kt(Yt,"BUFFER_SIZE",28);var Xt="BpkSessionTrackerEncoder",Zt=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.DEFAULT_BUFFER_SIZE,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.DEFAULT_END_EVENTS_DURATION,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.DEFAULT_END_EVENTS_NUMBER;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),Jt(this,"timeline",void 0),Jt(this,"maxBufferSize",void 0),Jt(this,"maxEndEventsDuration",void 0),Jt(this,"maxEndEventsNumber",void 0),Jt(this,"events",void 0),Jt(this,"uncompressedData",void 0),Jt(this,"uncompressedDataFull",void 0),Jt(this,"compressedStartData",void 0),Jt(this,"minSummaryIndex",void 0),Jt(this,"maxEndBufferSize",void 0),Jt(this,"summary",void 0),this.maxBufferSize=n,this.maxEndEventsDuration=r,this.maxEndEventsNumber=i,this.timeline=e,this.events=this.timeline.events,this.uncompressedData=new ft(this.maxBufferSize),this.uncompressedDataFull=!1,this.compressedStartData=void 0,this.minSummaryIndex=0,this.maxEndBufferSize=this.maxBufferSize,this.summary=void 0}return function(t,e,n){return e&&Gt(t.prototype,e),n&&Gt(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}(t,[{key:"onEventAdded",value:function(t){if(!this.uncompressedDataFull){var e=t;this.events.length>=2&&(e=this.events[this.events.length-2]),t.compressedData=t.toData(e.eventDate),t.compressed=!0,t.compressedData.capacity()<=this.uncompressedData.remaining()?this.uncompressedData.putByteBuffer(t.compressedData):(this.uncompressedDataFull=!0,this.compressedStartData=new ft(this.maxBufferSize))}}},{key:"onEventUpdated",value:function(){this.uncompressedData=new ft(this.maxBufferSize);for(var t=0;t<this.events.length;t++){void 0!==this.events[t].compressedData&&this.uncompressedData.putByteBuffer(this.events[t].compressedData)}}},{key:"process",value:function(){var t=Date.now();if(!this.uncompressedDataFull)return r.g.d(Xt,"Timeline encoder generated uncompressed data ("+this.events.length+" events, "+this.uncompressedData.length()+" bytes)"),this.uncompressedData;for(var e,n="",i=[],a=0,o=this.events.length-1;o>=0;o--){var s=this.events[o];if(!(t-s.eventDate<this.maxEndEventsDuration&&i.length<this.maxEndEventsNumber)){e=o;break}var u=void 0;if(o<this.events.length-1){var l=this.events[o+1];u=s.toData(l.eventDate)}else u=s.toData(s.eventDate);if(!(a+u.length()<=this.maxEndBufferSize)){e=o;break}i.push(u),a+=u.length()}if(0===this.compressedStartData.length()){this.minSummaryIndex=e;for(var c=this.maxBufferSize-Yt.BUFFER_SIZE-a,f=0;f<e;f++){var h=this.events[f];if(this.compressedStartData.length()+h.compressedData.length()>c){this.minSummaryIndex=f;break}this.compressedStartData.putByteBuffer(h.compressedData)}this.maxEndBufferSize=this.compressedStartData.remaining()-Yt.BUFFER_SIZE,this.uncompressedData=void 0,n+="first iteration, "}var d=new ft(this.maxBufferSize);if(d.putByteBuffer(this.compressedStartData,this.compressedStartData.length()),this.minSummaryIndex===e)d.put(Mt.EmptySummary),n+="no summary";else{void 0===this.summary&&(this.summary=new Yt(this.timeline,this.minSummaryIndex)),this.summary.update(e);var v=this.summary.data();d.putByteBuffer(v),n+="summary {"+this.summary.toString()+"}"}for(var p=0;p<i.length;p++)d.putByteBuffer(i[p]);return r.g.d(Xt,"Timeline encoder generated compressed data ("+this.events.length+" events before encoding, "+(this.minSummaryIndex+i.length)+" events after encoding, "+d.length()+" bytes, ~"+(Date.now()-t)+"ms, "+n+")"),d}},{key:"extend",value:function(){if(this.uncompressedDataFull)r.g.w(Xt,"Failed to extend size from "+t.DEFAULT_BUFFER_SIZE+" to 768");else{this.maxBufferSize=768,this.maxEndEventsDuration=4e4,this.maxEndEventsNumber=40;var e=this.uncompressedData;this.uncompressedData=new ft(this.maxBufferSize),this.uncompressedData.putByteBuffer(e,e.length()),r.g.v(Xt,"Extended size from "+t.DEFAULT_BUFFER_SIZE+" to 768")}}}])}();function $t(t){return $t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$t(t)}function te(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,ne(r.key),r)}}function ee(t,e,n){return(e=ne(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ne(t){var e=function(t,e){if("object"!=$t(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=$t(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==$t(e)?e:e+""}Jt(Zt,"DEFAULT_BUFFER_SIZE",384),Jt(Zt,"DEFAULT_END_EVENTS_DURATION",15e3),Jt(Zt,"DEFAULT_END_EVENTS_NUMBER",20);var re="BpkSessionTrackerTimeline",ie=function(){return function(t,e,n){return e&&te(t.prototype,e),n&&te(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),ee(this,"session",void 0),ee(this,"startDate",void 0),ee(this,"stopDate",void 0),ee(this,"events",void 0),ee(this,"firstImageWithoutBitrateEvent",void 0),ee(this,"encoder",void 0),this.startDate=null,this.stopDate=null,this.events=[],this.firstImageWithoutBitrateEvent=null,this.encoder=new Zt(this)}),[{key:"pushEvent",value:function(t){if(this.checkType(t,Bt)){var e=this.createEvent(t);this.encoder.onEventAdded(e)}}},{key:"pushEventStart",value:function(t,e,n){if(this.checkType(t,Ot)){var r=this.createEvent(t);r.addEventData("networkType",e),r.addEventData("muteState",n),this.encoder.onEventAdded(r)}}},{key:"pushEventBitrate",value:function(t,e){if(this.checkType(t,xt)){var n=this.createEvent(t);n.addEventData("bitrate",e),null!==this.firstImageWithoutBitrateEvent&&(this.firstImageWithoutBitrateEvent.addEventData("bitrate",e),this.firstImageWithoutBitrateEvent=null),this.encoder.onEventAdded(n)}}},{key:"pushEventBitratePosition",value:function(t,e,n){if(this.checkType(t,Ct)){var r=this.createEvent(t);r.addEventData("bitrate",e),r.addEventData("position",n),t===Mt.FirstImage&&e<=0&&(this.firstImageWithoutBitrateEvent=r),this.encoder.onEventAdded(r)}}},{key:"pushEventPositionStartEnd",value:function(t,e,n){if(this.checkType(t,Lt)){var r=this.createEvent(t);r.addEventData("positionStart",e),r.addEventData("positionEnd",n),this.encoder.onEventAdded(r)}}},{key:"pushEventStatusCode",value:function(t,e){if(this.checkType(t,jt)){var n=this.createEvent(t);n.addEventData("statusCode",e),this.encoder.onEventAdded(n)}}},{key:"pushEventProgress",value:function(t,e){if(this.checkType(t,_t)){var n=this.createEvent(t);n.addEventData("progress",e),this.encoder.onEventAdded(n)}}},{key:"pushEventState",value:function(t,e){if(this.checkType(t,Ut)){var n=this.createEvent(t);n.addEventData("state",e),this.encoder.onEventAdded(n)}}},{key:"createEvent",value:function(t){var e=new Vt(t);return r.g.v(re,"Creating event "+e.getEventName()+"..."),this.applyKeepLastOnly(e),this.events.push(e),this.updateTimelineProperties(e),this.reconciliateStopWithStartEvent(e),e}},{key:"checkType",value:function(t,e){return e.indexOf(t)>=0||(r.g.v(re,"Can't push event '"+t+"' to timeline, invalid parameters"),!1)}},{key:"applyKeepLastOnly",value:function(t){if(t.keepLastOnly)for(var e=this.events.length-1;e>=0;e--){if(this.events[e].eventId===t.eventId)return this.events.splice(e,1),void this.encoder.onEventUpdated()}}},{key:"attachEvent",value:function(t){if(t.attachEventId>Mt.None){var e=-1;null!==t.startEvent&&-1!==t.attachMaxDurationBeforeStart&&(e=t.startEvent.eventDate-t.attachMaxDurationBeforeStart);for(var n=this.events.length-1;n>=0;n--){var r=this.events[n];if(r.eventId===t.attachEventId&&(-1===e||r.eventDate>=e))return void(t.attachedEvent=r)}}}},{key:"updateTimelineProperties",value:function(t){switch(t.eventId){case Mt.Start:this.startDate=Date.now();break;case Mt.Stop:this.stopDate=Date.now()}}},{key:"reconciliateStopWithStartEvent",value:function(t){if(t.isStopEvent())for(var e=this.events.length-1;e>=0;e--){var n=this.events[e];if(n.eventId===t.startEventId)return n.stopEvent=t,void(t.startEvent=n);if(n.eventId===t.triggerStartEventId)return n.eventId=t.startEventId,n.startStopEvent=!0,n.startEventId=t.startEventId,n.stopEventId=t.stopEventId,void 0!==n.compressedData&&(n.compressedData.set(n.eventId,0),this.encoder.onEventUpdated()),n.stopEvent=t,void(t.startEvent=n)}}},{key:"onStart",value:function(t,e){this.pushEventStart(Mt.Start,t,e)}},{key:"onRedirectionEnd",value:function(){this.pushEvent(Mt.RedirectionEnd)}},{key:"onPrecacheEnded",value:function(){this.pushEvent(Mt.PrecacheEnded)}},{key:"onFirstImage",value:function(t,e){this.pushEventBitratePosition(Mt.FirstImage,t,e)}},{key:"onStop",value:function(t){this.pushEventStatusCode(Mt.Stop,t)}},{key:"onForeground",value:function(){r.g.d(re,"Received event onForeground but ignored")}},{key:"onBackground",value:function(){r.g.d(re,"Received event onBackground but ignored")}},{key:"onNetworkAvailable",value:function(t){r.g.v(re,"Received event onNetworkAvailable type:"+t),this.pushEventState(Mt.NetworkAvailable,t)}},{key:"onNetworkLost",value:function(){r.g.d(re,"Received event onNetworkLost"),this.pushEvent(Mt.NetworkLost)}},{key:"onMute",value:function(){r.g.d(re,"Received event onMute"),this.pushEvent(Mt.Mute)}},{key:"onUnmute",value:function(){r.g.d(re,"Received event onUnmute"),this.pushEvent(Mt.Unmute)}},{key:"onMulticastUsed",value:function(){this.pushEvent(Mt.Multicast)}},{key:"onUnicastUsed",value:function(){this.pushEvent(Mt.Unicast)}},{key:"data",value:function(){return this.encoder.process()}},{key:"formatDate",value:function(t){return ht.A.formatDate(new Date(t))}},{key:"print",value:function(){r.g.v(re,"Timeline (startDate:"+this.formatDate(this.startDate)+", stopDate:"+this.formatDate(this.stopDate)+")");for(var t=0;t<this.events.length;t++)this.events[t].print()}},{key:"toString",value:function(){for(var t=[],e=0;e<this.events.length;e++)t.push(this.events[e].toString());return t.join(", ")}}])}(),ae=n(491);function oe(t){return oe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},oe(t)}function se(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,de(r.key),r)}}function ue(t,e,n){return e=fe(e),function(t,e){if(e&&("object"==oe(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,le()?Reflect.construct(e,n||[],fe(t).constructor):e.apply(t,n))}function le(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(le=function(){return!!t})()}function ce(){return ce="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!{}.hasOwnProperty.call(t,e)&&null!==(t=fe(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(arguments.length<3?t:n):i.value}},ce.apply(null,arguments)}function fe(t){return fe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},fe(t)}function he(t,e){return he=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},he(t,e)}function de(t){var e=function(t,e){if("object"!=oe(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=oe(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==oe(e)?e:e+""}var ve="BpkAnalyticsSession",pe=function(t){function e(t,n){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e,n){(e=de(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}(r=ue(this,e,[t,n]),"started",void 0),r.getURL=void 0,r.getQuery=void 0,r.startStreamingSession=void 0,r.stopAnalyticsSession=r.stopStreamingSession,r.stopStreamingSession=void 0,r.started=!1,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&he(t,e)}(e,t),function(t,e,n){return e&&se(t.prototype,e),n&&se(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}(e,[{key:"attachPlayer",value:function(t,n){!function(t,e,n,r){var i=ce(fe(1&r?t.prototype:t),e,n);return 2&r&&"function"==typeof i?function(t){return i.apply(n,t)}:i}(e,"attachPlayer",this,3)([t,n]),void 0===this.handler&&(this.handler=this.smartLib.sessionManager.createSessionHandler(this),this.handler.initPlayerAdapter(),this.handler.addListener(this))}},{key:"onLoading",value:function(){r.g.i(ve,"Session is loading...",this.id),!1===this.started?(this.started=!0,this.handler.adSession=this.adSession,void 0!==this.adSession&&(this.adSession.handler=this.handler),this.handler.start("").catch((function(t){}))):r.g.d(ve,"Exception: onLoading, the session is already running.",this.id)}},{key:"updateSessionReportValue",value:function(t){var e=this.handler.sessionReport;void 0!==this.customParameters["report."+t]&&(e[t]=this.customParameters["report."+t])}},{key:"onClose",value:function(t){r.g.i(ve,"Session is closing (status code: "+t+")...",this.id),void 0!==this.handler.sessionReport.metrics&&(this.handler.sessionReport.metrics.redirectionTime=-1),this.updateSessionReportValue("requestedURL"),this.updateSessionReportValue("redirectedURL"),this.stopAnalyticsSession(t)}}])}(ae.f),ye=(n(2008),n(2062),n(1392),n(4520),n(1454),n(7565));function me(t,e,n){return e=ke(e),function(t,e){if(e&&("object"==Ae(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,ge()?Reflect.construct(e,n||[],ke(t).constructor):e.apply(t,n))}function ge(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(ge=function(){return!!t})()}function be(t,e,n,r){var i=Se(ke(1&r?t.prototype:t),e,n);return 2&r&&"function"==typeof i?function(t){return i.apply(n,t)}:i}function Se(){return Se="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!{}.hasOwnProperty.call(t,e)&&null!==(t=ke(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(arguments.length<3?t:n):i.value}},Se.apply(null,arguments)}function ke(t){return ke=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},ke(t)}function Ee(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&we(t,e)}function we(t,e){return we=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},we(t,e)}function De(t,e,n){return(e=Re(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ae(t){return Ae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ae(t)}function Pe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ie(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Re(r.key),r)}}function Te(t,e,n){return e&&Ie(t.prototype,e),n&&Ie(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Re(t){var e=function(t,e){if("object"!=Ae(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=Ae(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Ae(e)?e:e+""}var Ne="BpkCacheMgr",Me=function(){return Te((function t(){Pe(this,t)}),[{key:"set",value:function(t,e){}},{key:"get",value:function(t){}},{key:"delete",value:function(t){}},{key:"keys",value:function(){return[]}}])}(),Be=function(){function t(){Pe(this,t),De(this,"smartLib",void 0),De(this,"cacheHandler",void 0),this.cacheHandler=new Me}return Te(t,[{key:"init",value:function(t){this.cacheHandler=t}},{key:"attachInstance",value:function(t){var e=this;r.g.d(Ne,"Init cache manager..."),this.smartLib=t,this.getCacheData("report-").forEach((function(t){void 0!==t&&(t.value.sending=!1,e.store(t.key,t.value))}))}},{key:"get",value:function(t){var e=this.cacheHandler.get(t);if(void 0!==e)try{return e.startsWith("{")||(e=ot.A.base64ToString(e)),e=JSON.parse(e)}catch(e){return r.g.e(Ne,"Error while parsing "+t+" ("+e.message+")"),void this.cacheHandler.delete(t)}}},{key:"store",value:function(t,e){this.cacheHandler.set(t,ot.A.stringToBase64(JSON.stringify(e)))}},{key:"update",value:function(t,e,n){var i=this.get(t);void 0!==i&&(r.g.d(Ne,"Updating "+t+", set "+e+" to "+n),i[e]=n,this.store(t,i))}},{key:"storeSessionReport",value:function(t,e){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Date.now(),a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o="report-"+ot.A.randomIntFromInterval(1e6,9999999)+i;r.g.i(Ne,"Storing "+o+" in cache...");var s={version:this.smartLib.getVersion(),date:i,sending:a,address:t,report:e};return this.store(o,s),!0===n&&this.clean(),o}},{key:"deleteSessionReport",value:function(t){r.g.i(Ne,"Deleting "+t+" from cache..."),this.cacheHandler.delete(t)}},{key:"storeKeepaliveReport",value:function(t,e){r.g.i(Ne,"Storing keepalive-"+e.session_id+" in cache...");var n={version:this.smartLib.getVersion(),date:Date.now(),address:t,report:e};this.store("keepalive-"+e.session_id,n)}},{key:"deleteKeepaliveReport",value:function(t){r.g.i(Ne,"Deleting keepalive-"+t+" from cache..."),this.cacheHandler.delete("keepalive-"+t)}},{key:"getCacheData",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this.cacheHandler.keys().filter((function(t){return t.startsWith(e)})).map((function(e){var n=t.get(e);return void 0===n?void 0:{key:e,value:n}}))}},{key:"push",value:function(){var t=this;this.clean(),r.g.i(Ne,"Sending cache content if any..."),this.getCacheData("report-").forEach((function(e){var n;void 0!==e&&(!0===e.value.sending?r.g.d(Ne,"Sending cache "+e.key+" already in progress..."):(r.g.d(Ne,"Sending cache "+e.key+"..."),e.value.sending=!0,e.value.report.delay=Math.round((Date.now()-e.value.date)/1e3),t.store(e.key,e.value),null===(n=Z.A.analyticsModule)||void 0===n||n.AnalyticsRequestManager.getInstance().endSessionCache(e.value.address,e.value.report,t.smartLib.getParameters()).then((function(n){!0===n?t.deleteSessionReport(e.key):(e.value.sending=!1,t.store(e.key,e.value))}))))}))}},{key:"cleanExpiredData",value:function(e){var n=this;return this.getCacheData(e).map((function(e){return void 0!==e&&(void 0===e.value.date||Date.now()-e.value.date>t.CACHE_DURATION)?(r.g.d(Ne,"Cleaning "+e.key+" (cache duration reached)..."),void n.cacheHandler.delete(e.key)):e})).filter((function(t){return void 0!==t})).sort((function(t,e){return e.value.date-t.value.date}))}},{key:"clean",value:function(){var e=this;r.g.i(Ne,"Clean expired data if any...");var n=this.cleanExpiredData("keepalive-"),i=this.smartLib.sessionManager.sessions.map((function(t){var e;return null===(e=t.handler)||void 0===e||null===(e=e.sessionReport)||void 0===e?void 0:e.sessionId}));n.forEach((function(t){-1===i.indexOf(t.value.report.session_id)&&(r.g.d(Ne,"Migrating keepalive "+t.value.report.session_id+" to session..."),t.value.report.timeout=!0,t.value.address.split(",").forEach((function(n){0===n.indexOf(it.NOCACHE_PREFIX)?r.g.d(Ne,it.NOCACHE_PREFIX+" option used, no need to store the report in cache"):e.storeSessionReport(it.getInstance().buildAnalyticsAddress(n),t.value.report,!1,t.value.date)})),e.cacheHandler.delete(t.key))}));var a=this.cleanExpiredData("report-");if(a.length>=t.CACHE_LIMIT)for(var o=t.CACHE_LIMIT;o<a.length;o++)this.deleteSessionReport(a[o].key)}},{key:"release",value:function(){this.clean()}}],[{key:"getInstance",value:function(){return Oe._||(Oe._=new t),Oe._}}])}();De(Be,"CACHE_DURATION",1728e5),De(Be,"CACHE_LIMIT",20);var Oe={_:void 0},xe=function(t){function e(t){var n;return Pe(this,e),De(n=me(this,e,[t]),"analyticsAddress",void 0),n.analyticsAddress=n.handler.smartLib.getParameters().analyticsAddress,r.g.d(Ne,"Using cache keepalive manager...",n.handler.id),n}return Ee(e,t),Te(e,[{key:"start",value:function(){be(e,"start",this,3)([]),this.store()}},{key:"callback",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.store(),!0===e&&this.next()}},{key:"stop",value:function(){be(e,"stop",this,3)([]),this.delete()}},{key:"store",value:function(){var t;null===(t=Z.A.analyticsModule)||void 0===t||t.CacheManager.getInstance().storeKeepaliveReport(this.analyticsAddress,this.handler.sessionReport.toEndSessionJSON())}},{key:"delete",value:function(){var t;null===(t=Z.A.analyticsModule)||void 0===t||t.CacheManager.getInstance().deleteKeepaliveReport(this.handler.sessionReport.sessionId)}}])}(ye.E),Ce=function(t){function e(t){var n;return Pe(this,e),De(n=me(this,e,[t]),"cacheKeepaliveManager",void 0),n.cacheKeepaliveManager=new xe(t),n.cacheKeepaliveManager.next=function(){},n}return Ee(e,t),Te(e,[{key:"start",value:function(){be(e,"start",this,3)([]),this.cacheKeepaliveManager.store()}},{key:"callback",value:function(t){this.cacheKeepaliveManager.callback(t),be(e,"callback",this,3)([t])}},{key:"stop",value:function(){be(e,"stop",this,3)([]),this.cacheKeepaliveManager.delete()}}])}(ye.q);Z.A.analyticsModule={PlayerManager:K,PlayerAdapter:c,GenericPlayerAdapter:k,PlayerEventListener:R,GenericPlayerApi:Q,AnalyticsRequestManager:it,SessionTrackerTimeline:ie,SessionTrackerEvent:Vt,SessionTrackerEvents:Mt,Metrics:bt,MetricsManager:Pt,AnalyticsSession:pe,CacheManager:Be,CacheKeepaliveManager:xe,BroadpeakCDNCacheKeepaliveManager:Ce}},3602:function(t){var e=4503599627370496;t.exports=function(t){return t+e-e}},3684:function(t,e,n){var r=n(4644).exportTypedArrayMethod,i=n(9039),a=n(4576),o=n(9504),s=a.Uint8Array,u=s&&s.prototype||{},l=[].toString,c=o([].join);i((function(){l.call({})}))&&(l=function(){return c(this)});var f=u.toString!==l;r("toString",l,f)},3839:function(t,e,n){var r=n(6080),i=n(7055),a=n(8981),o=n(6198),s=function(t){var e=1===t;return function(n,s,u){for(var l,c=a(n),f=i(c),h=o(f),d=r(s,u);h-- >0;)if(d(l=f[h],h,c))switch(t){case 0:return l;case 1:return h}return e?-1:void 0}};t.exports={findLast:s(0),findLastIndex:s(1)}},4373:function(t,e,n){var r=n(8981),i=n(5610),a=n(6198);t.exports=function(t){for(var e=r(this),n=a(e),o=arguments.length,s=i(o>1?arguments[1]:void 0,n),u=o>2?arguments[2]:void 0,l=void 0===u?n:i(u,n);l>s;)e[s++]=t;return e}},4496:function(t,e,n){var r=n(4644),i=n(9617).includes,a=r.aTypedArray;(0,r.exportTypedArrayMethod)("includes",(function(t){return i(a(this),t,arguments.length>1?arguments[1]:void 0)}))},4644:function(t,e,n){var r,i,a,o=n(7811),s=n(3724),u=n(4576),l=n(4901),c=n(34),f=n(9297),h=n(6955),d=n(6823),v=n(6699),p=n(6840),y=n(2106),m=n(1625),g=n(2787),b=n(2967),S=n(8227),k=n(3392),E=n(1181),w=E.enforce,D=E.get,A=u.Int8Array,P=A&&A.prototype,I=u.Uint8ClampedArray,T=I&&I.prototype,R=A&&g(A),N=P&&g(P),M=Object.prototype,B=u.TypeError,O=S("toStringTag"),x=k("TYPED_ARRAY_TAG"),C="TypedArrayConstructor",L=o&&!!b&&"Opera"!==h(u.opera),j=!1,_={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},U={BigInt64Array:8,BigUint64Array:8},F=function(t){var e=g(t);if(c(e)){var n=D(e);return n&&f(n,C)?n[C]:F(e)}},V=function(t){if(!c(t))return!1;var e=h(t);return f(_,e)||f(U,e)};for(r in _)(a=(i=u[r])&&i.prototype)?w(a)[C]=i:L=!1;for(r in U)(a=(i=u[r])&&i.prototype)&&(w(a)[C]=i);if((!L||!l(R)||R===Function.prototype)&&(R=function(){throw new B("Incorrect invocation")},L))for(r in _)u[r]&&b(u[r],R);if((!L||!N||N===M)&&(N=R.prototype,L))for(r in _)u[r]&&b(u[r].prototype,N);if(L&&g(T)!==N&&b(T,N),s&&!f(N,O))for(r in j=!0,y(N,O,{configurable:!0,get:function(){return c(this)?this[x]:void 0}}),_)u[r]&&v(u[r],x,r);t.exports={NATIVE_ARRAY_BUFFER_VIEWS:L,TYPED_ARRAY_TAG:j&&x,aTypedArray:function(t){if(V(t))return t;throw new B("Target is not a typed array")},aTypedArrayConstructor:function(t){if(l(t)&&(!b||m(R,t)))return t;throw new B(d(t)+" is not a typed array constructor")},exportTypedArrayMethod:function(t,e,n,r){if(s){if(n)for(var i in _){var a=u[i];if(a&&f(a.prototype,t))try{delete a.prototype[t]}catch(n){try{a.prototype[t]=e}catch(t){}}}N[t]&&!n||p(N,t,n?e:L&&P[t]||e,r)}},exportTypedArrayStaticMethod:function(t,e,n){var r,i;if(s){if(b){if(n)for(r in _)if((i=u[r])&&f(i,t))try{delete i[t]}catch(t){}if(R[t]&&!n)return;try{return p(R,t,n?e:L&&R[t]||e)}catch(t){}}for(r in _)!(i=u[r])||i[t]&&!n||p(i,t,e)}},getTypedArrayConstructor:F,isView:function(t){if(!c(t))return!1;var e=h(t);return"DataView"===e||f(_,e)||f(U,e)},isTypedArray:V,TypedArray:R,TypedArrayPrototype:N}},5044:function(t,e,n){var r=n(4644),i=n(4373),a=n(5854),o=n(6955),s=n(9565),u=n(9504),l=n(9039),c=r.aTypedArray,f=r.exportTypedArrayMethod,h=u("".slice);f("fill",(function(t){var e=arguments.length;c(this);var n="Big"===h(o(this),0,3)?a(t):+t;return s(i,this,n,e>1?arguments[1]:void 0,e>2?arguments[2]:void 0)}),l((function(){var t=0;return new Int8Array(2).fill({valueOf:function(){return t++}}),1!==t})))},5370:function(t,e,n){var r=n(6198);t.exports=function(t,e,n){for(var i=0,a=arguments.length>2?n:r(e),o=new t(a);a>i;)o[i]=e[i++];return o}},5472:function(t,e,n){var r=n(6518),i=n(4576),a=n(687);r({global:!0},{Reflect:{}}),a(i.Reflect,"Reflect",!0)},5617:function(t,e,n){var r=n(3164);t.exports=Math.fround||function(t){return r(t,1.1920928955078125e-7,34028234663852886e22,11754943508222875e-54)}},5759:function(t,e,n){var r=n(4644),i=n(6198),a=n(1291),o=r.aTypedArray;(0,r.exportTypedArrayMethod)("at",(function(t){var e=o(this),n=i(e),r=a(t),s=r>=0?r:n+r;return s<0||s>=n?void 0:e[s]}))},5823:function(t,e,n){var r=n(6518),i=n(4576),a=n(9565),o=n(3724),s=n(2805),u=n(4644),l=n(6346),c=n(679),f=n(6980),h=n(6699),d=n(2087),v=n(8014),p=n(7696),y=n(8229),m=n(8319),g=n(6969),b=n(9297),S=n(6955),k=n(34),E=n(757),w=n(2360),D=n(1625),A=n(2967),P=n(8480).f,I=n(3251),T=n(9213).forEach,R=n(7633),N=n(2106),M=n(4913),B=n(7347),O=n(5370),x=n(1181),C=n(3167),L=x.get,j=x.set,_=x.enforce,U=M.f,F=B.f,V=i.RangeError,W=l.ArrayBuffer,H=W.prototype,K=l.DataView,z=u.NATIVE_ARRAY_BUFFER_VIEWS,Y=u.TYPED_ARRAY_TAG,q=u.TypedArray,G=u.TypedArrayPrototype,J=u.isTypedArray,Q="BYTES_PER_ELEMENT",X="Wrong length",Z=function(t,e){N(t,e,{configurable:!0,get:function(){return L(this)[e]}})},$=function(t){var e;return D(H,t)||"ArrayBuffer"===(e=S(t))||"SharedArrayBuffer"===e},tt=function(t,e){return J(t)&&!E(e)&&e in t&&d(+e)&&e>=0},et=function(t,e){return e=g(e),tt(t,e)?f(2,t[e]):F(t,e)},nt=function(t,e,n){return e=g(e),!(tt(t,e)&&k(n)&&b(n,"value"))||b(n,"get")||b(n,"set")||n.configurable||b(n,"writable")&&!n.writable||b(n,"enumerable")&&!n.enumerable?U(t,e,n):(t[e]=n.value,t)};o?(z||(B.f=et,M.f=nt,Z(G,"buffer"),Z(G,"byteOffset"),Z(G,"byteLength"),Z(G,"length")),r({target:"Object",stat:!0,forced:!z},{getOwnPropertyDescriptor:et,defineProperty:nt}),t.exports=function(t,e,n){var o=t.match(/\d+/)[0]/8,u=t+(n?"Clamped":"")+"Array",l="get"+t,f="set"+t,d=i[u],g=d,b=g&&g.prototype,S={},E=function(t,e){U(t,e,{get:function(){return function(t,e){var n=L(t);return n.view[l](e*o+n.byteOffset,!0)}(this,e)},set:function(t){return function(t,e,r){var i=L(t);i.view[f](e*o+i.byteOffset,n?m(r):r,!0)}(this,e,t)},enumerable:!0})};z?s&&(g=e((function(t,e,n,r){return c(t,b),C(k(e)?$(e)?void 0!==r?new d(e,y(n,o),r):void 0!==n?new d(e,y(n,o)):new d(e):J(e)?O(g,e):a(I,g,e):new d(p(e)),t,g)})),A&&A(g,q),T(P(d),(function(t){t in g||h(g,t,d[t])})),g.prototype=b):(g=e((function(t,e,n,r){c(t,b);var i,s,u,l=0,f=0;if(k(e)){if(!$(e))return J(e)?O(g,e):a(I,g,e);i=e,f=y(n,o);var h=e.byteLength;if(void 0===r){if(h%o)throw new V(X);if((s=h-f)<0)throw new V(X)}else if((s=v(r)*o)+f>h)throw new V(X);u=s/o}else u=p(e),i=new W(s=u*o);for(j(t,{buffer:i,byteOffset:f,byteLength:s,length:u,view:new K(i)});l<u;)E(t,l++)})),A&&A(g,q),b=g.prototype=w(G)),b.constructor!==g&&h(b,"constructor",g),_(b).TypedArrayConstructor=g,Y&&h(b,Y,u);var D=g!==d;S[u]=g,r({global:!0,constructor:!0,forced:D,sham:!z},S),Q in g||h(g,Q,o),Q in b||h(b,Q,o),R(u)}):t.exports=function(){}},5854:function(t,e,n){var r=n(2777),i=TypeError;t.exports=function(t){var e=r(t,"number");if("number"==typeof e)throw new i("Can't convert number to bigint");return BigInt(e)}},6072:function(t,e,n){var r=n(4644),i=n(926).right,a=r.aTypedArray;(0,r.exportTypedArrayMethod)("reduceRight",(function(t){var e=arguments.length;return i(a(this),t,e,e>1?arguments[1]:void 0)}))},6346:function(t,e,n){var r=n(4576),i=n(9504),a=n(3724),o=n(7811),s=n(350),u=n(6699),l=n(2106),c=n(6279),f=n(9039),h=n(679),d=n(1291),v=n(8014),p=n(7696),y=n(5617),m=n(8490),g=n(2787),b=n(2967),S=n(4373),k=n(7680),E=n(3167),w=n(7740),D=n(687),A=n(1181),P=s.PROPER,I=s.CONFIGURABLE,T="ArrayBuffer",R="DataView",N="prototype",M="Wrong index",B=A.getterFor(T),O=A.getterFor(R),x=A.set,C=r[T],L=C,j=L&&L[N],_=r[R],U=_&&_[N],F=Object.prototype,V=r.Array,W=r.RangeError,H=i(S),K=i([].reverse),z=m.pack,Y=m.unpack,q=function(t){return[255&t]},G=function(t){return[255&t,t>>8&255]},J=function(t){return[255&t,t>>8&255,t>>16&255,t>>24&255]},Q=function(t){return t[3]<<24|t[2]<<16|t[1]<<8|t[0]},X=function(t){return z(y(t),23,4)},Z=function(t){return z(t,52,8)},$=function(t,e,n){l(t[N],e,{configurable:!0,get:function(){return n(this)[e]}})},tt=function(t,e,n,r){var i=O(t),a=p(n),o=!!r;if(a+e>i.byteLength)throw new W(M);var s=i.bytes,u=a+i.byteOffset,l=k(s,u,u+e);return o?l:K(l)},et=function(t,e,n,r,i,a){var o=O(t),s=p(n),u=r(+i),l=!!a;if(s+e>o.byteLength)throw new W(M);for(var c=o.bytes,f=s+o.byteOffset,h=0;h<e;h++)c[f+h]=u[l?h:e-h-1]};if(o){var nt=P&&C.name!==T;f((function(){C(1)}))&&f((function(){new C(-1)}))&&!f((function(){return new C,new C(1.5),new C(NaN),1!==C.length||nt&&!I}))?nt&&I&&u(C,"name",T):((L=function(t){return h(this,j),E(new C(p(t)),this,L)})[N]=j,j.constructor=L,w(L,C)),b&&g(U)!==F&&b(U,F);var rt=new _(new L(2)),it=i(U.setInt8);rt.setInt8(0,2147483648),rt.setInt8(1,2147483649),!rt.getInt8(0)&&rt.getInt8(1)||c(U,{setInt8:function(t,e){it(this,t,e<<24>>24)},setUint8:function(t,e){it(this,t,e<<24>>24)}},{unsafe:!0})}else j=(L=function(t){h(this,j);var e=p(t);x(this,{type:T,bytes:H(V(e),0),byteLength:e}),a||(this.byteLength=e,this.detached=!1)})[N],U=(_=function(t,e,n){h(this,U),h(t,j);var r=B(t),i=r.byteLength,o=d(e);if(o<0||o>i)throw new W("Wrong offset");if(o+(n=void 0===n?i-o:v(n))>i)throw new W("Wrong length");x(this,{type:R,buffer:t,byteLength:n,byteOffset:o,bytes:r.bytes}),a||(this.buffer=t,this.byteLength=n,this.byteOffset=o)})[N],a&&($(L,"byteLength",B),$(_,"buffer",O),$(_,"byteLength",O),$(_,"byteOffset",O)),c(U,{getInt8:function(t){return tt(this,1,t)[0]<<24>>24},getUint8:function(t){return tt(this,1,t)[0]},getInt16:function(t){var e=tt(this,2,t,arguments.length>1&&arguments[1]);return(e[1]<<8|e[0])<<16>>16},getUint16:function(t){var e=tt(this,2,t,arguments.length>1&&arguments[1]);return e[1]<<8|e[0]},getInt32:function(t){return Q(tt(this,4,t,arguments.length>1&&arguments[1]))},getUint32:function(t){return Q(tt(this,4,t,arguments.length>1&&arguments[1]))>>>0},getFloat32:function(t){return Y(tt(this,4,t,arguments.length>1&&arguments[1]),23)},getFloat64:function(t){return Y(tt(this,8,t,arguments.length>1&&arguments[1]),52)},setInt8:function(t,e){et(this,1,t,q,e)},setUint8:function(t,e){et(this,1,t,q,e)},setInt16:function(t,e){et(this,2,t,G,e,arguments.length>2&&arguments[2])},setUint16:function(t,e){et(this,2,t,G,e,arguments.length>2&&arguments[2])},setInt32:function(t,e){et(this,4,t,J,e,arguments.length>2&&arguments[2])},setUint32:function(t,e){et(this,4,t,J,e,arguments.length>2&&arguments[2])},setFloat32:function(t,e){et(this,4,t,X,e,arguments.length>2&&arguments[2])},setFloat64:function(t,e){et(this,8,t,Z,e,arguments.length>2&&arguments[2])}});D(L,T),D(_,R),t.exports={ArrayBuffer:L,DataView:_}},6575:function(t,e,n){var r=n(9297);t.exports=function(t){return void 0!==t&&(r(t,"value")||r(t,"writable"))}},6651:function(t,e,n){var r=n(4644),i=n(9617).indexOf,a=r.aTypedArray;(0,r.exportTypedArrayMethod)("indexOf",(function(t){return i(a(this),t,arguments.length>1?arguments[1]:void 0)}))},6812:function(t,e,n){var r=n(4644),i=n(8745),a=n(8379),o=r.aTypedArray;(0,r.exportTypedArrayMethod)("lastIndexOf",(function(t){var e=arguments.length;return i(a,o(this),e>1?[t,arguments[1]]:[t])}))},6847:function(t,e,n){n(1134)},7029:function(t,e,n){var r=n(8981),i=n(5610),a=n(6198),o=n(4606),s=Math.min;t.exports=[].copyWithin||function(t,e){var n=r(this),u=a(n),l=i(t,u),c=i(e,u),f=arguments.length>2?arguments[2]:void 0,h=s((void 0===f?u:i(f,u))-c,u-l),d=1;for(c<l&&l<c+h&&(d=-1,c+=h-1,l+=h-1);h-- >0;)c in n?n[l]=n[c]:o(n,l),l+=d,c+=d;return n}},7301:function(t,e,n){var r=n(4644),i=n(9213).some,a=r.aTypedArray;(0,r.exportTypedArrayMethod)("some",(function(t){return i(a(this),t,arguments.length>1?arguments[1]:void 0)}))},7696:function(t,e,n){var r=n(1291),i=n(8014),a=RangeError;t.exports=function(t){if(void 0===t)return 0;var e=r(t),n=i(e);if(e!==n)throw new a("Wrong length or index");return n}},7782:function(t){t.exports=Math.sign||function(t){var e=+t;return 0===e||e!=e?e:e<0?-1:1}},7811:function(t){t.exports="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView},8229:function(t,e,n){var r=n(9590),i=RangeError;t.exports=function(t,e){var n=r(t);if(n%e)throw new i("Wrong offset");return n}},8319:function(t){var e=Math.round;t.exports=function(t){var n=e(t);return n<0?0:n>255?255:255&n}},8490:function(t){var e=Array,n=Math.abs,r=Math.pow,i=Math.floor,a=Math.log,o=Math.LN2;t.exports={pack:function(t,s,u){var l,c,f,h=e(u),d=8*u-s-1,v=(1<<d)-1,p=v>>1,y=23===s?r(2,-24)-r(2,-77):0,m=t<0||0===t&&1/t<0?1:0,g=0;for((t=n(t))!=t||t===1/0?(c=t!=t?1:0,l=v):(l=i(a(t)/o),t*(f=r(2,-l))<1&&(l--,f*=2),(t+=l+p>=1?y/f:y*r(2,1-p))*f>=2&&(l++,f/=2),l+p>=v?(c=0,l=v):l+p>=1?(c=(t*f-1)*r(2,s),l+=p):(c=t*r(2,p-1)*r(2,s),l=0));s>=8;)h[g++]=255&c,c/=256,s-=8;for(l=l<<s|c,d+=s;d>0;)h[g++]=255&l,l/=256,d-=8;return h[g-1]|=128*m,h},unpack:function(t,e){var n,i=t.length,a=8*i-e-1,o=(1<<a)-1,s=o>>1,u=a-7,l=i-1,c=t[l--],f=127&c;for(c>>=7;u>0;)f=256*f+t[l--],u-=8;for(n=f&(1<<-u)-1,f>>=-u,u+=e;u>0;)n=256*n+t[l--],u-=8;if(0===f)f=1-s;else{if(f===o)return n?NaN:c?-1/0:1/0;n+=r(2,e),f-=s}return(c?-1:1)*n*r(2,f-e)}}},8747:function(t,e,n){var r=n(4644),i=r.aTypedArray,a=r.exportTypedArrayMethod,o=Math.floor;a("reverse",(function(){for(var t,e=this,n=i(e).length,r=o(n/2),a=0;a<r;)t=e[a],e[a++]=e[--n],e[n]=t;return e}))},8845:function(t,e,n){var r=n(4576),i=n(9565),a=n(4644),o=n(6198),s=n(8229),u=n(8981),l=n(9039),c=r.RangeError,f=r.Int8Array,h=f&&f.prototype,d=h&&h.set,v=a.aTypedArray,p=a.exportTypedArrayMethod,y=!l((function(){var t=new Uint8ClampedArray(2);return i(d,t,{length:1,0:3},1),3!==t[1]})),m=y&&a.NATIVE_ARRAY_BUFFER_VIEWS&&l((function(){var t=new f(2);return t.set(1),t.set("2",1),0!==t[0]||2!==t[1]}));p("set",(function(t){v(this);var e=s(arguments.length>1?arguments[1]:void 0,1),n=u(t);if(y)return i(d,this,n,e);var r=this.length,a=o(n),l=0;if(a+e>r)throw new c("Wrong length");for(;l<a;)this[e+l]=n[l++]}),!y||m)},8995:function(t,e,n){var r=n(4644),i=n(9213).map,a=r.aTypedArray,o=r.getTypedArrayConstructor;(0,r.exportTypedArrayMethod)("map",(function(t){return i(a(this),t,arguments.length>1?arguments[1]:void 0,(function(t,e){return new(o(t))(e)}))}))},9369:function(t,e,n){var r=n(4644),i=n(9504),a=r.aTypedArray,o=r.exportTypedArrayMethod,s=i([].join);o("join",(function(t){return s(a(this),t)}))},9423:function(t,e,n){var r=n(4644),i=n(9039),a=n(7680),o=r.aTypedArray,s=r.getTypedArrayConstructor;(0,r.exportTypedArrayMethod)("slice",(function(t,e){for(var n=a(o(this),t,e),r=s(this),i=0,u=n.length,l=new r(u);u>i;)l[i]=n[i++];return l}),i((function(){new Int8Array(1).slice()})))},9590:function(t,e,n){var r=n(1291),i=RangeError;t.exports=function(t){var e=r(t);if(e<0)throw new i("The argument can't be less than 0");return e}},9948:function(t,e,n){var r=n(5370),i=n(4644).getTypedArrayConstructor;t.exports=function(t,e){return r(i(t),e)}},9955:function(t,e,n){var r=n(4644),i=n(9213).findIndex,a=r.aTypedArray;(0,r.exportTypedArrayMethod)("findIndex",(function(t){return i(a(this),t,arguments.length>1?arguments[1]:void 0)}))}},function(t){var e;return e=2795,t(t.s=e)}])}));